/*! DataTables 1.10.7
 * Â©2008-2015 SpryMedia Ltd - datatables.net/license
 */
(function(Ea,Q,k){var P=function(h){function W(a){var b,c,e={};h.each(a,function(d){if((b=d.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=d.replace(b[0],b[2].toLowerCase()),e[c]=d,"o"===b[1]&&W(a[d])});a._hungarianMap=e}function H(a,b,c){a._hungarianMap||W(a);var e;h.each(b,function(d){e=a._hungarianMap[d];if(e!==k&&(c||b[e]===k))"o"===e.charAt(0)?(b[e]||(b[e]={}),h.extend(!0,b[e],b[d]),H(a[e],b[e],c)):b[e]=b[d]})}function P(a){var b=m.defaults.oLanguage,c=a.sZeroRecords;
!a.sEmptyTable&&(c&&"No data available in table"===b.sEmptyTable)&&E(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(c&&"Loading..."===b.sLoadingRecords)&&E(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&db(a)}function eb(a){A(a,"ordering","bSort");A(a,"orderMulti","bSortMulti");A(a,"orderClasses","bSortClasses");A(a,"orderCellsTop","bSortCellsTop");A(a,"order","aaSorting");A(a,"orderFixed","aaSortingFixed");A(a,"paging","bPaginate");
A(a,"pagingType","sPaginationType");A(a,"pageLength","iDisplayLength");A(a,"searching","bFilter");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&H(m.models.oSearch,a[b])}function fb(a){A(a,"orderable","bSortable");A(a,"orderData","aDataSort");A(a,"orderSequence","asSorting");A(a,"orderDataType","sortDataType");var b=a.aDataSort;b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){var a=a.oBrowser,b=h("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",
top:1,left:1,width:100,overflow:"scroll"}).append(h('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth;a.bScrollbarLeft=1!==Math.round(c.offset().left);b.remove()}function hb(a,b,c,e,d,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;e!==d;)a.hasOwnProperty(e)&&(g=j?b(g,a[e],e,a):a[e],j=!0,e+=f);return g}function Fa(a,b){var c=m.defaults.column,e=a.aoColumns.length,c=h.extend({},m.models.oColumn,c,{nTh:b?b:Q.createElement("th"),sTitle:c.sTitle?
c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[e],mData:c.mData?c.mData:e,idx:e});a.aoColumns.push(c);c=a.aoPreSearchCols;c[e]=h.extend({},m.models.oSearch,c[e]);ka(a,e,h(b).data())}function ka(a,b,c){var b=a.aoColumns[b],e=a.oClasses,d=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=d.attr("width")||null;var f=(d.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),H(m.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&
(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),h.extend(b,c),E(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),E(b,c,"aDataSort"));var g=b.mData,j=R(g),i=b.mRender?R(b.mRender):null,c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b.fnGetData=function(a,b,c){var e=j(a,b,k,c);return i&&b?i(e,b,a,c):e};b.fnSetData=function(a,b,c){return S(g)(a,b,c)};"number"!==typeof g&&
(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,d.addClass(e.sSortableNone));a=-1!==h.inArray("asc",b.asSorting);c=-1!==h.inArray("desc",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=e.sSortableNone,b.sSortingClassJUI=""):a&&!c?(b.sSortingClass=e.sSortableAsc,b.sSortingClassJUI=e.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=e.sSortableDesc,b.sSortingClassJUI=e.sSortJUIDescAllowed):(b.sSortingClass=e.sSortable,b.sSortingClassJUI=e.sSortJUI)}function X(a){if(!1!==a.oFeatures.bAutoWidth){var b=
a.aoColumns;Ga(a);for(var c=0,e=b.length;c<e;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(""!==b.sY||""!==b.sX)&&Y(a);w(a,null,"column-sizing",[a])}function la(a,b){var c=Z(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function $(a,b){var c=Z(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function aa(a){return Z(a,"bVisible").length}function Z(a,b){var c=[];h.map(a.aoColumns,function(a,d){a[b]&&c.push(d)});return c}function Ha(a){var b=a.aoColumns,c=a.aoData,e=m.ext.type.detect,d,
f,g,j,i,h,l,q,n;d=0;for(f=b.length;d<f;d++)if(l=b[d],n=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=e.length;g<j;g++){i=0;for(h=c.length;i<h;i++){n[i]===k&&(n[i]=x(a,i,d,"type"));q=e[g](n[i],a);if(!q&&g!==e.length-1)break;if("html"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function ib(a,b,c,e){var d,f,g,j,i,o,l=a.aoColumns;if(b)for(d=b.length-1;0<=d;d--){o=b[d];var q=o.targets!==k?o.targets:o.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<
g;f++)if("number"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Fa(a);e(q[f],o)}else if("number"===typeof q[f]&&0>q[f])e(l.length+q[f],o);else if("string"===typeof q[f]){j=0;for(i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&e(j,o)}}if(c){d=0;for(a=c.length;d<a;d++)e(d,c[d])}}function K(a,b,c,e){var d=a.aoData.length,f=h.extend(!0,{},m.models.oRow,{src:c?"dom":"data"});f._aData=b;a.aoData.push(f);for(var b=a.aoColumns,f=0,g=b.length;f<g;f++)c&&Ia(a,d,f,x(a,d,f)),b[f].sType=null;a.aiDisplayMaster.push(d);
(c||!a.oFeatures.bDeferRender)&&Ja(a,d,c,e);return d}function ma(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,d){c=na(a,d);return K(a,c.data,d,c.cells)})}function x(a,b,c,e){var d=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,c=f.fnGetData(g,e,{settings:a,row:b,col:c});if(c===k)return a.iDrawError!=d&&null===j&&(I(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b,4),a.iDrawError=d),j;if((c===g||null===c)&&
null!==j)c=j;else if("function"===typeof c)return c.call(g);return null===c&&"display"==e?"":c}function Ia(a,b,c,e){a.aoColumns[c].fnSetData(a.aoData[b]._aData,e,{settings:a,row:b,col:c})}function Ka(a){return h.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function R(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=R(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,
c,f,g){return a(b,c,f,g)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var c=function(a,b,f){var g,j;if(""!==f){j=Ka(f);for(var i=0,h=j.length;i<h;i++){f=j[i].match(ba);g=j[i].match(T);if(f){j[i]=j[i].replace(ba,"");""!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(".");i=0;for(h=a.length;i<h;i++)g.push(c(a[i],b,j));a=f[0].substring(1,f[0].length-1);a=""===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(T,"");a=a[j[i]]();continue}if(null===a||a[j[i]]===
k)return k;a=a[j[i]]}}return a};return function(b,d){return c(b,d,a)}}return function(b){return b[a]}}function S(a){if(h.isPlainObject(a))return S(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,e,d){a(b,"set",e,d)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,e,d){var d=Ka(d),f;f=d[d.length-1];for(var g,j,i=0,h=d.length-1;i<h;i++){g=d[i].match(ba);j=d[i].match(T);if(g){d[i]=d[i].replace(ba,"");a[d[i]]=[];
f=d.slice();f.splice(0,i+1);g=f.join(".");j=0;for(h=e.length;j<h;j++)f={},b(f,e[j],g),a[d[i]].push(f);return}j&&(d[i]=d[i].replace(T,""),a=a[d[i]](e));if(null===a[d[i]]||a[d[i]]===k)a[d[i]]={};a=a[d[i]]}if(f.match(T))a[f.replace(T,"")](e);else a[f.replace(ba,"")]=e};return function(c,e){return b(c,e,a)}}return function(b,e){b[a]=e}}function La(a){return D(a.aoData,"_aData")}function oa(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0}function pa(a,b,c){for(var e=-1,d=0,f=a.length;d<
f;d++)a[d]==b?e=d:a[d]>b&&a[d]--; -1!=e&&c===k&&a.splice(e,1)}function ca(a,b,c,e){var d=a.aoData[b],f,g=function(c,f){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=x(a,b,f,"display")};if("dom"===c||(!c||"auto"===c)&&"dom"===d.src)d._aData=na(a,d,e,e===k?k:d._aData).data;else{var j=d.anCells;if(j)if(e!==k)g(j[e],e);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}d._aSortData=null;d._aFilterData=null;g=a.aoColumns;if(e!==k)g[e].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;
Ma(d)}}function na(a,b,c,e){var d=[],f=b.firstChild,g,j=0,i,o=a.aoColumns,l=a._rowReadObject,e=e||l?{}:[],q=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),S(a)(e,b.getAttribute(c)))}},a=function(a){if(c===k||c===j)g=o[j],i=h.trim(a.innerHTML),g&&g._bAttrSrc?(S(g.mData._)(e,i),q(g.mData.sort,a),q(g.mData.type,a),q(g.mData.filter,a)):l?(g._setter||(g._setter=S(g.mData)),g._setter(e,i)):e[j]=i;j++};if(f)for(;f;){b=f.nodeName.toUpperCase();if("TD"==b||"TH"==b)a(f),
d.push(f);f=f.nextSibling}else{d=b.anCells;f=0;for(b=d.length;f<b;f++)a(d[f])}return{data:e,cells:d}}function Ja(a,b,c,e){var d=a.aoData[b],f=d._aData,g=[],j,i,h,l,q;if(null===d.nTr){j=c||Q.createElement("tr");d.nTr=j;d.anCells=g;j._DT_RowIndex=b;Ma(d);l=0;for(q=a.aoColumns.length;l<q;l++){h=a.aoColumns[l];i=c?e[l]:Q.createElement(h.sCellType);g.push(i);if(!c||h.mRender||h.mData!==l)i.innerHTML=x(a,b,l,"display");h.sClass&&(i.className+=" "+h.sClass);h.bVisible&&!c?j.appendChild(i):!h.bVisible&&c&&
i.parentNode.removeChild(i);h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,i,x(a,b,l),f,b,l)}w(a,"aoRowCreatedCallback",null,[j,f,b])}d.nTr.setAttribute("role","row")}function Ma(a){var b=a.nTr,c=a._aData;if(b){c.DT_RowId&&(b.id=c.DT_RowId);if(c.DT_RowClass){var e=c.DT_RowClass.split(" ");a.__rowc=a.__rowc?Na(a.__rowc.concat(e)):e;h(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowAttr&&h(b).attr(c.DT_RowAttr);c.DT_RowData&&h(b).data(c.DT_RowData)}}function jb(a){var b,c,e,d,
f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,o=a.oClasses,l=a.aoColumns;i&&(d=h("<tr/>").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],e=h(f.nTh).addClass(f.sClass),i&&e.appendTo(d),a.oFeatures.bSort&&(e.addClass(f.sSortingClass),!1!==f.bSortable&&(e.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Oa(a,f.nTh,b))),f.sTitle!=e.html()&&e.html(f.sTitle),Pa(a,"header")(a,e,f,o);i&&da(a.aoHeader,g);h(g).find(">tr").attr("role","row");h(g).find(">tr>th, >tr>td").addClass(o.sHeaderTH);
h(j).find(">tr>th, >tr>td").addClass(o.sFooterTH);if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function ea(a,b,c){var e,d,f,g=[],j=[],i=a.aoColumns.length,o;if(b){c===k&&(c=!1);e=0;for(d=b.length;e<d;e++){g[e]=b[e].slice();g[e].nTr=b[e].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[e].splice(f,1);j.push([])}e=0;for(d=g.length;e<d;e++){if(a=g[e].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[e].length;f<b;f++)if(o=
i=1,j[e][f]===k){a.appendChild(g[e][f].cell);for(j[e][f]=1;g[e+i]!==k&&g[e][f].cell==g[e+i][f].cell;)j[e+i][f]=1,i++;for(;g[e][f+o]!==k&&g[e][f].cell==g[e][f+o].cell;){for(c=0;c<i;c++)j[e+c][f+o]=1;o++}h(g[e][f].cell).attr("rowspan",i).attr("colspan",o)}}}}function M(a){var b=w(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,e=a.asStripeClasses,d=e.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==B(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=
j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,o=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!kb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:o;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ja(a,l);l=q.nTr;if(0!==d){var n=e[c%d];q._sRowStripe!=n&&(h(l).removeClass(q._sRowStripe).addClass(n),q._sRowStripe=n)}w(a,"aoRowCallback",null,[l,q._aData,c,j]);b.push(l);c++}}else c=f.sZeroRecords,
1==a.iDraw&&"ajax"==B(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":d?e[0]:""}).append(h("<td />",{valign:"top",colSpan:aa(a),"class":a.oClasses.sRowEmpty}).html(c))[0];w(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],La(a),g,o,i]);w(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],La(a),g,o,i]);e=h(a.nTBody);e.children().detach();e.append(h(b));w(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=
!1}}function N(a,b){var c=a.oFeatures,e=c.bFilter;c.bSort&&lb(a);e?fa(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;M(a);a._drawHold=!1}function mb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),e=a.oFeatures,d=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=d[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var f=a.sDom.split(""),g,j,i,o,l,q,n=0;n<f.length;n++){g=
null;j=f[n];if("<"==j){i=h("<div/>")[0];o=f[n+1];if("'"==o||'"'==o){l="";for(q=2;f[n+q]!=o;)l+=f[n+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter);-1!=l.indexOf(".")?(o=l.split("."),i.id=o[0].substr(1,o[0].length-1),i.className=o[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;n+=q}d.append(i);d=h(i)}else if(">"==j)d=d.parent();else if("l"==j&&e.bPaginate&&e.bLengthChange)g=nb(a);else if("f"==j&&e.bFilter)g=ob(a);else if("r"==j&&e.bProcessing)g=pb(a);else if("t"==j)g=qb(a);else if("i"==
j&&e.bInfo)g=rb(a);else if("p"==j&&e.bPaginate)g=sb(a);else if(0!==m.ext.feature.length){i=m.ext.feature;q=0;for(o=i.length;q<o;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),d.append(g))}c.replaceWith(d)}function da(a,b){var c=h(b).children("tr"),e,d,f,g,j,i,o,l,q,n;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<i;f++){e=c[f];for(d=e.firstChild;d;){if("TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase()){l=
1*d.getAttribute("colspan");q=1*d.getAttribute("rowspan");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;o=g;n=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][o+j]={cell:d,unique:n},a[f+g].nTr=e}d=d.nextSibling}}}function qa(a,b,c){var e=[];c||(c=a.aoHeader,b&&(c=[],da(c,b)));for(var b=0,d=c.length;b<d;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!e[f]||!a.bSortCellsTop))e[f]=c[b][f].cell;return e}function ra(a,b,c){w(a,"aoServerParams","serverParams",[b]);
if(b&&h.isArray(b)){var e={},d=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(d);c?(c=c[0],e[c]||(e[c]=[]),e[c].push(b.value)):e[b.name]=b.value});b=e}var f,g=a.ajax,j=a.oInstance,i=function(b){w(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var o=h.isFunction(f)?f(b,a):f,b=h.isFunction(f)&&o?o:h.extend(!0,b,o);delete g.data}o={data:b,success:function(b){var c=b.error||b.sError;c&&I(a,0,c);a.json=b;i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,
c){var f=w(a,null,"xhr",[a,null,a.jqXHR]);-1===h.inArray(!0,f)&&("parsererror"==c?I(a,0,"Invalid JSON response",1):4===b.readyState&&I(a,0,"Ajax error",7));C(a,!1)}};a.oAjaxData=b;w(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=h.ajax(h.extend(o,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(o,g)),g.data=f)}function kb(a){return a.bAjaxDataGet?
(a.iDraw++,C(a,!0),ra(a,tb(a),function(b){ub(a,b)}),!1):!0}function tb(a){var b=a.aoColumns,c=b.length,e=a.oFeatures,d=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,o,l,q=U(a);g=a._iDisplayStart;i=!1!==e.bPaginate?a._iDisplayLength:-1;var n=function(a,b){j.push({name:a,value:b})};n("sEcho",a.iDraw);n("iColumns",c);n("sColumns",D(b,"sName").join(","));n("iDisplayStart",g);n("iDisplayLength",i);var k={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:d.sSearch,regex:d.bRegex}};for(g=
0;g<c;g++)o=b[g],l=f[g],i="function"==typeof o.mData?"function":o.mData,k.columns.push({data:i,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),n("mDataProp_"+g,i),e.bFilter&&(n("sSearch_"+g,l.sSearch),n("bRegex_"+g,l.bRegex),n("bSearchable_"+g,o.bSearchable)),e.bSort&&n("bSortable_"+g,o.bSortable);e.bFilter&&(n("sSearch",d.sSearch),n("bRegex",d.bRegex));e.bSort&&(h.each(q,function(a,b){k.order.push({column:b.col,dir:b.dir});n("iSortCol_"+a,b.col);
n("sSortDir_"+a,b.dir)}),n("iSortingCols",q.length));b=m.ext.legacy.ajax;return null===b?a.sAjaxSource?j:k:b?j:k}function ub(a,b){var c=sa(a,b),e=b.sEcho!==k?b.sEcho:b.draw,d=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}oa(a);a._iRecordsTotal=parseInt(d,10);a._iRecordsDisplay=parseInt(f,10);e=0;for(d=c.length;e<d;e++)K(a,c[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;
M(a);a._bInitComplete||ta(a,b);a.bAjaxDataGet=!0;C(a,!1)}function sa(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?R(c)(b):b}function ob(a){var b=a.oClasses,c=a.sTableId,e=a.oLanguage,d=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=e.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,b=h("<div/>",{id:!f.f?c+"_filter":null,"class":b.sFilter}).append(h("<label/>").append(j)),
f=function(){var b=!this.value?"":this.value;b!=d.sSearch&&(fa(a,{sSearch:b,bRegex:d.bRegex,bSmart:d.bSmart,bCaseInsensitive:d.bCaseInsensitive}),a._iDisplayStart=0,M(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===B(a)?400:0,i=h("input",b).val(d.sSearch).attr("placeholder",e.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?ua(f,g):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==
Q.activeElement&&i.val(d.sSearch)}catch(f){}});return b[0]}function fa(a,b,c){var e=a.oPreviousSearch,d=a.aoPreSearchCols,f=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive};Ha(a);if("ssp"!=B(a)){vb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<d.length;b++)wb(a,d[b].sSearch,b,d[b].bEscapeRegex!==k?!d[b].bEscapeRegex:d[b].bRegex,d[b].bSmart,d[b].bCaseInsensitive);xb(a)}else f(b);a.bFiltered=
!0;w(a,null,"search",[a])}function xb(a){for(var b=m.ext.search,c=a.aiDisplay,e,d,f=0,g=b.length;f<g;f++){for(var j=[],i=0,h=c.length;i<h;i++)d=c[i],e=a.aoData[d],b[f](a,e._aFilterData,d,e._aData,i)&&j.push(d);c.length=0;c.push.apply(c,j)}}function wb(a,b,c,e,d,f){if(""!==b)for(var g=a.aiDisplay,e=Qa(b,e,d,f),d=g.length-1;0<=d;d--)b=a.aoData[g[d]]._aFilterData[c],e.test(b)||g.splice(d,1)}function vb(a,b,c,e,d,f){var e=Qa(b,e,d,f),d=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster,g;0!==m.ext.search.length&&
(c=!0);g=yb(a);if(0>=b.length)a.aiDisplay=f.slice();else{if(g||c||d.length>b.length||0!==b.indexOf(d)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)e.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function Qa(a,b,c,e){a=b?a:va(a);c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0))var b=a.match(/^"(.*)"$/),a=b?b[1]:a;return a.replace('"',"")}).join(")(?=.*?")+").*$");return RegExp(a,e?"i":"")}function va(a){return a.replace(Yb,"\\$1")}
function yb(a){var b=a.aoColumns,c,e,d,f,g,j,i,h,l=m.ext.type.search;c=!1;e=0;for(f=a.aoData.length;e<f;e++)if(h=a.aoData[e],!h._aFilterData){j=[];d=0;for(g=b.length;d<g;d++)c=b[d],c.bSearchable?(i=x(a,e,d,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(wa.innerHTML=i,i=Zb?wa.textContent:wa.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j;h._sFilterRow=j.join("  ");c=!0}return c}
function zb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Ab(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function rb(a){var b=a.sTableId,c=a.aanFeatures.i,e=h("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Bb,sName:"information"}),e.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info"));return e[0]}function Bb(a){var b=
a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,e=a._iDisplayStart+1,d=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered);j+=c.sInfoPostFix;j=Cb(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,e,d,f,g,j));h(b).html(j)}}function Cb(a,b){var c=a.fnFormatNumber,e=a._iDisplayStart+1,d=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===d;return b.replace(/_START_/g,c.call(a,e)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,
c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(e/d))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/d)))}function ga(a){var b,c,e=a.iInitDisplayStart,d=a.aoColumns,f;c=a.oFeatures;if(a.bInitialised){mb(a);jb(a);ea(a,a.aoHeader);ea(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Ga(a);b=0;for(c=d.length;b<c;b++)f=d[b],f.sWidth&&(f.nTh.style.width=s(f.sWidth));N(a);d=B(a);"ssp"!=d&&("ajax"==d?ra(a,[],function(c){var f=sa(a,c);for(b=0;b<f.length;b++)K(a,f[b]);
a.iInitDisplayStart=e;N(a);C(a,!1);ta(a,c)},a):(C(a,!1),ta(a)))}else setTimeout(function(){ga(a)},200)}function ta(a,b){a._bInitComplete=!0;b&&X(a);w(a,"aoInitComplete","init",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);w(a,null,"length",[a,c])}function nb(a){for(var b=a.oClasses,c=a.sTableId,e=a.aLengthMenu,d=h.isArray(e[0]),f=d?e[0]:e,e=d?e[1]:e,d=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;g<j;g++)d[0][g]=new Option(e[g],
f[g]);var i=h("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+"_length");i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",d[0].outerHTML));h("select",i).val(a._iDisplayLength).bind("change.DT",function(){Ra(a,h(this).val());M(a)});h(a.nTable).bind("length.dt.DT",function(b,c,f){a===c&&h("select",i).val(f)});return i[0]}function sb(a){var b=a.sPaginationType,c=m.ext.pager[b],e="function"===typeof c,d=function(a){M(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],
f=a.aanFeatures;e||c.fnInit(a,b,d);f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(e){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),q,l=0;for(q=f.p.length;l<q;l++)Pa(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,d)},sName:"pagination"}));return b}function Ta(a,b,c){var e=a._iDisplayStart,d=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===d?e=0:"number"===typeof b?(e=b*d,e>f&&(e=0)):
"first"==b?e=0:"previous"==b?(e=0<=d?e-d:0,0>e&&(e=0)):"next"==b?e+d<f&&(e+=d):"last"==b?e=Math.floor((f-1)/d)*d:I(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==e;a._iDisplayStart=e;b&&(w(a,null,"page",[a]),c&&M(a));return b}function pb(a){return h("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none");w(a,
null,"processing",[a,b])}function qb(a){var b=h(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var e=c.sX,d=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),o=h(b[0].cloneNode(!1)),l=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width");l.length||(l=null);c=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,
width:e?!e?null:s(e):"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{"class":f.sScrollBody}).css({overflow:"auto",height:!d?null:s(d),width:!e?null:s(e)}).append(b));l&&c.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:e?!e?null:s(e):"100%"}).append(h("<div/>",{"class":f.sScrollFootInner}).append(o.removeAttr("id").css("margin-left",
0).append("bottom"===j?g:null).append(b.children("tfoot")))));var b=c.children(),q=b[0],f=b[1],n=l?b[2]:null;if(e)h(f).on("scroll.DT",function(){var a=this.scrollLeft;q.scrollLeft=a;l&&(n.scrollLeft=a)});a.nScrollHead=q;a.nScrollBody=f;a.nScrollFoot=n;a.aoDrawCallback.push({fn:Y,sName:"scrolling"});return c[0]}function Y(a){var b=a.oScroll,c=b.sX,e=b.sXInner,d=b.sY,f=b.iBarWidth,g=h(a.nScrollHead),j=g[0].style,i=g.children("div"),o=i[0].style,l=i.children("table"),i=a.nScrollBody,q=h(i),n=i.style,
k=h(a.nScrollFoot).children("div"),p=k.children("table"),m=h(a.nTHead),r=h(a.nTable),t=r[0],O=t.style,L=a.nTFoot?h(a.nTFoot):null,ha=a.oBrowser,w=ha.bScrollOversize,v,u,y,x,z,A=[],B=[],C=[],D,E=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};r.children("thead, tfoot").remove();z=m.clone().prependTo(r);v=m.find("tr");y=z.find("tr");z.find("th, td").removeAttr("tabindex");L&&(x=L.clone().prependTo(r),u=L.find("tr"),x=x.find("tr"));
c||(n.width="100%",g[0].style.width="100%");h.each(qa(a,z),function(b,c){D=la(a,b);c.style.width=a.aoColumns[D].sWidth});L&&G(function(a){a.style.width=""},x);b.bCollapse&&""!==d&&(n.height=q[0].offsetHeight+m[0].offsetHeight+"px");g=r.outerWidth();if(""===c){if(O.width="100%",w&&(r.find("tbody").height()>i.offsetHeight||"scroll"==q.css("overflow-y")))O.width=s(r.outerWidth()-f)}else""!==e?O.width=s(e):g==q.width()&&q.height()<r.height()?(O.width=s(g-f),r.outerWidth()>g-f&&(O.width=s(g))):O.width=
s(g);g=r.outerWidth();G(E,y);G(function(a){C.push(a.innerHTML);A.push(s(h(a).css("width")))},y);G(function(a,b){a.style.width=A[b]},v);h(y).height(0);L&&(G(E,x),G(function(a){B.push(s(h(a).css("width")))},x),G(function(a,b){a.style.width=B[b]},u),h(x).height(0));G(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+C[b]+"</div>";a.style.width=A[b]},y);L&&G(function(a,b){a.innerHTML="";a.style.width=B[b]},x);if(r.outerWidth()<g){u=i.scrollHeight>i.offsetHeight||
"scroll"==q.css("overflow-y")?g+f:g;if(w&&(i.scrollHeight>i.offsetHeight||"scroll"==q.css("overflow-y")))O.width=s(u-f);(""===c||""!==e)&&I(a,1,"Possible column misalignment",6)}else u="100%";n.width=s(u);j.width=s(u);L&&(a.nScrollFoot.style.width=s(u));!d&&w&&(n.height=s(t.offsetHeight+f));d&&b.bCollapse&&(n.height=s(d),b=c&&t.offsetWidth>i.offsetWidth?f:0,t.offsetHeight<i.offsetHeight&&(n.height=s(t.offsetHeight+b)));b=r.outerWidth();l[0].style.width=s(b);o.width=s(b);l=r.height()>i.clientHeight||
"scroll"==q.css("overflow-y");ha="padding"+(ha.bScrollbarLeft?"Left":"Right");o[ha]=l?f+"px":"0px";L&&(p[0].style.width=s(b),k[0].style.width=s(b),k[0].style[ha]=l?f+"px":"0px");q.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)i.scrollTop=0}function G(a,b,c){for(var e=0,d=0,f=b.length,g,j;d<f;){g=b[d].firstChild;for(j=c?c[d].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,e):a(g,e),e++),g=g.nextSibling,j=c?j.nextSibling:null;d++}}function Ga(a){var b=a.nTable,c=a.aoColumns,e=a.oScroll,d=e.sY,f=e.sX,
g=e.sXInner,j=c.length,e=Z(a,"bVisible"),i=h("th",a.nTHead),o=b.getAttribute("width"),l=b.parentNode,k=!1,n,m;(n=b.style.width)&&-1!==n.indexOf("%")&&(o=n);for(n=0;n<e.length;n++)m=c[e[n]],null!==m.sWidth&&(m.sWidth=Db(m.sWidthOrig,l),k=!0);if(!k&&!f&&!d&&j==aa(a)&&j==i.length)for(n=0;n<j;n++)c[n].sWidth=s(i.eq(n).width());else{j=h(b).clone().css("visibility","hidden").removeAttr("id");j.find("tbody tr").remove();var p=h("<tr/>").appendTo(j.find("tbody"));j.find("tfoot th, tfoot td").css("width",
"");i=qa(a,j.find("thead")[0]);for(n=0;n<e.length;n++)m=c[e[n]],i[n].style.width=null!==m.sWidthOrig&&""!==m.sWidthOrig?s(m.sWidthOrig):"";if(a.aoData.length)for(n=0;n<e.length;n++)k=e[n],m=c[k],h(Eb(a,k)).clone(!1).append(m.sContentPadding).appendTo(p);j.appendTo(l);f&&g?j.width(g):f?(j.css("width","auto"),j.width()<l.offsetWidth&&j.width(l.offsetWidth)):d?j.width(l.offsetWidth):o&&j.width(o);Fb(a,j[0]);if(f){for(n=g=0;n<e.length;n++)m=c[e[n]],d=h(i[n]).outerWidth(),g+=null===m.sWidthOrig?d:parseInt(m.sWidth,
10)+d-h(i[n]).width();j.width(s(g));b.style.width=s(g)}for(n=0;n<e.length;n++)if(m=c[e[n]],d=h(i[n]).width())m.sWidth=s(d);b.style.width=s(j.css("width"));j.remove()}o&&(b.style.width=s(o));if((o||f)&&!a._reszEvt)b=function(){h(Ea).bind("resize.DT-"+a.sInstance,ua(function(){X(a)}))},a.oBrowser.bScrollOversize?setTimeout(b,1E3):b(),a._reszEvt=!0}function ua(a,b){var c=b!==k?b:200,e,d;return function(){var b=this,g=+new Date,j=arguments;e&&g<e+c?(clearTimeout(d),d=setTimeout(function(){e=k;a.apply(b,
j)},c)):(e=g,a.apply(b,j))}}function Db(a,b){if(!a)return 0;var c=h("<div/>").css("width",s(a)).appendTo(b||Q.body),e=c[0].offsetWidth;c.remove();return e}function Fb(a,b){var c=a.oScroll;if(c.sX||c.sY)c=!c.sX?c.iBarWidth:0,b.style.width=s(h(b).outerWidth()-c)}function Eb(a,b){var c=Gb(a,b);if(0>c)return null;var e=a.aoData[c];return!e.nTr?h("<td/>").html(x(a,c,b,"display"))[0]:e.anCells[b]}function Gb(a,b){for(var c,e=-1,d=-1,f=0,g=a.aoData.length;f<g;f++)c=x(a,f,b,"display")+"",c=c.replace($b,""),
c.length>e&&(e=c.length,d=f);return d}function s(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function Hb(){var a=m.__scrollbarWidth;if(a===k){var b=h("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body"),a=b[0].offsetWidth-b[0].clientWidth;m.__scrollbarWidth=a;b.remove()}return a}function U(a){var b,c,e=[],d=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var o=[];
f=function(a){a.length&&!h.isArray(a[0])?o.push(a):o.push.apply(o,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<o.length;a++){i=o[a][0];f=d[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=d[g].sType||"string",o[a]._idx===k&&(o[a]._idx=h.inArray(o[a][1],d[g].asSorting)),e.push({src:i,col:g,dir:o[a][1],index:o[a]._idx,type:j,formatter:m.ext.type.order[j+"-pre"]})}return e}function lb(a){var b,c,e=[],d=m.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;
Ha(a);h=U(a);b=0;for(c=h.length;b<c;b++)j=h[b],j.formatter&&g++,Ib(a,j.col);if("ssp"!=B(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)e[i[b]]=b;g===h.length?i.sort(function(a,b){var c,d,g,j,i=h.length,k=f[a]._aSortData,m=f[b]._aSortData;for(g=0;g<i;g++)if(j=h[g],c=k[j.col],d=m[j.col],c=c<d?-1:c>d?1:0,0!==c)return"asc"===j.dir?c:-c;c=e[a];d=e[b];return c<d?-1:c>d?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,m=f[a]._aSortData,r=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=m[i.col],g=r[i.col],i=d[i.type+
"-"+i.dir]||d["string-"+i.dir],c=i(c,g),0!==c)return c;c=e[a];g=e[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Jb(a){for(var b,c,e=a.aoColumns,d=U(a),a=a.oLanguage.oAria,f=0,g=e.length;f<g;f++){c=e[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<d.length&&d[0].col==f?(i.setAttribute("aria-sort","asc"==d[0].dir?"ascending":"descending"),c=j[d[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",
b)}}function Ua(a,b,c,e){var d=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};"number"===typeof d[0]&&(d=a.aaSorting=[d]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,D(d,"0")),-1!==c?(b=g(d[c],!0),null===b&&1===d.length&&(b=0),null===b?d.splice(c,1):(d[c][1]=f[b],d[c]._idx=b)):(d.push([b,f[0],0]),d[d.length-1]._idx=0)):d.length&&d[0][0]==b?(b=g(d[0]),d.length=1,d[0][1]=f[b],d[0]._idx=b):(d.length=0,d.push([b,f[0]]),d[0]._idx=
0);N(a);"function"==typeof e&&e(a)}function Oa(a,b,c,e){var d=a.aoColumns[c];Va(b,{},function(b){!1!==d.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Ua(a,c,b.shiftKey,e);"ssp"!==B(a)&&C(a,!1)},0)):Ua(a,c,b.shiftKey,e))})}function xa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,e=U(a),d=a.oFeatures,f,g;if(d.bSort&&d.bSortClasses){d=0;for(f=b.length;d<f;d++)g=b[d].src,h(D(a.aoData,"anCells",g)).removeClass(c+(2>d?d+1:3));d=0;for(f=e.length;d<f;d++)g=e[d].src,h(D(a.aoData,"anCells",
g)).addClass(c+(2>d?d+1:3))}a.aLastSort=e}function Ib(a,b){var c=a.aoColumns[b],e=m.ext.order[c.sSortDataType],d;e&&(d=e.call(a.oInstance,a,b,$(a,b)));for(var f,g=m.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||e)f=e?d[j]:x(a,j,b,"sort"),c._aSortData[b]=g?g(f):f}function ya(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),
search:zb(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,e){return{visible:b.bVisible,search:zb(a.aoPreSearchCols[e])}})};w(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Kb(a){var b,c,e=a.aoColumns;if(a.oFeatures.bStateSave){var d=a.fnStateLoadCallback.call(a.oInstance,a);if(d&&d.time&&(b=w(a,"aoStateLoadParams","stateLoadParams",[a,d]),-1===h.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&d.time<+new Date-1E3*b)&&e.length===
d.columns.length))){a.oLoadedState=h.extend(!0,{},d);d.start!==k&&(a._iDisplayStart=d.start,a.iInitDisplayStart=d.start);d.length!==k&&(a._iDisplayLength=d.length);d.order!==k&&(a.aaSorting=[],h.each(d.order,function(b,c){a.aaSorting.push(c[0]>=e.length?[0,c[1]]:c)}));d.search!==k&&h.extend(a.oPreviousSearch,Ab(d.search));b=0;for(c=d.columns.length;b<c;b++){var f=d.columns[b];f.visible!==k&&(e[b].bVisible=f.visible);f.search!==k&&h.extend(a.aoPreSearchCols[b],Ab(f.search))}w(a,"aoStateLoaded","stateLoaded",
[a,d])}}}function za(a){var b=m.settings,a=h.inArray(a,D(b,"nTable"));return-1!==a?b[a]:null}function I(a,b,c,e){c="DataTables warning: "+(null!==a?"table id="+a.sTableId+" - ":"")+c;e&&(c+=". For more information about this error, please see http://datatables.net/tn/"+e);if(b)Ea.console&&console.log&&console.log(c);else if(b=m.ext,b=b.sErrMode||b.errMode,w(a,null,"error",[a,e,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,e,c)}}function E(a,b,c,e){h.isArray(c)?
h.each(c,function(c,f){h.isArray(f)?E(a,b,f[0],f[1]):E(a,b,f)}):(e===k&&(e=c),b[c]!==k&&(a[e]=b[c]))}function Lb(a,b,c){var e,d;for(d in b)b.hasOwnProperty(d)&&(e=b[d],h.isPlainObject(e)?(h.isPlainObject(a[d])||(a[d]={}),h.extend(!0,a[d],e)):a[d]=c&&"data"!==d&&"aaData"!==d&&h.isArray(e)?e.slice():e);return a}function Va(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function z(a,
b,c,e){c&&a[b].push({fn:c,sName:e})}function w(a,b,c,e){var d=[];b&&(d=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,e)}));null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,e),d.push(b.result));return d}function Sa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),e=a._iDisplayLength;b>=c&&(b=c-e);b-=b%e;if(-1===e||0>b)b=0;a._iDisplayStart=b}function Pa(a,b){var c=a.renderer,e=m.ext.renderer[b];return h.isPlainObject(c)&&c[b]?e[c[b]]||e._:"string"===typeof c?e[c]||e._:e._}function B(a){return a.oFeatures.bServerSide?
"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Wa(a,b){var c=[],c=Mb.numbers_length,e=Math.floor(c/2);b<=c?c=V(0,b):a<=e?(c=V(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-e?c=V(b-(c-2),b):(c=V(a-e+2,a+e-1),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function db(a){h.each({num:function(b){return Aa(b,a)},"num-fmt":function(b){return Aa(b,a,Xa)},"html-num":function(b){return Aa(b,a,Ba)},"html-num-fmt":function(b){return Aa(b,a,Ba,Xa)}},function(b,
c){u.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(u.type.search[b+a]=u.type.search.html)})}function Nb(a){return function(){var b=[za(this[m.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return m.ext.internal[a].apply(this,b)}}var m,u,t,r,v,Ya={},Ob=/[\r\n]/g,Ba=/<.*?>/g,ac=/^[\w\+\-]/,bc=/[\w\+\-]$/,Yb=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Xa=/[',$\u00a3\u20ac\u00a5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,J=function(a){return!a||!0===a||
"-"===a?!0:!1},Pb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Qb=function(a,b){Ya[b]||(Ya[b]=RegExp(va(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(Ya[b],"."):a},Za=function(a,b,c){var e="string"===typeof a;if(J(a))return!0;b&&e&&(a=Qb(a,b));c&&e&&(a=a.replace(Xa,""));return!isNaN(parseFloat(a))&&isFinite(a)},Rb=function(a,b,c){return J(a)?!0:!(J(a)||"string"===typeof a)?null:Za(a.replace(Ba,""),b,c)?!0:null},D=function(a,b,c){var e=[],d=0,f=a.length;
if(c!==k)for(;d<f;d++)a[d]&&a[d][b]&&e.push(a[d][b][c]);else for(;d<f;d++)a[d]&&e.push(a[d][b]);return e},ia=function(a,b,c,e){var d=[],f=0,g=b.length;if(e!==k)for(;f<g;f++)a[b[f]][c]&&d.push(a[b[f]][c][e]);else for(;f<g;f++)d.push(a[b[f]][c]);return d},V=function(a,b){var c=[],e;b===k?(b=0,e=a):(e=b,b=a);for(var d=b;d<e;d++)c.push(d);return c},Sb=function(a){for(var b=[],c=0,e=a.length;c<e;c++)a[c]&&b.push(a[c]);return b},Na=function(a){var b=[],c,e,d=a.length,f,g=0;e=0;a:for(;e<d;e++){c=a[e];for(f=
0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b},A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ba=/\[.*?\]$/,T=/\(\)$/,wa=h("<div>")[0],Zb=wa.textContent!==k,$b=/<.*?>/g;m=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new t(za(this[u.iApiIndex])):new t(this)};this.fnAddData=function(a,b){var c=this.api(!0),e=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===
k||b)&&c.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],e=c.oScroll;a===k||a?b.draw(!1):(""!==e.sX||""!==e.sY)&&Y(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var e=this.api(!0),a=e.rows(a),d=a.settings()[0],h=d.aoData[a[0][0]];a.remove();b&&b.call(this,d,h);(c===k||c)&&e.draw();return h};
this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,e,d,h){d=this.api(!0);null===b||b===k?d.search(a,c,e,h):d.column(b).search(a,c,e,h);d.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var e=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==e||"th"==e?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};
this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===
k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return za(this[u.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,e,d){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(d===k||d)&&h.columns.adjust();(e===k||e)&&h.draw();return 0};this.fnVersionCheck=u.fnVersionCheck;var b=this,c=a===k,e=this.length;c&&(a={});this.oApi=this.internal=u.internal;for(var d in m.ext.internal)d&&
(this[d]=Nb(d));this.each(function(){var d={},d=1<e?Lb(d,a,!0):a,g=0,j,i=this.getAttribute("id"),o=!1,l=m.defaults,q=h(this);if("table"!=this.nodeName.toLowerCase())I(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{eb(l);fb(l.column);H(l,l,!0);H(l.column,l.column,!0);H(l,h.extend(d,q.data()));var n=m.settings,g=0;for(j=n.length;g<j;g++){var r=n[g];if(r.nTable==this||r.nTHead.parentNode==this||r.nTFoot&&r.nTFoot.parentNode==this){g=d.bRetrieve!==k?d.bRetrieve:l.bRetrieve;if(c||g)return r.oInstance;
if(d.bDestroy!==k?d.bDestroy:l.bDestroy){r.oInstance.fnDestroy();break}else{I(r,0,"Cannot reinitialise DataTable",3);return}}if(r.sTableId==this.id){n.splice(g,1);break}}if(null===i||""===i)this.id=i="DataTables_Table_"+m.ext._unique++;var p=h.extend(!0,{},m.models.oSettings,{sDestroyWidth:q[0].style.width,sInstance:i,sTableId:i});p.nTable=this;p.oApi=b.internal;p.oInit=d;n.push(p);p.oInstance=1===b.length?b:q.dataTable();eb(d);d.oLanguage&&P(d.oLanguage);d.aLengthMenu&&!d.iDisplayLength&&(d.iDisplayLength=
h.isArray(d.aLengthMenu[0])?d.aLengthMenu[0][0]:d.aLengthMenu[0]);d=Lb(h.extend(!0,{},l),d);E(p.oFeatures,d,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));E(p,d,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback",
"renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);E(p.oScroll,d,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);E(p.oLanguage,d,"fnInfoCallback");z(p,"aoDrawCallback",d.fnDrawCallback,"user");z(p,"aoServerParams",d.fnServerParams,"user");z(p,"aoStateSaveParams",d.fnStateSaveParams,"user");z(p,"aoStateLoadParams",
d.fnStateLoadParams,"user");z(p,"aoStateLoaded",d.fnStateLoaded,"user");z(p,"aoRowCallback",d.fnRowCallback,"user");z(p,"aoRowCreatedCallback",d.fnCreatedRow,"user");z(p,"aoHeaderCallback",d.fnHeaderCallback,"user");z(p,"aoFooterCallback",d.fnFooterCallback,"user");z(p,"aoInitComplete",d.fnInitComplete,"user");z(p,"aoPreDrawCallback",d.fnPreDrawCallback,"user");i=p.oClasses;d.bJQueryUI?(h.extend(i,m.ext.oJUIClasses,d.oClasses),d.sDom===l.sDom&&"lfrtip"===l.sDom&&(p.sDom='<"H"lfr>t<"F"ip>'),p.renderer)?
h.isPlainObject(p.renderer)&&!p.renderer.header&&(p.renderer.header="jqueryui"):p.renderer="jqueryui":h.extend(i,m.ext.classes,d.oClasses);q.addClass(i.sTable);if(""!==p.oScroll.sX||""!==p.oScroll.sY)p.oScroll.iBarWidth=Hb();!0===p.oScroll.sX&&(p.oScroll.sX="100%");p.iInitDisplayStart===k&&(p.iInitDisplayStart=d.iDisplayStart,p._iDisplayStart=d.iDisplayStart);null!==d.iDeferLoading&&(p.bDeferLoading=!0,g=h.isArray(d.iDeferLoading),p._iRecordsDisplay=g?d.iDeferLoading[0]:d.iDeferLoading,p._iRecordsTotal=
g?d.iDeferLoading[1]:d.iDeferLoading);var t=p.oLanguage;h.extend(!0,t,d.oLanguage);""!==t.sUrl&&(h.ajax({dataType:"json",url:t.sUrl,success:function(a){P(a);H(l.oLanguage,a);h.extend(true,t,a);ga(p)},error:function(){ga(p)}}),o=!0);null===d.asStripeClasses&&(p.asStripeClasses=[i.sStripeOdd,i.sStripeEven]);var g=p.asStripeClasses,s=q.children("tbody").find("tr").eq(0);-1!==h.inArray(!0,h.map(g,function(a){return s.hasClass(a)}))&&(h("tbody tr",this).removeClass(g.join(" ")),p.asDestroyStripes=g.slice());
n=[];g=this.getElementsByTagName("thead");0!==g.length&&(da(p.aoHeader,g[0]),n=qa(p));if(null===d.aoColumns){r=[];g=0;for(j=n.length;g<j;g++)r.push(null)}else r=d.aoColumns;g=0;for(j=r.length;g<j;g++)Fa(p,n?n[g]:null);ib(p,d.aoColumnDefs,r,function(a,b){ka(p,a,b)});if(s.length){var u=function(a,b){return a.getAttribute("data-"+b)!==null?b:null};h.each(na(p,s[0]).cells,function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=u(b,"sort")||u(b,"order"),e=u(b,"filter")||u(b,"search");if(d!==null||e!==
null){c.mData={_:a+".display",sort:d!==null?a+".@data-"+d:k,type:d!==null?a+".@data-"+d:k,filter:e!==null?a+".@data-"+e:k};ka(p,a)}}})}var v=p.oFeatures;d.bStateSave&&(v.bStateSave=!0,Kb(p,d),z(p,"aoDrawCallback",ya,"state_save"));if(d.aaSorting===k){n=p.aaSorting;g=0;for(j=n.length;g<j;g++)n[g][1]=p.aoColumns[g].asSorting[0]}xa(p);v.bSort&&z(p,"aoDrawCallback",function(){if(p.bSorted){var a=U(p),b={};h.each(a,function(a,c){b[c.src]=c.dir});w(p,null,"order",[p,a,b]);Jb(p)}});z(p,"aoDrawCallback",
function(){(p.bSorted||B(p)==="ssp"||v.bDeferRender)&&xa(p)},"sc");gb(p);g=q.children("caption").each(function(){this._captionSide=q.css("caption-side")});j=q.children("thead");0===j.length&&(j=h("<thead/>").appendTo(this));p.nTHead=j[0];j=q.children("tbody");0===j.length&&(j=h("<tbody/>").appendTo(this));p.nTBody=j[0];j=q.children("tfoot");if(0===j.length&&0<g.length&&(""!==p.oScroll.sX||""!==p.oScroll.sY))j=h("<tfoot/>").appendTo(this);0===j.length||0===j.children().length?q.addClass(i.sNoFooter):
0<j.length&&(p.nTFoot=j[0],da(p.aoFooter,p.nTFoot));if(d.aaData)for(g=0;g<d.aaData.length;g++)K(p,d.aaData[g]);else(p.bDeferLoading||"dom"==B(p))&&ma(p,h(p.nTBody).children("tr"));p.aiDisplay=p.aiDisplayMaster.slice();p.bInitialised=!0;!1===o&&ga(p)}});b=null;return this};var Tb=[],y=Array.prototype,cc=function(a){var b,c,e=m.settings,d=h.map(e,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=h.inArray(a,d),-1!==b?[e[b]]:
null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,d);return-1!==b?e[b]:null}).toArray()};t=function(a,b){if(!(this instanceof t))return new t(a,b);var c=[],e=function(a){(a=cc(a))&&c.push.apply(c,a)};if(h.isArray(a))for(var d=0,f=a.length;d<f;d++)e(a[d]);else e(a);this.context=Na(c);b&&this.push.apply(this,b.toArray?b.toArray():b);this.selector={rows:null,cols:null,opts:null};
t.extend(this,this,Tb)};m.Api=t;t.prototype={any:function(){return 0!==this.flatten().length},concat:y.concat,context:[],each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new t(b[a],this[a]):null},filter:function(a){var b=[];if(y.filter)b=y.filter.call(this,a,this);else for(var c=0,e=this.length;c<e;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new t(this.context,b)},flatten:function(){var a=[];
return new t(this.context,a.concat.apply(a,this.toArray()))},join:y.join,indexOf:y.indexOf||function(a,b){for(var c=b||0,e=this.length;c<e;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,e){var d=[],f,g,h,i,o,l=this.context,q,n,m=this.selector;"string"===typeof a&&(e=c,c=b,b=a,a=!1);g=0;for(h=l.length;g<h;g++){var p=new t(l[g]);if("table"===b)f=c.call(p,l[g],g),f!==k&&d.push(f);else if("columns"===b||"rows"===b)f=c.call(p,l[g],this[g],g),f!==k&&d.push(f);else if("column"===b||"column-rows"===
b||"row"===b||"cell"===b){n=this[g];"column-rows"===b&&(q=Ca(l[g],m.opts));i=0;for(o=n.length;i<o;i++)f=n[i],f="cell"===b?c.call(p,l[g],f.row,f.column,g,i):c.call(p,l[g],f,g,i,q),f!==k&&d.push(f)}}return d.length||e?(a=new t(l,a?d.concat.apply([],d):d),b=a.selector,b.rows=m.rows,b.cols=m.cols,b.opts=m.opts,a):this},lastIndexOf:y.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(y.map)b=y.map.call(this,a,this);else for(var c=
0,e=this.length;c<e;c++)b.push(a.call(this,this[c],c));return new t(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:y.pop,push:y.push,reduce:y.reduce||function(a,b){return hb(this,a,b,0,this.length,1)},reduceRight:y.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:y.reverse,selector:null,shift:y.shift,sort:y.sort,splice:y.splice,toArray:function(){return y.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},
unique:function(){return new t(this.context,Na(this))},unshift:y.unshift};t.extend=function(a,b,c){if(c.length&&b&&(b instanceof t||b.__dt_wrapper)){var e,d,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);t.extend(d,d,c.methodExt);return d}};e=0;for(d=c.length;e<d;e++)f=c[e],b[f.name]="function"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,t.extend(a,b[f.name],f.propExt)}};t.register=r=function(a,b){if(h.isArray(a))for(var c=0,e=a.length;c<
e;c++)t.register(a[c],b);else for(var d=a.split("."),f=Tb,g,j,c=0,e=d.length;c<e;c++){g=(j=-1!==d[c].indexOf("()"))?d[c].replace("()",""):d[c];var i;a:{i=0;for(var o=f.length;i<o;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===e-1?i.val=b:f=j?i.methodExt:i.propExt}};t.registerPlural=v=function(a,b,c){t.register(a,c);t.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof t?a.length?h.isArray(a[0])?new t(a.context,
a[0]):a[0]:k:a})};r("tables()",function(a){var b;if(a){b=t;var c=this.context;if("number"===typeof a)a=[c[a]];else var e=h.map(c,function(a){return a.nTable}),a=h(e).filter(a).map(function(){var a=h.inArray(this,e);return c[a]}).toArray();b=new b(a)}else b=this;return b});r("table()",function(a){var a=this.tables(a),b=a.context;return b.length?new t(b[0]):a});v("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});v("tables().body()","table().body()",
function(){return this.iterator("table",function(a){return a.nTBody},1)});v("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});v("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});v("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});r("draw()",function(a){return this.iterator("table",function(b){N(b,
!1===a)})});r("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Ta(b,a)})});r("page.info()",function(){if(0===this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a._iDisplayLength,e=a.fnRecordsDisplay(),d=-1===c;return{page:d?0:Math.floor(b/c),pages:d?1:Math.ceil(e/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:e}});r("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:
k:this.iterator("table",function(b){Ra(b,a)})});var Ub=function(a,b,c){if(c){var e=new t(a);e.one("draw",function(){c(e.ajax.json())})}"ssp"==B(a)?N(a,b):(C(a,!0),ra(a,[],function(c){oa(a);for(var c=sa(a,c),e=0,g=c.length;e<g;e++)K(a,c[e]);N(a,b);C(a,!1)}))};r("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});r("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});r("ajax.reload()",function(a,b){return this.iterator("table",function(c){Ub(c,
!1===b,a)})});r("ajax.url()",function(a){var b=this.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});r("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Ub(c,!1===b,a)})});var $a=function(a,b,c,e,d){var f=[],g,j,i,o,l,q;i=typeof b;if(!b||"string"===i||"function"===i||b.length===k)b=[b];i=0;for(o=b.length;i<o;i++){j=
b[i]&&b[i].split?b[i].split(","):[b[i]];l=0;for(q=j.length;l<q;l++)(g=c("string"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&f.push.apply(f,g)}a=u.selector[a];if(a.length){i=0;for(o=a.length;i<o;i++)f=a[i](e,d,f)}return f},ab=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:"none",order:"current",page:"all"},a)},bb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},
Ca=function(a,b){var c,e,d,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;e=b.order;d=b.page;if("ssp"==B(a))return"removed"===j?[]:V(0,c.length);if("current"==d){c=a._iDisplayStart;for(e=a.fnDisplayEnd();c<e;c++)f.push(g[c])}else if("current"==e||"applied"==e)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===h.inArray(a,g)?a:null});else if("index"==e||"original"==e){c=0;for(e=a.aoData.length;c<e;c++)"none"==j?f.push(c):(d=h.inArray(c,g),(-1===d&&"removed"==j||0<=d&&
"applied"==j)&&f.push(c))}return f};r("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var d=b;return $a("row",a,function(a){var b=Pb(a);if(b!==null&&!d)return[b];var j=Ca(c,d);if(b!==null&&h.inArray(b,j)!==-1)return[b];if(!a)return j;if(typeof a==="function")return h.map(j,function(b){var d=c.aoData[b];return a(b,d._aData,d.nTr)?b:null});b=Sb(ia(c.aoData,j,"nTr"));return a.nodeName&&h.inArray(a,b)!==-1?[a._DT_RowIndex]:h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},
c,d)},1);c.selector.rows=a;c.selector.opts=b;return c});r("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||k},1)});r("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ia(a.aoData,b,"_aData")},1)});v("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var e=b.aoData[c];return"search"===a?e._aFilterData:e._aSortData},1)});v("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",
function(b,c){ca(b,c,a)})});v("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});v("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var d=b.aoData;d.splice(c,1);for(var f=0,g=d.length;f<g;f++)null!==d[f].nTr&&(d[f].nTr._DT_RowIndex=f);h.inArray(c,b.aiDisplay);pa(b.aiDisplayMaster,c);pa(b.aiDisplay,c);pa(a[e],c,!1);Sa(b)})});r("rows.add()",function(a){var b=this.iterator("table",function(b){var c,
f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ma(b,c)[0]):h.push(K(b,c));return h},1),c=this.rows(-1);c.pop();c.push.apply(c,b.toArray());return c});r("row()",function(a,b){return bb(this.rows(a,b))});r("row().data()",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;b[0].aoData[this[0]]._aData=a;ca(b[0],this[0],"data");return this});r("row().node()",function(){var a=this.context;return a.length&&this.length?
a[0].aoData[this[0]].nTr||null:null});r("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?ma(b,a)[0]:K(b,a)});return this.row(b[0])});var cb=function(a,b){var c=a.context;c.length&&(c=c[0].aoData[b!==k?b:a[0]],c._details&&(c._details.remove(),c._detailsShow=k,c._details=k))},Vb=function(a,b){var c=a.context;if(c.length&&a.length){var e=c[0].aoData[a[0]];if(e._details){(e._detailsShow=b)?e._details.insertAfter(e.nTr):
e._details.detach();var d=c[0],f=new t(d),g=d.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<D(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){d===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(d===b)for(var c,e=aa(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",e)}),f.on("destroy.dt.DT_details",
function(a,b){if(d===b)for(var c=0,e=g.length;c<e;c++)g[c]._details&&cb(f,c)}))}}};r("row().child()",function(a,b){var c=this.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)cb(this);else if(c.length&&this.length){var e=c[0],c=c[0].aoData[this[0]],d=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?d.push(a):(c=h("<tr><td/></tr>").addClass(b),
h("td",c).addClass(b).html(a)[0].colSpan=aa(e),d.push(c[0]))};f(a,b);c._details&&c._details.remove();c._details=h(d);c._detailsShow&&c._details.insertAfter(c.nTr)}return this});r(["row().child.show()","row().child().show()"],function(){Vb(this,!0);return this});r(["row().child.hide()","row().child().hide()"],function(){Vb(this,!1);return this});r(["row().child.remove()","row().child().remove()"],function(){cb(this);return this});r("row().child.isShown()",function(){var a=this.context;return a.length&&
this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var dc=/^(.+):(name|visIdx|visible)$/,Wb=function(a,b,c,e,d){for(var c=[],e=0,f=d.length;e<f;e++)c.push(x(a,d[e],b));return c};r("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var d=a,f=b,g=c.aoColumns,j=D(g,"sName"),i=D(g,"nTh");return $a("column",d,function(a){var b=Pb(a);if(a==="")return V(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a==="function"){var d=Ca(c,
f);return h.map(g,function(b,f){return a(f,Wb(c,f,0,0,d),i[f])?f:null})}var k=typeof a==="string"?a.match(dc):"";if(k)switch(k[2]){case "visIdx":case "visible":b=parseInt(k[1],10);if(b<0){var m=h.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+b]]}return[la(c,b)];case "name":return h.map(j,function(a,b){return a===k[1]?b:null})}else return h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray()},c,f)},1);c.selector.cols=a;c.selector.opts=b;return c});v("columns().header()",
"column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});v("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});v("columns().data()","column().data()",function(){return this.iterator("column-rows",Wb,1)});v("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});v("columns().cache()","column().cache()",
function(a){return this.iterator("column-rows",function(b,c,e,d,f){return ia(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});v("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,e,d){return ia(a.aoData,d,"anCells",b)},1)});v("columns().visible()","column().visible()",function(a,b){return this.iterator("column",function(c,e){if(a===k)return c.aoColumns[e].bVisible;var d=c.aoColumns,f=d[e],g=c.aoData,j,i,m;if(a!==k&&f.bVisible!==a){if(a){var l=
h.inArray(!0,D(d,"bVisible"),e+1);j=0;for(i=g.length;j<i;j++)m=g[j].nTr,d=g[j].anCells,m&&m.insertBefore(d[e],d[l]||null)}else h(D(c.aoData,"anCells",e)).detach();f.bVisible=a;ea(c,c.aoHeader);ea(c,c.aoFooter);if(b===k||b)X(c),(c.oScroll.sX||c.oScroll.sY)&&Y(c);w(c,null,"column-visibility",[c,e,a]);ya(c)}})});v("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?$(b,c):c},1)});r("columns.adjust()",function(){return this.iterator("table",
function(a){X(a)},1)});r("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return la(c,b);if("fromData"===a||"toVisible"===a)return $(c,b)}});r("column()",function(a,b){return bb(this.columns(a,b))});r("cells()",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));h.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator("table",function(b){var d=a,e=ab(c),f=b.aoData,g=Ca(b,e),i=Sb(ia(f,g,"anCells")),
j=h([].concat.apply([],i)),l,m=b.aoColumns.length,o,r,t,s,u,v;return $a("cell",d,function(a){var c=typeof a==="function";if(a===null||a===k||c){o=[];r=0;for(t=g.length;r<t;r++){l=g[r];for(s=0;s<m;s++){u={row:l,column:s};if(c){v=b.aoData[l];a(u,x(b,l,s),v.anCells?v.anCells[s]:null)&&o.push(u)}else o.push(u)}}return o}return h.isPlainObject(a)?[a]:j.filter(a).map(function(a,b){l=b.parentNode._DT_RowIndex;return{row:l,column:h.inArray(b,f[l].anCells)}}).toArray()},b,e)});var e=this.columns(b,c),d=this.rows(a,
c),f,g,j,i,m,l=this.iterator("table",function(a,b){f=[];g=0;for(j=d[b].length;g<j;g++){i=0;for(m=e[b].length;i<m;i++)f.push({row:d[b][g],column:e[b][i]})}return f},1);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});v("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b].anCells)?a[c]:k},1)});r("cells().data()",function(){return this.iterator("cell",function(a,b,c){return x(a,b,c)},1)});v("cells().cache()","cell().cache()",function(a){a=
"search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,e){return b.aoData[c][a][e]},1)});v("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,e){return x(b,c,e,a)},1)});v("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:$(a,c)}},1)});v("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,e){ca(b,c,a,e)})});r("cell()",
function(a,b,c){return bb(this.cells(a,b,c))});r("cell().data()",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?x(b[0],c[0].row,c[0].column):k;Ia(b[0],c[0].row,c[0].column,a);ca(b[0],c[0].row,"data",c[0].column);return this});r("order()",function(a,b){var c=this.context;if(a===k)return 0!==c.length?c[0].aaSorting:k;"number"===typeof a?a=[[a,b]]:h.isArray(a[0])||(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});
r("order.listener()",function(a,b,c){return this.iterator("table",function(e){Oa(e,a,b,c)})});r(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,e){var d=[];h.each(b[e],function(b,c){d.push([c,a])});c.aaSorting=d})});r("search()",function(a,b,c,e){var d=this.context;return a===k?0!==d.length?d[0].oPreviousSearch.sSearch:k:this.iterator("table",function(d){d.oFeatures.bFilter&&fa(d,h.extend({},d.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:
b,bSmart:null===c?!0:c,bCaseInsensitive:null===e?!0:e}),1)})});v("columns().search()","column().search()",function(a,b,c,e){return this.iterator("column",function(d,f){var g=d.aoPreSearchCols;if(a===k)return g[f].sSearch;d.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===e?!0:e}),fa(d,d.oPreviousSearch,1))})});r("state()",function(){return this.context.length?this.context[0].oSavedState:null});r("state.clear()",function(){return this.iterator("table",
function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});r("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});r("state.save()",function(){return this.iterator("table",function(a){ya(a)})});m.versionCheck=m.fnVersionCheck=function(a){for(var b=m.version.split("."),a=a.split("."),c,e,d=0,f=a.length;d<f;d++)if(c=parseInt(b[d],10)||0,e=parseInt(a[d],10)||0,c!==e)return c>e;return!0};m.isDataTable=m.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;h.each(m.settings,
function(a,d){var f=d.nScrollHead?h("table",d.nScrollHead)[0]:null,g=d.nScrollFoot?h("table",d.nScrollFoot)[0]:null;if(d.nTable===b||f===b||g===b)c=!0});return c};m.tables=m.fnTables=function(a){return h.map(m.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable})};m.util={throttle:ua,escapeRegex:va};m.camelToHungarian=H;r("$()",function(a,b){var c=this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each(["on","one","off"],function(a,
b){r(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var e=h(this.tables().nodes());e[b].apply(e,a);return this})});r("clear()",function(){return this.iterator("table",function(a){oa(a)})});r("settings()",function(){return new t(this.context,this.context)});r("init()",function(){var a=this.context;return a.length?a[0].oInit:null});r("data()",function(){return this.iterator("table",function(a){return D(a.aoData,"_aData")}).flatten()});r("destroy()",
function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,e=b.oClasses,d=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(d),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),q;b.bDestroying=!0;w(b,"aoDestroyCallback","destroy",[b]);a||(new t(b)).columns().visible(!0);k.unbind(".DT").find(":not(tbody *)").unbind(".DT");h(Ea).unbind(".DT-"+b.sInstance);d!=g.parentNode&&(i.children("thead").detach(),i.append(g));j&&d!=j.parentNode&&(i.children("tfoot").detach(),
i.append(j));i.detach();k.detach();b.aaSorting=[];b.aaSortingFixed=[];xa(b);h(l).removeClass(b.asStripeClasses.join(" "));h("th, td",g).removeClass(e.sSortable+" "+e.sSortableAsc+" "+e.sSortableDesc+" "+e.sSortableNone);b.bJUI&&(h("th span."+e.sSortIcon+", td span."+e.sSortIcon,g).detach(),h("th, td",g).each(function(){var a=h("div."+e.sSortJUIWrapper,this);h(this).append(a.contents());a.detach()}));!a&&c&&c.insertBefore(d,b.nTableReinsertBefore);f.children().detach();f.append(l);i.css("width",b.sDestroyWidth).removeClass(e.sTable);
(q=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%q])});c=h.inArray(b,m.settings);-1!==c&&m.settings.splice(c,1)})});h.each(["column","row","cell"],function(a,b){r(b+"s().every()",function(a){return this.iterator(b,function(e,d,f){a.call((new t(e))[b](d,f))})})});r("i18n()",function(a,b,c){var e=this.context[0],a=R(a)(e.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:a._);return a.replace("%d",c)});m.version="1.10.7";m.settings=
[];m.models={};m.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};m.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null};m.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",
sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};m.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,
fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,
fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},m.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,
sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null};W(m.defaults);m.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};W(m.defaults.column);m.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,
bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],
sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,
bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==B(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==B(this)?1*this._iRecordsDisplay:
this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,e=this.aiDisplay.length,d=this.oFeatures,f=d.bPaginate;return d.bServerSide?!1===f||-1===a?b+e:Math.min(b+a,this._iRecordsDisplay):!f||c>e||-1===a?e:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}};m.ext=u={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},
header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:m.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:m.version};h.extend(u,{afnFiltering:u.search,aTypes:u.type.detect,ofnSearch:u.type.search,oSort:u.type.order,afnSortData:u.order,aoFeatures:u.feature,oApi:u.internal,oStdClasses:u.classes,oPagination:u.pager});h.extend(m.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",
sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",
sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Da="",Da="",F=Da+"ui-state-default",ja=Da+"css_right ui-icon ui-icon-",Xb=Da+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";h.extend(m.ext.oJUIClasses,
m.ext.classes,{sPageButton:"fg-button ui-button "+F,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:F+" sorting_asc",sSortDesc:F+" sorting_desc",sSortable:F+" sorting",sSortableAsc:F+" sorting_asc_disabled",sSortableDesc:F+" sorting_desc_disabled",sSortableNone:F+" sorting_disabled",sSortJUIAsc:ja+"triangle-1-n",sSortJUIDesc:ja+"triangle-1-s",sSortJUI:ja+"carat-2-n-s",
sSortJUIAscAllowed:ja+"carat-1-n",sSortJUIDescAllowed:ja+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+F,sScrollFoot:"dataTables_scrollFoot "+F,sHeaderTH:F,sFooterTH:F,sJUIHeader:Xb+" ui-corner-tl ui-corner-tr",sJUIFooter:Xb+" ui-corner-bl ui-corner-br"});var Mb=m.ext.pager;h.extend(Mb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",
Wa(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Wa(a,b),"next","last"]},_numbers:Wa,numbers_length:7});h.extend(!0,m.ext.renderer,{pageButton:{_:function(a,b,c,e,d,f){var g=a.oClasses,j=a.oLanguage.oPaginate,i,k,l=0,m=function(b,e){var n,r,t,s,u=function(b){Ta(a,b.data.action,true)};n=0;for(r=e.length;n<r;n++){s=e[n];if(h.isArray(s)){t=h("<"+(s.DT_el||"div")+"/>").appendTo(b);m(t,s)}else{k=i="";switch(s){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;
case "first":i=j.sFirst;k=s+(d>0?"":" "+g.sPageButtonDisabled);break;case "previous":i=j.sPrevious;k=s+(d>0?"":" "+g.sPageButtonDisabled);break;case "next":i=j.sNext;k=s+(d<f-1?"":" "+g.sPageButtonDisabled);break;case "last":i=j.sLast;k=s+(d<f-1?"":" "+g.sPageButtonDisabled);break;default:i=s+1;k=d===s?g.sPageButtonActive:""}if(i){t=h("<a>",{"class":g.sPageButton+" "+k,"aria-controls":a.sTableId,"data-dt-idx":l,tabindex:a.iTabIndex,id:c===0&&typeof s==="string"?a.sTableId+"_"+s:null}).html(i).appendTo(b);
Va(t,{action:s},u);l++}}}},n;try{n=h(Q.activeElement).data("dt-idx")}catch(r){}m(h(b).empty(),e);n&&h(b).find("[data-dt-idx="+n+"]").focus()}}});h.extend(m.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&(!ac.test(a)||!bc.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||J(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;
return Rb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Rb(a,c,!0)?"html-num-fmt"+c:null},function(a){return J(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);h.extend(m.ext.type.search,{html:function(a){return J(a)?a:"string"===typeof a?a.replace(Ob," ").replace(Ba,""):""},string:function(a){return J(a)?a:"string"===typeof a?a.replace(Ob," "):a}});var Aa=function(a,b,c,e){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Qb(a,b));a.replace&&(c&&(a=a.replace(c,"")),
e&&(a=a.replace(e,"")));return 1*a};h.extend(u.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return J(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return J(a)?"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});db("");h.extend(!0,m.ext.renderer,{header:{_:function(a,b,c,e){h(a.nTable).on("order.dt.DT",function(d,
f,g,h){if(a===f){d=c.idx;b.removeClass(c.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass(h[d]=="asc"?e.sSortAsc:h[d]=="desc"?e.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,b,c,e){h("<div/>").addClass(e.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(e.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on("order.dt.DT",function(d,f,g,h){if(a===f){d=c.idx;b.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass(h[d]=="asc"?e.sSortAsc:h[d]=="desc"?e.sSortDesc:c.sSortingClass);
b.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass(h[d]=="asc"?e.sSortJUIAsc:h[d]=="desc"?e.sSortJUIDesc:c.sSortingClassJUI)}})}}});m.render={number:function(a,b,c,e){return{display:function(d){if("number"!==typeof d&&"string"!==typeof d)return d;var f=0>d?"-":"",d=Math.abs(parseFloat(d)),g=parseInt(d,10),d=c?b+(d-g).toFixed(c).substring(2):"";return f+(e||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,
a)+d}}}};h.extend(m.ext.internal,{_fnExternApiFunc:Nb,_fnBuildAjax:ra,_fnAjaxUpdate:kb,_fnAjaxParameters:tb,_fnAjaxUpdateDraw:ub,_fnAjaxDataSrc:sa,_fnAddColumn:Fa,_fnColumnOptions:ka,_fnAdjustColumnSizing:X,_fnVisibleToColumnIndex:la,_fnColumnIndexToVisible:$,_fnVisbleColumns:aa,_fnGetColumns:Z,_fnColumnTypes:Ha,_fnApplyColumnDefs:ib,_fnHungarianMap:W,_fnCamelToHungarian:H,_fnLanguageCompat:P,_fnBrowserDetect:gb,_fnAddData:K,_fnAddTr:ma,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==k?b._DT_RowIndex:
null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:x,_fnSetCellData:Ia,_fnSplitObjNotation:Ka,_fnGetObjectDataFn:R,_fnSetObjectDataFn:S,_fnGetDataMaster:La,_fnClearTable:oa,_fnDeleteIndex:pa,_fnInvalidate:ca,_fnGetRowElements:na,_fnCreateTr:Ja,_fnBuildHead:jb,_fnDrawHead:ea,_fnDraw:M,_fnReDraw:N,_fnAddOptionsHtml:mb,_fnDetectHeader:da,_fnGetUniqueThs:qa,_fnFeatureHtmlFilter:ob,_fnFilterComplete:fa,_fnFilterCustom:xb,_fnFilterColumn:wb,_fnFilter:vb,_fnFilterCreateSearch:Qa,
_fnEscapeRegex:va,_fnFilterData:yb,_fnFeatureHtmlInfo:rb,_fnUpdateInfo:Bb,_fnInfoMacros:Cb,_fnInitialise:ga,_fnInitComplete:ta,_fnLengthChange:Ra,_fnFeatureHtmlLength:nb,_fnFeatureHtmlPaginate:sb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:pb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:qb,_fnScrollDraw:Y,_fnApplyToChildren:G,_fnCalculateColumnWidths:Ga,_fnThrottle:ua,_fnConvertToWidth:Db,_fnScrollingWidthAdjust:Fb,_fnGetWidestNode:Eb,_fnGetMaxLenString:Gb,_fnStringToCss:s,_fnScrollBarWidth:Hb,_fnSortFlatten:U,
_fnSort:lb,_fnSortAria:Jb,_fnSortListener:Ua,_fnSortAttachListener:Oa,_fnSortingClasses:xa,_fnSortData:Ib,_fnSaveState:ya,_fnLoadState:Kb,_fnSettingsFromNode:za,_fnLog:I,_fnMap:E,_fnBindAction:Va,_fnCallbackReg:z,_fnCallbackFire:w,_fnLengthOverflow:Sa,_fnRenderer:Pa,_fnDataSource:B,_fnRowAttributes:Ma,_fnCalculateEnd:function(){}});h.fn.dataTable=m;h.fn.dataTableSettings=m.settings;h.fn.dataTableExt=m.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};h.each(m,function(a,b){h.fn.DataTable[a]=
b});return h.fn.dataTable};"function"===typeof define&&define.amd?define("datatables",["jquery"],P):"object"===typeof exports?module.exports=P(require("jquery")):jQuery&&!jQuery.fn.dataTable&&P(jQuery)})(window,document);
/*!
 DataTables Bootstrap 3 integration
 Â©2011-2014 SpryMedia Ltd - datatables.net/license
*/
(function(l,q){var e=function(b,c){b.extend(!0,c.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'trqqq>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});b.extend(c.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});c.ext.renderer.pageButton.bootstrap=function(g,e,r,s,i,m){var t=new c.Api(g),u=g.oClasses,j=g.oLanguage.oPaginate,d,f,n=0,p=function(c,e){var k,h,o,a,l=function(a){a.preventDefault();
b(a.currentTarget).hasClass("disabled")||t.page(a.data.action).draw(!1)};k=0;for(h=e.length;k<h;k++)if(a=e[k],b.isArray(a))p(c,a);else{f=d="";switch(a){case "ellipsis":d="&hellip;";f="disabled";break;case "first":d=j.sFirst;f=a+(0<i?"":" disabled");break;case "previous":d=j.sPrevious;f=a+(0<i?"":" disabled");break;case "next":d=j.sNext;f=a+(i<m-1?"":" disabled");break;case "last":d=j.sLast;f=a+(i<m-1?"":" disabled");break;default:d=a+1,f=i===a?"active":""}d&&(o=b("<li>",{"class":u.sPageButton+" "+
f,id:0===r&&"string"===typeof a?g.sTableId+"_"+a:null}).append(b("<a>",{href:"#","aria-controls":g.sTableId,"data-dt-idx":n,tabindex:g.iTabIndex}).html(d)).appendTo(c),g.oApi._fnBindAction(o,{action:a},l),n++)}},h;try{h=b(q.activeElement).data("dt-idx")}catch(l){}p(b(e).empty().html('<ul class="pagination"/>').children("ul"),s);h&&b(e).find("[data-dt-idx="+h+"]").focus()};c.TableTools&&(b.extend(!0,c.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},
collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),b.extend(!0,c.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"===typeof define&&define.amd?define(["jquery","datatables"],e):"object"===typeof exports?e(require("jquery"),require("datatables")):jQuery&&e(jQuery,jQuery.fn.dataTable)})(window,document);
/*! Responsive 1.0.7
 * 2014-2015 SpryMedia Ltd - datatables.net/license
 */
(function(window,document,undefined){var factory=function($,DataTable){"use strict";var Responsive=function(settings,opts){if(!DataTable.versionCheck||!DataTable.versionCheck('1.10.1')){throw'DataTables Responsive requires DataTables 1.10.1 or newer';}
this.s={dt:new DataTable.Api(settings),columns:[]};if(this.s.dt.settings()[0].responsive){return;}
if(opts&&typeof opts.details==='string'){opts.details={type:opts.details};}
this.c=$.extend(true,{},Responsive.defaults,DataTable.defaults.responsive,opts);settings.responsive=this;this._constructor();};Responsive.prototype={_constructor:function()
{var that=this;var dt=this.s.dt;dt.settings()[0]._responsive=this;$(window).on('resize.dtr orientationchange.dtr',dt.settings()[0].oApi._fnThrottle(function(){that._resize();}));dt.on('destroy.dtr',function(){$(window).off('resize.dtr orientationchange.dtr draw.dtr');});this.c.breakpoints.sort(function(a,b){return a.width<b.width?1:a.width>b.width?-1:0;});this._classLogic();this._resizeAuto();var details=this.c.details;if(details.type){that._detailsInit();this._detailsVis();dt.on('column-visibility.dtr',function(){that._detailsVis();});dt.on('draw.dtr',function(){dt.rows({page:'current'}).iterator('row',function(settings,idx){var row=dt.row(idx);if(row.child.isShown()){var info=that.c.details.renderer(dt,idx);row.child(info,'child').show();}});});$(dt.table().node()).addClass('dtr-'+details.type);}
this._resize();},_columnsVisiblity:function(breakpoint)
{var dt=this.s.dt;var columns=this.s.columns;var i,ien;var display=$.map(columns,function(col){return col.auto&&col.minWidth===null?false:col.auto===true?'-':$.inArray(breakpoint,col.includeIn)!==-1;});var requiredWidth=0;for(i=0,ien=display.length;i<ien;i++){if(display[i]===true){requiredWidth+=columns[i].minWidth;}}
var scrolling=dt.settings()[0].oScroll;var bar=scrolling.sY||scrolling.sX?scrolling.iBarWidth:0;var widthAvailable=dt.table().container().offsetWidth-bar;var usedWidth=widthAvailable-requiredWidth;for(i=0,ien=display.length;i<ien;i++){if(columns[i].control){usedWidth-=columns[i].minWidth;}}
var empty=false;for(i=0,ien=display.length;i<ien;i++){if(display[i]==='-'&&!columns[i].control){if(empty||usedWidth-columns[i].minWidth<0){empty=true;display[i]=false;}
else{display[i]=true;}
usedWidth-=columns[i].minWidth;}}
var showControl=false;for(i=0,ien=columns.length;i<ien;i++){if(!columns[i].control&&!columns[i].never&&!display[i]){showControl=true;break;}}
for(i=0,ien=columns.length;i<ien;i++){if(columns[i].control){display[i]=showControl;}}
if($.inArray(true,display)===-1){display[0]=true;}
return display;},_classLogic:function()
{var that=this;var calc={};var breakpoints=this.c.breakpoints;var columns=this.s.dt.columns().eq(0).map(function(i){var className=this.column(i).header().className;return{className:className,includeIn:[],auto:false,control:false,never:className.match(/\bnever\b/)?true:false};});var add=function(colIdx,name){var includeIn=columns[colIdx].includeIn;if($.inArray(name,includeIn)===-1){includeIn.push(name);}};var column=function(colIdx,name,operator,matched){var size,i,ien;if(!operator){columns[colIdx].includeIn.push(name);}
else if(operator==='max-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width<=size){add(colIdx,breakpoints[i].name);}}}
else if(operator==='min-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width>=size){add(colIdx,breakpoints[i].name);}}}
else if(operator==='not-'){for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name.indexOf(matched)===-1){add(colIdx,breakpoints[i].name);}}}};columns.each(function(col,i){var classNames=col.className.split(' ');var hasClass=false;for(var k=0,ken=classNames.length;k<ken;k++){var className=$.trim(classNames[k]);if(className==='all'){hasClass=true;col.includeIn=$.map(breakpoints,function(a){return a.name;});return;}
else if(className==='none'||className==='never'){hasClass=true;return;}
else if(className==='control'){hasClass=true;col.control=true;return;}
$.each(breakpoints,function(j,breakpoint){var brokenPoint=breakpoint.name.split('-');var re=new RegExp('(min\\-|max\\-|not\\-)?('+brokenPoint[0]+')(\\-[_a-zA-Z0-9])?');var match=className.match(re);if(match){hasClass=true;if(match[2]===brokenPoint[0]&&match[3]==='-'+brokenPoint[1]){column(i,breakpoint.name,match[1],match[2]+match[3]);}
else if(match[2]===brokenPoint[0]&&!match[3]){column(i,breakpoint.name,match[1],match[2]);}}});}
if(!hasClass){col.auto=true;}});this.s.columns=columns;},_detailsInit:function()
{var that=this;var dt=this.s.dt;var details=this.c.details;if(details.type==='inline'){details.target='td:first-child';}
var target=details.target;var selector=typeof target==='string'?target:'td';$(dt.table().body()).on('click',selector,function(e){if(!$(dt.table().node()).hasClass('collapsed')){return;}
if(!dt.row($(this).closest('tr')).length){return;}
if(typeof target==='number'){var targetIdx=target<0?dt.columns().eq(0).length+target:target;if(dt.cell(this).index().column!==targetIdx){return;}}
var row=dt.row($(this).closest('tr'));if(row.child.isShown()){row.child(false);$(row.node()).removeClass('parent');}
else{var info=that.c.details.renderer(dt,row[0]);row.child(info,'child').show();$(row.node()).addClass('parent');}});},_detailsVis:function()
{var that=this;var dt=this.s.dt;var hiddenColumns=dt.columns().indexes().filter(function(idx){var col=dt.column(idx);if(col.visible()){return null;}
return $(col.header()).hasClass('never')?null:idx;});var haveHidden=true;if(hiddenColumns.length===0||(hiddenColumns.length===1&&this.s.columns[hiddenColumns[0]].control)){haveHidden=false;}
if(haveHidden){dt.rows({page:'current'}).eq(0).each(function(idx){var row=dt.row(idx);if(row.child()){var info=that.c.details.renderer(dt,row[0]);if(info===false){row.child.hide();}
else{row.child(info,'child').show();}}});}
else{dt.rows({page:'current'}).eq(0).each(function(idx){dt.row(idx).child.hide();});}},_find:function(name)
{var breakpoints=this.c.breakpoints;for(var i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name===name){return breakpoints[i];}}},_resize:function()
{var dt=this.s.dt;var width=$(window).width();var breakpoints=this.c.breakpoints;var breakpoint=breakpoints[0].name;var columns=this.s.columns;var i,ien;for(i=breakpoints.length-1;i>=0;i--){if(width<=breakpoints[i].width){breakpoint=breakpoints[i].name;break;}}
var columnsVis=this._columnsVisiblity(breakpoint);var collapsedClass=false;for(i=0,ien=columns.length;i<ien;i++){if(columnsVis[i]===false&&!columns[i].never){collapsedClass=true;break;}}
$(dt.table().node()).toggleClass('collapsed',collapsedClass);dt.columns().eq(0).each(function(colIdx,i){dt.column(colIdx).visible(columnsVis[i]);});},_resizeAuto:function()
{var dt=this.s.dt;var columns=this.s.columns;if(!this.c.auto){return;}
if($.inArray(true,$.map(columns,function(c){return c.auto;}))===-1){return;}
var tableWidth=dt.table().node().offsetWidth;var columnWidths=dt.columns;var clonedTable=dt.table().node().cloneNode(false);var clonedHeader=$(dt.table().header().cloneNode(false)).appendTo(clonedTable);var clonedBody=$(dt.table().body().cloneNode(false)).appendTo(clonedTable);$(dt.table().footer()).clone(false).appendTo(clonedTable);dt.rows({page:'current'}).indexes().flatten().each(function(idx){var clone=dt.row(idx).node().cloneNode(true);if(dt.columns(':hidden').flatten().length){$(clone).append(dt.cells(idx,':hidden').nodes().to$().clone());}
$(clone).appendTo(clonedBody);});var cells=dt.columns().header().to$().clone(false);$('<tr/>').append(cells).appendTo(clonedHeader);if(this.c.details.type==='inline'){$(clonedTable).addClass('dtr-inline collapsed');}
var inserted=$('<div/>').css({width:1,height:1,overflow:'hidden'}).append(clonedTable);inserted.find('th.never, td.never').remove();inserted.insertBefore(dt.table().node());dt.columns().eq(0).each(function(idx){columns[idx].minWidth=cells[idx].offsetWidth||0;});inserted.remove();}};Responsive.breakpoints=[{name:'desktop',width:Infinity},{name:'tablet-l',width:1024},{name:'tablet-p',width:768},{name:'mobile-l',width:480},{name:'mobile-p',width:320}];Responsive.defaults={breakpoints:Responsive.breakpoints,auto:true,details:{renderer:function(api,rowIdx){var data=api.cells(rowIdx,':hidden').eq(0).map(function(cell){var header=$(api.column(cell.column).header());var idx=api.cell(cell).index();if(header.hasClass('control')||header.hasClass('never')){return'';}
var dtPrivate=api.settings()[0];var cellData=dtPrivate.oApi._fnGetCellData(dtPrivate,idx.row,idx.column,'display');var title=header.text();if(title){title=title+':';}
return'<li data-dtr-index="'+idx.column+'">'+'<span class="dtr-title">'+
title+'</span> '+'<span class="dtr-data">'+
cellData+'</span>'+'</li>';}).toArray().join('');return data?$('<ul data-dtr-index="'+rowIdx+'"/>').append(data):false;},target:0,type:'inline'}};var Api=$.fn.dataTable.Api;Api.register('responsive()',function(){return this;});Api.register('responsive.index()',function(li){li=$(li);return{column:li.data('dtr-index'),row:li.parent().data('dtr-index')};});Api.register('responsive.rebuild()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._classLogic();}});});Api.register('responsive.recalc()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._resizeAuto();ctx._responsive._resize();}});});Responsive.version='1.0.7';$.fn.dataTable.Responsive=Responsive;$.fn.DataTable.Responsive=Responsive;$(document).on('init.dt.dtr',function(e,settings,json){if(e.namespace!=='dt'){return;}
if($(settings.nTable).hasClass('responsive')||$(settings.nTable).hasClass('dt-responsive')||settings.oInit.responsive||DataTable.defaults.responsive){var init=settings.oInit.responsive;if(init!==false){new Responsive(settings,$.isPlainObject(init)?init:{});}}});return Responsive;};if(typeof define==='function'&&define.amd){define(['jquery','datatables'],factory);}
else if(typeof exports==='object'){factory(require('jquery'),require('datatables'));}
else if(jQuery&&!jQuery.fn.dataTable.Responsive){factory(jQuery,jQuery.fn.dataTable);}})(window,document);(function(){var AjaxMonitor,Bar,DocumentMonitor,ElementMonitor,ElementTracker,EventLagMonitor,Evented,Events,NoTargetError,Pace,RequestIntercept,SOURCE_KEYS,Scaler,SocketRequestTracker,XHRRequestTracker,animation,avgAmplitude,bar,cancelAnimation,cancelAnimationFrame,defaultOptions,extend,extendNative,getFromDOM,getIntercept,handlePushState,ignoreStack,init,now,options,requestAnimationFrame,result,runAnimation,scalers,shouldIgnoreURL,shouldTrack,source,sources,uniScaler,_WebSocket,_XDomainRequest,_XMLHttpRequest,_i,_intercept,_len,_pushState,_ref,_ref1,_replaceState,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};defaultOptions={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:true,restartOnPushState:true,restartOnRequestAfter:500,target:'body',elements:{checkInterval:100,selectors:['body']},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:['GET'],trackWebSockets:true,ignoreURLs:[]}};now=function(){var _ref;return(_ref=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?_ref:+(new Date);};requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;if(requestAnimationFrame==null){requestAnimationFrame=function(fn){return setTimeout(fn,50);};cancelAnimationFrame=function(id){return clearTimeout(id);};}
runAnimation=function(fn){var last,tick;last=now();tick=function(){var diff;diff=now()-last;if(diff>=33){last=now();return fn(diff,function(){return requestAnimationFrame(tick);});}else{return setTimeout(tick,33-diff);}};return tick();};result=function(){var args,key,obj;obj=arguments[0],key=arguments[1],args=3<=arguments.length?__slice.call(arguments,2):[];if(typeof obj[key]==='function'){return obj[key].apply(obj,args);}else{return obj[key];}};extend=function(){var key,out,source,sources,val,_i,_len;out=arguments[0],sources=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=sources.length;_i<_len;_i++){source=sources[_i];if(source){for(key in source){if(!__hasProp.call(source,key))continue;val=source[key];if((out[key]!=null)&&typeof out[key]==='object'&&(val!=null)&&typeof val==='object'){extend(out[key],val);}else{out[key]=val;}}}}
return out;};avgAmplitude=function(arr){var count,sum,v,_i,_len;sum=count=0;for(_i=0,_len=arr.length;_i<_len;_i++){v=arr[_i];sum+=Math.abs(v);count++;}
return sum/count;};getFromDOM=function(key,json){var data,e,el;if(key==null){key='options';}
if(json==null){json=true;}
el=document.querySelector("[data-pace-"+key+"]");if(!el){return;}
data=el.getAttribute("data-pace-"+key);if(!json){return data;}
try{return JSON.parse(data);}catch(_error){e=_error;return typeof console!=="undefined"&&console!==null?console.error("Error parsing inline pace options",e):void 0;}};Evented=(function(){function Evented(){}
Evented.prototype.on=function(event,handler,ctx,once){var _base;if(once==null){once=false;}
if(this.bindings==null){this.bindings={};}
if((_base=this.bindings)[event]==null){_base[event]=[];}
return this.bindings[event].push({handler:handler,ctx:ctx,once:once});};Evented.prototype.once=function(event,handler,ctx){return this.on(event,handler,ctx,true);};Evented.prototype.off=function(event,handler){var i,_ref,_results;if(((_ref=this.bindings)!=null?_ref[event]:void 0)==null){return;}
if(handler==null){return delete this.bindings[event];}else{i=0;_results=[];while(i<this.bindings[event].length){if(this.bindings[event][i].handler===handler){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}
return _results;}};Evented.prototype.trigger=function(){var args,ctx,event,handler,i,once,_ref,_ref1,_results;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((_ref=this.bindings)!=null?_ref[event]:void 0){i=0;_results=[];while(i<this.bindings[event].length){_ref1=this.bindings[event][i],handler=_ref1.handler,ctx=_ref1.ctx,once=_ref1.once;handler.apply(ctx!=null?ctx:this,args);if(once){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}
return _results;}};return Evented;})();Pace=window.Pace||{};window.Pace=Pace;extend(Pace,Evented.prototype);options=Pace.options=extend({},defaultOptions,window.paceOptions,getFromDOM());_ref=['ajax','document','eventLag','elements'];for(_i=0,_len=_ref.length;_i<_len;_i++){source=_ref[_i];if(options[source]===true){options[source]=defaultOptions[source];}}
NoTargetError=(function(_super){__extends(NoTargetError,_super);function NoTargetError(){_ref1=NoTargetError.__super__.constructor.apply(this,arguments);return _ref1;}
return NoTargetError;})(Error);Bar=(function(){function Bar(){this.progress=0;}
Bar.prototype.getElement=function(){var targetElement;if(this.el==null){targetElement=document.querySelector(options.target);if(!targetElement){throw new NoTargetError;}
this.el=document.createElement('div');this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,'');document.body.className+=' pace-running';this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>';if(targetElement.firstChild!=null){targetElement.insertBefore(this.el,targetElement.firstChild);}else{targetElement.appendChild(this.el);}}
return this.el;};Bar.prototype.finish=function(){var el;el=this.getElement();el.className=el.className.replace('pace-active','');el.className+=' pace-inactive';document.body.className=document.body.className.replace('pace-running','');return document.body.className+=' pace-done';};Bar.prototype.update=function(prog){this.progress=prog;return this.render();};Bar.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement());}catch(_error){NoTargetError=_error;}
return this.el=void 0;};Bar.prototype.render=function(){var el,key,progressStr,transform,_j,_len1,_ref2;if(document.querySelector(options.target)==null){return false;}
el=this.getElement();transform="translate3d("+this.progress+"%, 0, 0)";_ref2=['webkitTransform','msTransform','transform'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){key=_ref2[_j];el.children[0].style[key]=transform;}
if(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0){el.children[0].setAttribute('data-progress-text',""+(this.progress|0)+"%");if(this.progress>=100){progressStr='99';}else{progressStr=this.progress<10?"0":"";progressStr+=this.progress|0;}
el.children[0].setAttribute('data-progress',""+progressStr);}
return this.lastRenderedProgress=this.progress;};Bar.prototype.done=function(){return this.progress>=100;};return Bar;})();Events=(function(){function Events(){this.bindings={};}
Events.prototype.trigger=function(name,val){var binding,_j,_len1,_ref2,_results;if(this.bindings[name]!=null){_ref2=this.bindings[name];_results=[];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){binding=_ref2[_j];_results.push(binding.call(this,val));}
return _results;}};Events.prototype.on=function(name,fn){var _base;if((_base=this.bindings)[name]==null){_base[name]=[];}
return this.bindings[name].push(fn);};return Events;})();_XMLHttpRequest=window.XMLHttpRequest;_XDomainRequest=window.XDomainRequest;_WebSocket=window.WebSocket;extendNative=function(to,from){var e,key,_results;_results=[];for(key in from.prototype){try{if((to[key]==null)&&typeof from[key]!=='function'){if(typeof Object.defineProperty==='function'){_results.push(Object.defineProperty(to,key,{get:function(){return from.prototype[key];},configurable:true,enumerable:true}));}else{_results.push(to[key]=from.prototype[key]);}}else{_results.push(void 0);}}catch(_error){e=_error;}}
return _results;};ignoreStack=[];Pace.ignore=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('ignore');ret=fn.apply(null,args);ignoreStack.shift();return ret;};Pace.track=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('track');ret=fn.apply(null,args);ignoreStack.shift();return ret;};shouldTrack=function(method){var _ref2;if(method==null){method='GET';}
if(ignoreStack[0]==='track'){return'force';}
if(!ignoreStack.length&&options.ajax){if(method==='socket'&&options.ajax.trackWebSockets){return true;}else if(_ref2=method.toUpperCase(),__indexOf.call(options.ajax.trackMethods,_ref2)>=0){return true;}}
return false;};RequestIntercept=(function(_super){__extends(RequestIntercept,_super);function RequestIntercept(){var monitorXHR,_this=this;RequestIntercept.__super__.constructor.apply(this,arguments);monitorXHR=function(req){var _open;_open=req.open;return req.open=function(type,url,async){if(shouldTrack(type)){_this.trigger('request',{type:type,url:url,request:req});}
return _open.apply(req,arguments);};};window.XMLHttpRequest=function(flags){var req;req=new _XMLHttpRequest(flags);monitorXHR(req);return req;};try{extendNative(window.XMLHttpRequest,_XMLHttpRequest);}catch(_error){}
if(_XDomainRequest!=null){window.XDomainRequest=function(){var req;req=new _XDomainRequest;monitorXHR(req);return req;};try{extendNative(window.XDomainRequest,_XDomainRequest);}catch(_error){}}
if((_WebSocket!=null)&&options.ajax.trackWebSockets){window.WebSocket=function(url,protocols){var req;if(protocols!=null){req=new _WebSocket(url,protocols);}else{req=new _WebSocket(url);}
if(shouldTrack('socket')){_this.trigger('request',{type:'socket',url:url,protocols:protocols,request:req});}
return req;};try{extendNative(window.WebSocket,_WebSocket);}catch(_error){}}}
return RequestIntercept;})(Events);_intercept=null;getIntercept=function(){if(_intercept==null){_intercept=new RequestIntercept;}
return _intercept;};shouldIgnoreURL=function(url){var pattern,_j,_len1,_ref2;_ref2=options.ajax.ignoreURLs;for(_j=0,_len1=_ref2.length;_j<_len1;_j++){pattern=_ref2[_j];if(typeof pattern==='string'){if(url.indexOf(pattern)!==-1){return true;}}else{if(pattern.test(url)){return true;}}}
return false;};getIntercept().on('request',function(_arg){var after,args,request,type,url;type=_arg.type,request=_arg.request,url=_arg.url;if(shouldIgnoreURL(url)){return;}
if(!Pace.running&&(options.restartOnRequestAfter!==false||shouldTrack(type)==='force')){args=arguments;after=options.restartOnRequestAfter||0;if(typeof after==='boolean'){after=0;}
return setTimeout(function(){var stillActive,_j,_len1,_ref2,_ref3,_results;if(type==='socket'){stillActive=request.readyState<2;}else{stillActive=(0<(_ref2=request.readyState)&&_ref2<4);}
if(stillActive){Pace.restart();_ref3=Pace.sources;_results=[];for(_j=0,_len1=_ref3.length;_j<_len1;_j++){source=_ref3[_j];if(source instanceof AjaxMonitor){source.watch.apply(source,args);break;}else{_results.push(void 0);}}
return _results;}},after);}});AjaxMonitor=(function(){function AjaxMonitor(){var _this=this;this.elements=[];getIntercept().on('request',function(){return _this.watch.apply(_this,arguments);});}
AjaxMonitor.prototype.watch=function(_arg){var request,tracker,type,url;type=_arg.type,request=_arg.request,url=_arg.url;if(shouldIgnoreURL(url)){return;}
if(type==='socket'){tracker=new SocketRequestTracker(request);}else{tracker=new XHRRequestTracker(request);}
return this.elements.push(tracker);};return AjaxMonitor;})();XHRRequestTracker=(function(){function XHRRequestTracker(request){var event,size,_j,_len1,_onreadystatechange,_ref2,_this=this;this.progress=0;if(window.ProgressEvent!=null){size=null;request.addEventListener('progress',function(evt){if(evt.lengthComputable){return _this.progress=100*evt.loaded/evt.total;}else{return _this.progress=_this.progress+(100-_this.progress)/2;}},false);_ref2=['load','abort','timeout','error'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;},false);}}else{_onreadystatechange=request.onreadystatechange;request.onreadystatechange=function(){var _ref3;if((_ref3=request.readyState)===0||_ref3===4){_this.progress=100;}else if(request.readyState===3){_this.progress=50;}
return typeof _onreadystatechange==="function"?_onreadystatechange.apply(null,arguments):void 0;};}}
return XHRRequestTracker;})();SocketRequestTracker=(function(){function SocketRequestTracker(request){var event,_j,_len1,_ref2,_this=this;this.progress=0;_ref2=['error','open'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;},false);}}
return SocketRequestTracker;})();ElementMonitor=(function(){function ElementMonitor(options){var selector,_j,_len1,_ref2;if(options==null){options={};}
this.elements=[];if(options.selectors==null){options.selectors=[];}
_ref2=options.selectors;for(_j=0,_len1=_ref2.length;_j<_len1;_j++){selector=_ref2[_j];this.elements.push(new ElementTracker(selector));}}
return ElementMonitor;})();ElementTracker=(function(){function ElementTracker(selector){this.selector=selector;this.progress=0;this.check();}
ElementTracker.prototype.check=function(){var _this=this;if(document.querySelector(this.selector)){return this.done();}else{return setTimeout((function(){return _this.check();}),options.elements.checkInterval);}};ElementTracker.prototype.done=function(){return this.progress=100;};return ElementTracker;})();DocumentMonitor=(function(){DocumentMonitor.prototype.states={loading:0,interactive:50,complete:100};function DocumentMonitor(){var _onreadystatechange,_ref2,_this=this;this.progress=(_ref2=this.states[document.readyState])!=null?_ref2:100;_onreadystatechange=document.onreadystatechange;document.onreadystatechange=function(){if(_this.states[document.readyState]!=null){_this.progress=_this.states[document.readyState];}
return typeof _onreadystatechange==="function"?_onreadystatechange.apply(null,arguments):void 0;};}
return DocumentMonitor;})();EventLagMonitor=(function(){function EventLagMonitor(){var avg,interval,last,points,samples,_this=this;this.progress=0;avg=0;samples=[];points=0;last=now();interval=setInterval(function(){var diff;diff=now()-last-50;last=now();samples.push(diff);if(samples.length>options.eventLag.sampleCount){samples.shift();}
avg=avgAmplitude(samples);if(++points>=options.eventLag.minSamples&&avg<options.eventLag.lagThreshold){_this.progress=100;return clearInterval(interval);}else{return _this.progress=100*(3/(avg+3));}},50);}
return EventLagMonitor;})();Scaler=(function(){function Scaler(source){this.source=source;this.last=this.sinceLastUpdate=0;this.rate=options.initialRate;this.catchup=0;this.progress=this.lastProgress=0;if(this.source!=null){this.progress=result(this.source,'progress');}}
Scaler.prototype.tick=function(frameTime,val){var scaling;if(val==null){val=result(this.source,'progress');}
if(val>=100){this.done=true;}
if(val===this.last){this.sinceLastUpdate+=frameTime;}else{if(this.sinceLastUpdate){this.rate=(val-this.last)/this.sinceLastUpdate;}
this.catchup=(val-this.progress)/options.catchupTime;this.sinceLastUpdate=0;this.last=val;}
if(val>this.progress){this.progress+=this.catchup*frameTime;}
scaling=1-Math.pow(this.progress/100,options.easeFactor);this.progress+=scaling*this.rate*frameTime;this.progress=Math.min(this.lastProgress+options.maxProgressPerFrame,this.progress);this.progress=Math.max(0,this.progress);this.progress=Math.min(100,this.progress);this.lastProgress=this.progress;return this.progress;};return Scaler;})();sources=null;scalers=null;bar=null;uniScaler=null;animation=null;cancelAnimation=null;Pace.running=false;handlePushState=function(){if(options.restartOnPushState){return Pace.restart();}};if(window.history.pushState!=null){_pushState=window.history.pushState;window.history.pushState=function(){handlePushState();return _pushState.apply(window.history,arguments);};}
if(window.history.replaceState!=null){_replaceState=window.history.replaceState;window.history.replaceState=function(){handlePushState();return _replaceState.apply(window.history,arguments);};}
SOURCE_KEYS={ajax:AjaxMonitor,elements:ElementMonitor,document:DocumentMonitor,eventLag:EventLagMonitor};(init=function(){var type,_j,_k,_len1,_len2,_ref2,_ref3,_ref4;Pace.sources=sources=[];_ref2=['ajax','elements','document','eventLag'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){type=_ref2[_j];if(options[type]!==false){sources.push(new SOURCE_KEYS[type](options[type]));}}
_ref4=(_ref3=options.extraSources)!=null?_ref3:[];for(_k=0,_len2=_ref4.length;_k<_len2;_k++){source=_ref4[_k];sources.push(new source(options));}
Pace.bar=bar=new Bar;scalers=[];return uniScaler=new Scaler;})();Pace.stop=function(){Pace.trigger('stop');Pace.running=false;bar.destroy();cancelAnimation=true;if(animation!=null){if(typeof cancelAnimationFrame==="function"){cancelAnimationFrame(animation);}
animation=null;}
return init();};Pace.restart=function(){Pace.trigger('restart');Pace.stop();return Pace.start();};Pace.go=function(){var start;Pace.running=true;bar.render();start=now();cancelAnimation=false;return animation=runAnimation(function(frameTime,enqueueNextFrame){var avg,count,done,element,elements,i,j,remaining,scaler,scalerList,sum,_j,_k,_len1,_len2,_ref2;remaining=100-bar.progress;count=sum=0;done=true;for(i=_j=0,_len1=sources.length;_j<_len1;i=++_j){source=sources[i];scalerList=scalers[i]!=null?scalers[i]:scalers[i]=[];elements=(_ref2=source.elements)!=null?_ref2:[source];for(j=_k=0,_len2=elements.length;_k<_len2;j=++_k){element=elements[j];scaler=scalerList[j]!=null?scalerList[j]:scalerList[j]=new Scaler(element);done&=scaler.done;if(scaler.done){continue;}
count++;sum+=scaler.tick(frameTime);}}
avg=sum/count;bar.update(uniScaler.tick(frameTime,avg));if(bar.done()||done||cancelAnimation){bar.update(100);Pace.trigger('done');return setTimeout(function(){bar.finish();Pace.running=false;return Pace.trigger('hide');},Math.max(options.ghostTime,Math.max(options.minTime-(now()-start),0)));}else{return enqueueNextFrame();}});};Pace.start=function(_options){extend(options,_options);Pace.running=true;try{bar.render();}catch(_error){NoTargetError=_error;}
if(!document.querySelector('.pace')){return setTimeout(Pace.start,50);}else{Pace.trigger('start');return Pace.go();}};if(typeof define==='function'&&define.amd){define(['pace'],function(){return Pace;});}else if(typeof exports==='object'){module.exports=Pace;}else{if(options.startOnPageLoad){Pace.start();}}}).call(this);/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.8
 *
 */
(function($){$.fn.extend({slimScroll:function(options){var defaults={width:'auto',height:'250px',size:'7px',color:'#000',position:'right',distance:'1px',start:'top',opacity:.4,alwaysVisible:false,disableFadeOut:false,railVisible:false,railColor:'#333',railOpacity:.2,railDraggable:true,railClass:'slimScrollRail',barClass:'slimScrollBar',wrapperClass:'slimScrollDiv',allowPageScroll:false,wheelStep:20,touchScrollStep:200,borderRadius:'7px',railBorderRadius:'7px'};var o=$.extend(defaults,options);this.each(function(){var isOverPanel,isOverBar,isDragg,queueHide,touchDif,barHeight,percentScroll,lastScroll,divS='<div></div>',minBarHeight=30,releaseScroll=false;var me=$(this);if(me.parent().hasClass(o.wrapperClass))
{var offset=me.scrollTop();bar=me.siblings('.'+o.barClass);rail=me.siblings('.'+o.railClass);getBarHeight();if($.isPlainObject(options))
{if('height'in options&&options.height=='auto'){me.parent().css('height','auto');me.css('height','auto');var height=me.parent().parent().height();me.parent().css('height',height);me.css('height',height);}else if('height'in options){var h=options.height;me.parent().css('height',h);me.css('height',h);}
if('scrollTo'in options)
{offset=parseInt(o.scrollTo);}
else if('scrollBy'in options)
{offset+=parseInt(o.scrollBy);}
else if('destroy'in options)
{bar.remove();rail.remove();me.unwrap();return;}
scrollContent(offset,false,true);}
return;}
else if($.isPlainObject(options))
{if('destroy'in options)
{return;}}
o.height=(o.height=='auto')?me.parent().height():o.height;var wrapper=$(divS).addClass(o.wrapperClass).css({position:'relative',overflow:'hidden',width:o.width,height:o.height});me.css({overflow:'hidden',width:o.width,height:o.height});var rail=$(divS).addClass(o.railClass).css({width:o.size,height:'100%',position:'absolute',top:0,display:(o.alwaysVisible&&o.railVisible)?'block':'none','border-radius':o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90});var bar=$(divS).addClass(o.barClass).css({background:o.color,width:o.size,position:'absolute',top:0,opacity:o.opacity,display:o.alwaysVisible?'block':'none','border-radius':o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99});var posCss=(o.position=='right')?{right:o.distance}:{left:o.distance};rail.css(posCss);bar.css(posCss);me.wrap(wrapper);me.parent().append(bar);me.parent().append(rail);if(o.railDraggable){bar.bind("mousedown",function(e){var $doc=$(document);isDragg=true;t=parseFloat(bar.css('top'));pageY=e.pageY;$doc.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY;bar.css('top',currTop);scrollContent(0,bar.position().top,false);});$doc.bind("mouseup.slimscroll",function(e){isDragg=false;hideBar();$doc.unbind('.slimscroll');});return false;}).bind("selectstart.slimscroll",function(e){e.stopPropagation();e.preventDefault();return false;});}
rail.hover(function(){showBar();},function(){hideBar();});bar.hover(function(){isOverBar=true;},function(){isOverBar=false;});me.hover(function(){isOverPanel=true;showBar();hideBar();},function(){isOverPanel=false;hideBar();});me.bind('touchstart',function(e,b){if(e.originalEvent.touches.length)
{touchDif=e.originalEvent.touches[0].pageY;}});me.bind('touchmove',function(e){if(!releaseScroll)
{e.originalEvent.preventDefault();}
if(e.originalEvent.touches.length)
{var diff=(touchDif-e.originalEvent.touches[0].pageY)/o.touchScrollStep;scrollContent(diff,true);touchDif=e.originalEvent.touches[0].pageY;}});getBarHeight();if(o.start==='bottom')
{bar.css({top:me.outerHeight()-bar.outerHeight()});scrollContent(0,true);}
else if(o.start!=='top')
{scrollContent($(o.start).position().top,null,true);if(!o.alwaysVisible){bar.hide();}}
attachWheel(this);function _onWheel(e)
{if(!isOverPanel){return;}
var e=e||window.event;var delta=0;if(e.wheelDelta){delta=-e.wheelDelta/120;}
if(e.detail){delta=e.detail/3;}
var target=e.target||e.srcTarget||e.srcElement;if($(target).closest('.'+o.wrapperClass).is(me.parent())){scrollContent(delta,true);}
if(e.preventDefault&&!releaseScroll){e.preventDefault();}
if(!releaseScroll){e.returnValue=false;}}
function scrollContent(y,isWheel,isJump)
{releaseScroll=false;var delta=y;var maxTop=me.outerHeight()-bar.outerHeight();if(isWheel)
{delta=parseInt(bar.css('top'))+y*parseInt(o.wheelStep)/100*bar.outerHeight();delta=Math.min(Math.max(delta,0),maxTop);delta=(y>0)?Math.ceil(delta):Math.floor(delta);bar.css({top:delta+'px'});}
percentScroll=parseInt(bar.css('top'))/(me.outerHeight()-bar.outerHeight());delta=percentScroll*(me[0].scrollHeight-me.outerHeight());if(isJump)
{delta=y;var offsetTop=delta/me[0].scrollHeight*me.outerHeight();offsetTop=Math.min(Math.max(offsetTop,0),maxTop);bar.css({top:offsetTop+'px'});}
me.scrollTop(delta);me.trigger('slimscrolling',~~delta);showBar();hideBar();}
function attachWheel(target)
{if(window.addEventListener)
{target.addEventListener('DOMMouseScroll',_onWheel,false);target.addEventListener('mousewheel',_onWheel,false);}
else
{document.attachEvent("onmousewheel",_onWheel)}}
function getBarHeight()
{barHeight=Math.max((me.outerHeight()/me[0].scrollHeight)*me.outerHeight(),minBarHeight);bar.css({height:barHeight+'px'});var display=barHeight==me.outerHeight()?'none':'block';bar.css({display:display});}
function showBar()
{getBarHeight();clearTimeout(queueHide);if(percentScroll==~~percentScroll)
{releaseScroll=o.allowPageScroll;if(lastScroll!=percentScroll)
{var msg=(~~percentScroll==0)?'top':'bottom';me.trigger('slimscroll',msg);}}
else
{releaseScroll=false;}
lastScroll=percentScroll;if(barHeight>=me.outerHeight()){releaseScroll=true;return;}
bar.stop(true,true).fadeIn('fast');if(o.railVisible){rail.stop(true,true).fadeIn('fast');}}
function hideBar()
{if(!o.alwaysVisible)
{queueHide=setTimeout(function(){if(!(o.disableFadeOut&&isOverPanel)&&!isOverBar&&!isDragg)
{bar.fadeOut('slow');rail.fadeOut('slow');}},1000);}}});return this;}});$.fn.extend({slimscroll:$.fn.slimScroll});})(jQuery);/*!
 * sweetalert2 v6.6.1
 * Released under the MIT License.
 */
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.Sweetalert2=factory());}(this,(function(){'use strict';var defaultParams={title:'',titleText:'',text:'',html:'',type:null,customClass:'',target:'body',animation:true,allowOutsideClick:true,allowEscapeKey:true,allowEnterKey:true,showConfirmButton:true,showCancelButton:false,preConfirm:null,confirmButtonText:'OK',confirmButtonColor:'#3085d6',confirmButtonClass:null,cancelButtonText:'Cancel',cancelButtonColor:'#aaa',cancelButtonClass:null,buttonsStyling:true,reverseButtons:false,focusCancel:false,showCloseButton:false,showLoaderOnConfirm:false,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:'#fff',input:null,inputPlaceholder:'',inputValue:'',inputOptions:{},inputAutoTrim:true,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:'40px',onOpen:null,onClose:null};var swalPrefix='swal2-';var prefix=function prefix(items){var result={};for(var i in items){result[items[i]]=swalPrefix+items[i];}
return result;};var swalClasses=prefix(['container','shown','iosfix','modal','overlay','fade','show','hide','noanimation','close','title','content','buttonswrapper','confirm','cancel','icon','image','input','file','range','select','radio','checkbox','textarea','inputerror','validationerror','progresssteps','activeprogressstep','progresscircle','progressline','loading','styled']);var iconTypes=prefix(['success','warning','info','question','error']);var colorLuminance=function colorLuminance(hex,lum){hex=String(hex).replace(/[^0-9a-f]/gi,'');if(hex.length<6){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];}
lum=lum||0;var rgb='#';for(var i=0;i<3;i++){var c=parseInt(hex.substr(i*2,2),16);c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16);rgb+=('00'+c).substr(c.length);}
return rgb;};var uniqueArray=function uniqueArray(arr){var result=[];for(var i in arr){if(result.indexOf(arr[i])===-1){result.push(arr[i]);}}
return result;};var states={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null};var init=function init(params){if(typeof document==='undefined'){console.error('SweetAlert2 requires document to initialize');return;}
var container=document.createElement('div');container.className=swalClasses.container;container.innerHTML=sweetHTML;var targetElement=document.querySelector(params.target);if(!targetElement){console.warn('SweetAlert2: Can\'t find the target "'+params.target+'"');targetElement=document.body;}
targetElement.appendChild(container);var modal=getModal();var input=getChildByClass(modal,swalClasses.input);var file=getChildByClass(modal,swalClasses.file);var range=modal.querySelector('.'+swalClasses.range+' input');var rangeOutput=modal.querySelector('.'+swalClasses.range+' output');var select=getChildByClass(modal,swalClasses.select);var checkbox=modal.querySelector('.'+swalClasses.checkbox+' input');var textarea=getChildByClass(modal,swalClasses.textarea);input.oninput=function(){sweetAlert.resetValidationError();};input.onkeydown=function(event){setTimeout(function(){if(event.keyCode===13&&params.allowEnterKey){event.stopPropagation();sweetAlert.clickConfirm();}},0);};file.onchange=function(){sweetAlert.resetValidationError();};range.oninput=function(){sweetAlert.resetValidationError();rangeOutput.value=range.value;};range.onchange=function(){sweetAlert.resetValidationError();range.previousSibling.value=range.value;};select.onchange=function(){sweetAlert.resetValidationError();};checkbox.onchange=function(){sweetAlert.resetValidationError();};textarea.oninput=function(){sweetAlert.resetValidationError();};return modal;};var sweetHTML=('\n <div role="dialog" aria-labelledby="'+swalClasses.title+'" aria-describedby="'+swalClasses.content+'" class="'+swalClasses.modal+'" tabindex="-1">\n   <ul class="'+swalClasses.progresssteps+'"></ul>\n   <div class="'+swalClasses.icon+' '+iconTypes.error+'">\n     <span class="swal2-x-mark"><span class="swal2-x-mark-line-left"></span><span class="swal2-x-mark-line-right"></span></span>\n   </div>\n   <div class="'+swalClasses.icon+' '+iconTypes.question+'">?</div>\n   <div class="'+swalClasses.icon+' '+iconTypes.warning+'">!</div>\n   <div class="'+swalClasses.icon+' '+iconTypes.info+'">i</div>\n   <div class="'+swalClasses.icon+' '+iconTypes.success+'">\n     <div class="swal2-success-circular-line-left"></div>\n     <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n     <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n     <div class="swal2-success-circular-line-right"></div>\n   </div>\n   <img class="'+swalClasses.image+'">\n   <h2 class="'+swalClasses.title+'" id="'+swalClasses.title+'"></h2>\n   <div id="'+swalClasses.content+'" class="'+swalClasses.content+'"></div>\n   <input class="'+swalClasses.input+'">\n   <input type="file" class="'+swalClasses.file+'">\n   <div class="'+swalClasses.range+'">\n     <output></output>\n     <input type="range">\n   </div>\n   <select class="'+swalClasses.select+'"></select>\n   <div class="'+swalClasses.radio+'"></div>\n   <label for="'+swalClasses.checkbox+'" class="'+swalClasses.checkbox+'">\n     <input type="checkbox">\n   </label>\n   <textarea class="'+swalClasses.textarea+'"></textarea>\n   <div class="'+swalClasses.validationerror+'"></div>\n   <div class="'+swalClasses.buttonswrapper+'">\n     <button type="button" class="'+swalClasses.confirm+'">OK</button>\n     <button type="button" class="'+swalClasses.cancel+'">Cancel</button>\n   </div>\n   <button type="button" class="'+swalClasses.close+'" aria-label="Close this dialog">&times;</button>\n </div>\n').replace(/(^|\n)\s*/g,'');var getContainer=function getContainer(){return document.body.querySelector('.'+swalClasses.container);};var getModal=function getModal(){return getContainer()?getContainer().querySelector('.'+swalClasses.modal):null;};var getIcons=function getIcons(){var modal=getModal();return modal.querySelectorAll('.'+swalClasses.icon);};var elementByClass=function elementByClass(className){return getContainer()?getContainer().querySelector('.'+className):null;};var getTitle=function getTitle(){return elementByClass(swalClasses.title);};var getContent=function getContent(){return elementByClass(swalClasses.content);};var getImage=function getImage(){return elementByClass(swalClasses.image);};var getButtonsWrapper=function getButtonsWrapper(){return elementByClass(swalClasses.buttonswrapper);};var getProgressSteps=function getProgressSteps(){return elementByClass(swalClasses.progresssteps);};var getValidationError=function getValidationError(){return elementByClass(swalClasses.validationerror);};var getConfirmButton=function getConfirmButton(){return elementByClass(swalClasses.confirm);};var getCancelButton=function getCancelButton(){return elementByClass(swalClasses.cancel);};var getCloseButton=function getCloseButton(){return elementByClass(swalClasses.close);};var getFocusableElements=function getFocusableElements(focusCancel){var buttons=[getConfirmButton(),getCancelButton()];if(focusCancel){buttons.reverse();}
var focusableElements=buttons.concat(Array.prototype.slice.call(getModal().querySelectorAll('button, input:not([type=hidden]), textarea, select, a, *[tabindex]:not([tabindex="-1"])')));return uniqueArray(focusableElements);};var hasClass=function hasClass(elem,className){if(elem.classList){return elem.classList.contains(className);}
return false;};var focusInput=function focusInput(input){input.focus();if(input.type!=='file'){var val=input.value;input.value='';input.value=val;}};var addClass=function addClass(elem,className){if(!elem||!className){return;}
var classes=className.split(/\s+/).filter(Boolean);classes.forEach(function(className){elem.classList.add(className);});};var removeClass=function removeClass(elem,className){if(!elem||!className){return;}
var classes=className.split(/\s+/).filter(Boolean);classes.forEach(function(className){elem.classList.remove(className);});};var getChildByClass=function getChildByClass(elem,className){for(var i=0;i<elem.childNodes.length;i++){if(hasClass(elem.childNodes[i],className)){return elem.childNodes[i];}}};var show=function show(elem,display){if(!display){display='block';}
elem.style.opacity='';elem.style.display=display;};var hide=function hide(elem){elem.style.opacity='';elem.style.display='none';};var empty=function empty(elem){while(elem.firstChild){elem.removeChild(elem.firstChild);}};var isVisible=function isVisible(elem){return elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length;};var removeStyleProperty=function removeStyleProperty(elem,property){if(elem.style.removeProperty){elem.style.removeProperty(property);}else{elem.style.removeAttribute(property);}};var fireClick=function fireClick(node){if(!isVisible(node)){return false;}
if(typeof MouseEvent==='function'){var mevt=new MouseEvent('click',{view:window,bubbles:false,cancelable:true});node.dispatchEvent(mevt);}else if(document.createEvent){var evt=document.createEvent('MouseEvents');evt.initEvent('click',false,false);node.dispatchEvent(evt);}else if(document.createEventObject){node.fireEvent('onclick');}else if(typeof node.onclick==='function'){node.onclick();}};var animationEndEvent=function(){var testEl=document.createElement('div');var transEndEventNames={'WebkitAnimation':'webkitAnimationEnd','OAnimation':'oAnimationEnd oanimationend','msAnimation':'MSAnimationEnd','animation':'animationend'};for(var i in transEndEventNames){if(transEndEventNames.hasOwnProperty(i)&&testEl.style[i]!==undefined){return transEndEventNames[i];}}
return false;}();var resetPrevState=function resetPrevState(){window.onkeydown=states.previousWindowKeyDown;if(states.previousActiveElement&&states.previousActiveElement.focus){var x=window.scrollX;var y=window.scrollY;states.previousActiveElement.focus();if(x&&y){window.scrollTo(x,y);}}};var measureScrollbar=function measureScrollbar(){var supportsTouch='ontouchstart'in window||navigator.msMaxTouchPoints;if(supportsTouch){return 0;}
var scrollDiv=document.createElement('div');scrollDiv.style.width='50px';scrollDiv.style.height='50px';scrollDiv.style.overflow='scroll';document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);return scrollbarWidth;};var debounce=function debounce(func,wait){var timeout=void 0;return function(){var later=function later(){timeout=null;func();};clearTimeout(timeout);timeout=setTimeout(later,wait);};};var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}
return target;};var modalParams=_extends({},defaultParams);var queue=[];var swal2Observer=void 0;var setParameters=function setParameters(params){var modal=getModal()||init(params);for(var param in params){if(!defaultParams.hasOwnProperty(param)&&param!=='extraParams'){console.warn('SweetAlert2: Unknown parameter "'+param+'"');}}
modal.style.width=typeof params.width==='number'?params.width+'px':params.width;modal.style.padding=params.padding+'px';modal.style.background=params.background;var successIconParts=modal.querySelectorAll('[class^=swal2-success-circular-line], .swal2-success-fix');for(var i=0;i<successIconParts.length;i++){successIconParts[i].style.background=params.background;}
var title=getTitle();var content=getContent();var buttonsWrapper=getButtonsWrapper();var confirmButton=getConfirmButton();var cancelButton=getCancelButton();var closeButton=getCloseButton();if(params.titleText){title.innerText=params.titleText;}else{title.innerHTML=params.title.split('\n').join('<br>');}
if(params.text||params.html){if(_typeof(params.html)==='object'){content.innerHTML='';if(0 in params.html){for(var _i=0;_i in params.html;_i++){content.appendChild(params.html[_i].cloneNode(true));}}else{content.appendChild(params.html.cloneNode(true));}}else if(params.html){content.innerHTML=params.html;}else if(params.text){content.textContent=params.text;}
show(content);}else{hide(content);}
if(params.showCloseButton){show(closeButton);}else{hide(closeButton);}
modal.className=swalClasses.modal;if(params.customClass){addClass(modal,params.customClass);}
var progressStepsContainer=getProgressSteps();var currentProgressStep=parseInt(params.currentProgressStep===null?sweetAlert.getQueueStep():params.currentProgressStep,10);if(params.progressSteps.length){show(progressStepsContainer);empty(progressStepsContainer);if(currentProgressStep>=params.progressSteps.length){console.warn('SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length '+'(currentProgressStep like JS arrays starts from 0)');}
params.progressSteps.forEach(function(step,index){var circle=document.createElement('li');addClass(circle,swalClasses.progresscircle);circle.innerHTML=step;if(index===currentProgressStep){addClass(circle,swalClasses.activeprogressstep);}
progressStepsContainer.appendChild(circle);if(index!==params.progressSteps.length-1){var line=document.createElement('li');addClass(line,swalClasses.progressline);line.style.width=params.progressStepsDistance;progressStepsContainer.appendChild(line);}});}else{hide(progressStepsContainer);}
var icons=getIcons();for(var _i2=0;_i2<icons.length;_i2++){hide(icons[_i2]);}
if(params.type){var validType=false;for(var iconType in iconTypes){if(params.type===iconType){validType=true;break;}}
if(!validType){console.error('SweetAlert2: Unknown alert type: '+params.type);return false;}
var icon=modal.querySelector('.'+swalClasses.icon+'.'+iconTypes[params.type]);show(icon);if(params.animation){switch(params.type){case'success':addClass(icon,'swal2-animate-success-icon');addClass(icon.querySelector('.swal2-success-line-tip'),'swal2-animate-success-line-tip');addClass(icon.querySelector('.swal2-success-line-long'),'swal2-animate-success-line-long');break;case'error':addClass(icon,'swal2-animate-error-icon');addClass(icon.querySelector('.swal2-x-mark'),'swal2-animate-x-mark');break;default:break;}}}
var image=getImage();if(params.imageUrl){image.setAttribute('src',params.imageUrl);show(image);if(params.imageWidth){image.setAttribute('width',params.imageWidth);}else{image.removeAttribute('width');}
if(params.imageHeight){image.setAttribute('height',params.imageHeight);}else{image.removeAttribute('height');}
image.className=swalClasses.image;if(params.imageClass){addClass(image,params.imageClass);}}else{hide(image);}
if(params.showCancelButton){cancelButton.style.display='inline-block';}else{hide(cancelButton);}
if(params.showConfirmButton){removeStyleProperty(confirmButton,'display');}else{hide(confirmButton);}
if(!params.showConfirmButton&&!params.showCancelButton){hide(buttonsWrapper);}else{show(buttonsWrapper);}
confirmButton.innerHTML=params.confirmButtonText;cancelButton.innerHTML=params.cancelButtonText;if(params.buttonsStyling){confirmButton.style.backgroundColor=params.confirmButtonColor;cancelButton.style.backgroundColor=params.cancelButtonColor;}
confirmButton.className=swalClasses.confirm;addClass(confirmButton,params.confirmButtonClass);cancelButton.className=swalClasses.cancel;addClass(cancelButton,params.cancelButtonClass);if(params.buttonsStyling){addClass(confirmButton,swalClasses.styled);addClass(cancelButton,swalClasses.styled);}else{removeClass(confirmButton,swalClasses.styled);removeClass(cancelButton,swalClasses.styled);confirmButton.style.backgroundColor=confirmButton.style.borderLeftColor=confirmButton.style.borderRightColor='';cancelButton.style.backgroundColor=cancelButton.style.borderLeftColor=cancelButton.style.borderRightColor='';}
if(params.animation===true){removeClass(modal,swalClasses.noanimation);}else{addClass(modal,swalClasses.noanimation);}};var openModal=function openModal(animation,onComplete){var container=getContainer();var modal=getModal();if(animation){addClass(modal,swalClasses.show);addClass(container,swalClasses.fade);removeClass(modal,swalClasses.hide);}else{removeClass(modal,swalClasses.fade);}
show(modal);container.style.overflowY='hidden';if(animationEndEvent&&!hasClass(modal,swalClasses.noanimation)){modal.addEventListener(animationEndEvent,function swalCloseEventFinished(){modal.removeEventListener(animationEndEvent,swalCloseEventFinished);container.style.overflowY='auto';});}else{container.style.overflowY='auto';}
addClass(document.documentElement,swalClasses.shown);addClass(document.body,swalClasses.shown);addClass(container,swalClasses.shown);fixScrollbar();iOSfix();states.previousActiveElement=document.activeElement;if(onComplete!==null&&typeof onComplete==='function'){setTimeout(function(){onComplete(modal);});}};var fixScrollbar=function fixScrollbar(){if(states.previousBodyPadding!==null){return;}
if(document.body.scrollHeight>window.innerHeight){states.previousBodyPadding=document.body.style.paddingRight;document.body.style.paddingRight=measureScrollbar()+'px';}};var undoScrollbar=function undoScrollbar(){if(states.previousBodyPadding!==null){document.body.style.paddingRight=states.previousBodyPadding;states.previousBodyPadding=null;}};var iOSfix=function iOSfix(){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(iOS&&!hasClass(document.body,swalClasses.iosfix)){var offset=document.body.scrollTop;document.body.style.top=offset*-1+'px';addClass(document.body,swalClasses.iosfix);}};var undoIOSfix=function undoIOSfix(){if(hasClass(document.body,swalClasses.iosfix)){var offset=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix);document.body.style.top='';document.body.scrollTop=offset*-1;}};var sweetAlert=function sweetAlert(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
if(args[0]===undefined){console.error('SweetAlert2 expects at least 1 attribute!');return false;}
var params=_extends({},modalParams);switch(_typeof(args[0])){case'string':params.title=args[0];params.html=args[1];params.type=args[2];break;case'object':_extends(params,args[0]);params.extraParams=args[0].extraParams;if(params.input==='email'&&params.inputValidator===null){params.inputValidator=function(email){return new Promise(function(resolve,reject){var emailRegex=/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;if(emailRegex.test(email)){resolve();}else{reject('Invalid email address');}});};}
if(params.input==='url'&&params.inputValidator===null){params.inputValidator=function(url){return new Promise(function(resolve,reject){var urlRegex=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/;if(urlRegex.test(url)){resolve();}else{reject('Invalid URL');}});};}
break;default:console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+_typeof(args[0]));return false;}
setParameters(params);var container=getContainer();var modal=getModal();return new Promise(function(resolve,reject){if(params.timer){modal.timeout=setTimeout(function(){sweetAlert.closeModal(params.onClose);reject('timer');},params.timer);}
var getInput=function getInput(inputType){inputType=inputType||params.input;if(!inputType){return null;}
switch(inputType){case'select':case'textarea':case'file':return getChildByClass(modal,swalClasses[inputType]);case'checkbox':return modal.querySelector('.'+swalClasses.checkbox+' input');case'radio':return modal.querySelector('.'+swalClasses.radio+' input:checked')||modal.querySelector('.'+swalClasses.radio+' input:first-child');case'range':return modal.querySelector('.'+swalClasses.range+' input');default:return getChildByClass(modal,swalClasses.input);}};var getInputValue=function getInputValue(){var input=getInput();if(!input){return null;}
switch(params.input){case'checkbox':return input.checked?1:0;case'radio':return input.checked?input.value:null;case'file':return input.files.length?input.files[0]:null;default:return params.inputAutoTrim?input.value.trim():input.value;}};if(params.input){setTimeout(function(){var input=getInput();if(input){focusInput(input);}},0);}
var confirm=function confirm(value){if(params.showLoaderOnConfirm){sweetAlert.showLoading();}
if(params.preConfirm){params.preConfirm(value,params.extraParams).then(function(preConfirmValue){sweetAlert.closeModal(params.onClose);resolve(preConfirmValue||value);},function(error){sweetAlert.hideLoading();if(error){sweetAlert.showValidationError(error);}});}else{sweetAlert.closeModal(params.onClose);resolve(value);}};var onButtonEvent=function onButtonEvent(event){var e=event||window.event;var target=e.target||e.srcElement;var confirmButton=getConfirmButton();var cancelButton=getCancelButton();var targetedConfirm=confirmButton&&(confirmButton===target||confirmButton.contains(target));var targetedCancel=cancelButton&&(cancelButton===target||cancelButton.contains(target));switch(e.type){case'mouseover':case'mouseup':if(params.buttonsStyling){if(targetedConfirm){confirmButton.style.backgroundColor=colorLuminance(params.confirmButtonColor,-0.1);}else if(targetedCancel){cancelButton.style.backgroundColor=colorLuminance(params.cancelButtonColor,-0.1);}}
break;case'mouseout':if(params.buttonsStyling){if(targetedConfirm){confirmButton.style.backgroundColor=params.confirmButtonColor;}else if(targetedCancel){cancelButton.style.backgroundColor=params.cancelButtonColor;}}
break;case'mousedown':if(params.buttonsStyling){if(targetedConfirm){confirmButton.style.backgroundColor=colorLuminance(params.confirmButtonColor,-0.2);}else if(targetedCancel){cancelButton.style.backgroundColor=colorLuminance(params.cancelButtonColor,-0.2);}}
break;case'click':if(targetedConfirm&&sweetAlert.isVisible()){sweetAlert.disableButtons();if(params.input){var inputValue=getInputValue();if(params.inputValidator){sweetAlert.disableInput();params.inputValidator(inputValue,params.extraParams).then(function(){sweetAlert.enableButtons();sweetAlert.enableInput();confirm(inputValue);},function(error){sweetAlert.enableButtons();sweetAlert.enableInput();if(error){sweetAlert.showValidationError(error);}});}else{confirm(inputValue);}}else{confirm(true);}}else if(targetedCancel&&sweetAlert.isVisible()){sweetAlert.disableButtons();sweetAlert.closeModal(params.onClose);reject('cancel');}
break;default:}};var buttons=modal.querySelectorAll('button');for(var i=0;i<buttons.length;i++){buttons[i].onclick=onButtonEvent;buttons[i].onmouseover=onButtonEvent;buttons[i].onmouseout=onButtonEvent;buttons[i].onmousedown=onButtonEvent;}
getCloseButton().onclick=function(){sweetAlert.closeModal(params.onClose);reject('close');};container.onclick=function(e){if(e.target!==container){return;}
if(params.allowOutsideClick){sweetAlert.closeModal(params.onClose);reject('overlay');}};var buttonsWrapper=getButtonsWrapper();var confirmButton=getConfirmButton();var cancelButton=getCancelButton();if(params.reverseButtons){confirmButton.parentNode.insertBefore(cancelButton,confirmButton);}else{confirmButton.parentNode.insertBefore(confirmButton,cancelButton);}
var setFocus=function setFocus(index,increment){var focusableElements=getFocusableElements(params.focusCancel);for(var _i3=0;_i3<focusableElements.length;_i3++){index=index+increment;if(index===focusableElements.length){index=0;}else if(index===-1){index=focusableElements.length-1;}
var el=focusableElements[index];if(isVisible(el)){return el.focus();}}};var handleKeyDown=function handleKeyDown(event){var e=event||window.event;var keyCode=e.keyCode||e.which;if([9,13,32,27,37,38,39,40].indexOf(keyCode)===-1){return;}
var targetElement=e.target||e.srcElement;var focusableElements=getFocusableElements(params.focusCancel);var btnIndex=-1;for(var _i4=0;_i4<focusableElements.length;_i4++){if(targetElement===focusableElements[_i4]){btnIndex=_i4;break;}}
if(keyCode===9){if(!e.shiftKey){setFocus(btnIndex,1);}else{setFocus(btnIndex,-1);}
e.stopPropagation();e.preventDefault();}else if(keyCode===37||keyCode===38||keyCode===39||keyCode===40){if(document.activeElement===confirmButton&&isVisible(cancelButton)){cancelButton.focus();}else if(document.activeElement===cancelButton&&isVisible(confirmButton)){confirmButton.focus();}}else if(keyCode===13||keyCode===32){if(btnIndex===-1&&params.allowEnterKey){if(params.focusCancel){fireClick(cancelButton,e);}else{fireClick(confirmButton,e);}
e.stopPropagation();e.preventDefault();}}else if(keyCode===27&&params.allowEscapeKey===true){sweetAlert.closeModal(params.onClose);reject('esc');}};states.previousWindowKeyDown=window.onkeydown;window.onkeydown=handleKeyDown;if(params.buttonsStyling){confirmButton.style.borderLeftColor=params.confirmButtonColor;confirmButton.style.borderRightColor=params.confirmButtonColor;}
sweetAlert.showLoading=sweetAlert.enableLoading=function(){show(buttonsWrapper);show(confirmButton,'inline-block');addClass(buttonsWrapper,swalClasses.loading);addClass(modal,swalClasses.loading);confirmButton.disabled=true;cancelButton.disabled=true;};sweetAlert.hideLoading=sweetAlert.disableLoading=function(){if(!params.showConfirmButton){hide(confirmButton);if(!params.showCancelButton){hide(getButtonsWrapper());}}
removeClass(buttonsWrapper,swalClasses.loading);removeClass(modal,swalClasses.loading);confirmButton.disabled=false;cancelButton.disabled=false;};sweetAlert.getTitle=function(){return getTitle();};sweetAlert.getContent=function(){return getContent();};sweetAlert.getInput=function(){return getInput();};sweetAlert.getImage=function(){return getImage();};sweetAlert.getButtonsWrapper=function(){return getButtonsWrapper();};sweetAlert.getConfirmButton=function(){return getConfirmButton();};sweetAlert.getCancelButton=function(){return getCancelButton();};sweetAlert.enableButtons=function(){confirmButton.disabled=false;cancelButton.disabled=false;};sweetAlert.disableButtons=function(){confirmButton.disabled=true;cancelButton.disabled=true;};sweetAlert.enableConfirmButton=function(){confirmButton.disabled=false;};sweetAlert.disableConfirmButton=function(){confirmButton.disabled=true;};sweetAlert.enableInput=function(){var input=getInput();if(!input){return false;}
if(input.type==='radio'){var radiosContainer=input.parentNode.parentNode;var radios=radiosContainer.querySelectorAll('input');for(var _i5=0;_i5<radios.length;_i5++){radios[_i5].disabled=false;}}else{input.disabled=false;}};sweetAlert.disableInput=function(){var input=getInput();if(!input){return false;}
if(input&&input.type==='radio'){var radiosContainer=input.parentNode.parentNode;var radios=radiosContainer.querySelectorAll('input');for(var _i6=0;_i6<radios.length;_i6++){radios[_i6].disabled=true;}}else{input.disabled=true;}};sweetAlert.recalculateHeight=debounce(function(){var modal=getModal();if(!modal){return;}
var prevState=modal.style.display;modal.style.minHeight='';show(modal);modal.style.minHeight=modal.scrollHeight+1+'px';modal.style.display=prevState;},50);sweetAlert.showValidationError=function(error){var validationError=getValidationError();validationError.innerHTML=error;show(validationError);var input=getInput();if(input){focusInput(input);addClass(input,swalClasses.inputerror);}};sweetAlert.resetValidationError=function(){var validationError=getValidationError();hide(validationError);sweetAlert.recalculateHeight();var input=getInput();if(input){removeClass(input,swalClasses.inputerror);}};sweetAlert.getProgressSteps=function(){return params.progressSteps;};sweetAlert.setProgressSteps=function(progressSteps){params.progressSteps=progressSteps;setParameters(params);};sweetAlert.showProgressSteps=function(){show(getProgressSteps());};sweetAlert.hideProgressSteps=function(){hide(getProgressSteps());};sweetAlert.enableButtons();sweetAlert.hideLoading();sweetAlert.resetValidationError();var inputTypes=['input','file','range','select','radio','checkbox','textarea'];var input=void 0;for(var _i7=0;_i7<inputTypes.length;_i7++){var inputClass=swalClasses[inputTypes[_i7]];var inputContainer=getChildByClass(modal,inputClass);input=getInput(inputTypes[_i7]);if(input){for(var j in input.attributes){if(input.attributes.hasOwnProperty(j)){var attrName=input.attributes[j].name;if(attrName!=='type'&&attrName!=='value'){input.removeAttribute(attrName);}}}
for(var attr in params.inputAttributes){input.setAttribute(attr,params.inputAttributes[attr]);}}
inputContainer.className=inputClass;if(params.inputClass){addClass(inputContainer,params.inputClass);}
hide(inputContainer);}
var populateInputOptions=void 0;switch(params.input){case'text':case'email':case'password':case'number':case'tel':case'url':input=getChildByClass(modal,swalClasses.input);input.value=params.inputValue;input.placeholder=params.inputPlaceholder;input.type=params.input;show(input);break;case'file':input=getChildByClass(modal,swalClasses.file);input.placeholder=params.inputPlaceholder;input.type=params.input;show(input);break;case'range':var range=getChildByClass(modal,swalClasses.range);var rangeInput=range.querySelector('input');var rangeOutput=range.querySelector('output');rangeInput.value=params.inputValue;rangeInput.type=params.input;rangeOutput.value=params.inputValue;show(range);break;case'select':var select=getChildByClass(modal,swalClasses.select);select.innerHTML='';if(params.inputPlaceholder){var placeholder=document.createElement('option');placeholder.innerHTML=params.inputPlaceholder;placeholder.value='';placeholder.disabled=true;placeholder.selected=true;select.appendChild(placeholder);}
populateInputOptions=function populateInputOptions(inputOptions){for(var optionValue in inputOptions){var option=document.createElement('option');option.value=optionValue;option.innerHTML=inputOptions[optionValue];if(params.inputValue===optionValue){option.selected=true;}
select.appendChild(option);}
show(select);select.focus();};break;case'radio':var radio=getChildByClass(modal,swalClasses.radio);radio.innerHTML='';populateInputOptions=function populateInputOptions(inputOptions){for(var radioValue in inputOptions){var radioInput=document.createElement('input');var radioLabel=document.createElement('label');var radioLabelSpan=document.createElement('span');radioInput.type='radio';radioInput.name=swalClasses.radio;radioInput.value=radioValue;if(params.inputValue===radioValue){radioInput.checked=true;}
radioLabelSpan.innerHTML=inputOptions[radioValue];radioLabel.appendChild(radioInput);radioLabel.appendChild(radioLabelSpan);radioLabel.for=radioInput.id;radio.appendChild(radioLabel);}
show(radio);var radios=radio.querySelectorAll('input');if(radios.length){radios[0].focus();}};break;case'checkbox':var checkbox=getChildByClass(modal,swalClasses.checkbox);var checkboxInput=getInput('checkbox');checkboxInput.type='checkbox';checkboxInput.value=1;checkboxInput.id=swalClasses.checkbox;checkboxInput.checked=Boolean(params.inputValue);var label=checkbox.getElementsByTagName('span');if(label.length){checkbox.removeChild(label[0]);}
label=document.createElement('span');label.innerHTML=params.inputPlaceholder;checkbox.appendChild(label);show(checkbox);break;case'textarea':var textarea=getChildByClass(modal,swalClasses.textarea);textarea.value=params.inputValue;textarea.placeholder=params.inputPlaceholder;show(textarea);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'+params.input+'"');break;}
if(params.input==='select'||params.input==='radio'){if(params.inputOptions instanceof Promise){sweetAlert.showLoading();params.inputOptions.then(function(inputOptions){sweetAlert.hideLoading();populateInputOptions(inputOptions);});}else if(_typeof(params.inputOptions)==='object'){populateInputOptions(params.inputOptions);}else{console.error('SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got '+_typeof(params.inputOptions));}}
openModal(params.animation,params.onOpen);if(params.allowEnterKey){setFocus(-1,1);}else{if(document.activeElement){document.activeElement.blur();}}
getContainer().scrollTop=0;if(typeof MutationObserver!=='undefined'&&!swal2Observer){swal2Observer=new MutationObserver(sweetAlert.recalculateHeight);swal2Observer.observe(modal,{childList:true,characterData:true,subtree:true});}});};sweetAlert.isVisible=function(){return!!getModal();};sweetAlert.queue=function(steps){queue=steps;var resetQueue=function resetQueue(){queue=[];document.body.removeAttribute('data-swal2-queue-step');};var queueResult=[];return new Promise(function(resolve,reject){(function step(i,callback){if(i<queue.length){document.body.setAttribute('data-swal2-queue-step',i);sweetAlert(queue[i]).then(function(result){queueResult.push(result);step(i+1,callback);},function(dismiss){resetQueue();reject(dismiss);});}else{resetQueue();resolve(queueResult);}})(0);});};sweetAlert.getQueueStep=function(){return document.body.getAttribute('data-swal2-queue-step');};sweetAlert.insertQueueStep=function(step,index){if(index&&index<queue.length){return queue.splice(index,0,step);}
return queue.push(step);};sweetAlert.deleteQueueStep=function(index){if(typeof queue[index]!=='undefined'){queue.splice(index,1);}};sweetAlert.close=sweetAlert.closeModal=function(onComplete){var container=getContainer();var modal=getModal();if(!modal){return;}
removeClass(modal,swalClasses.show);addClass(modal,swalClasses.hide);clearTimeout(modal.timeout);resetPrevState();var removeModalAndResetState=function removeModalAndResetState(){if(container.parentNode){container.parentNode.removeChild(container);}
removeClass(document.documentElement,swalClasses.shown);removeClass(document.body,swalClasses.shown);undoScrollbar();undoIOSfix();};if(animationEndEvent&&!hasClass(modal,swalClasses.noanimation)){modal.addEventListener(animationEndEvent,function swalCloseEventFinished(){modal.removeEventListener(animationEndEvent,swalCloseEventFinished);if(hasClass(modal,swalClasses.hide)){removeModalAndResetState();}});}else{removeModalAndResetState();}
if(onComplete!==null&&typeof onComplete==='function'){setTimeout(function(){onComplete(modal);});}};sweetAlert.clickConfirm=function(){return getConfirmButton().click();};sweetAlert.clickCancel=function(){return getCancelButton().click();};sweetAlert.setDefaults=function(userParams){if(!userParams||(typeof userParams==='undefined'?'undefined':_typeof(userParams))!=='object'){return console.error('SweetAlert2: the argument for setDefaults() is required and has to be a object');}
for(var param in userParams){if(!defaultParams.hasOwnProperty(param)&&param!=='extraParams'){console.warn('SweetAlert2: Unknown parameter "'+param+'"');delete userParams[param];}}
_extends(modalParams,userParams);};sweetAlert.resetDefaults=function(){modalParams=_extends({},defaultParams);};sweetAlert.noop=function(){};sweetAlert.version='6.6.1';sweetAlert.default=sweetAlert;return sweetAlert;})));if(window.Sweetalert2)window.sweetAlert=window.swal=window.Sweetalert2;/*!
 * iCheck v1.0.1, http://git.io/arlzeA
 * =================================
 * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization
 *
 * (c) 2013 Damir Sultanov, http://fronteed.com
 * MIT Licensed
 */
(function($){var _iCheck='iCheck',_iCheckHelper=_iCheck+'-helper',_checkbox='checkbox',_radio='radio',_checked='checked',_unchecked='un'+_checked,_disabled='disabled',_determinate='determinate',_indeterminate='in'+_determinate,_update='update',_type='type',_click='click',_touch='touchbegin.i touchend.i',_add='addClass',_remove='removeClass',_callback='trigger',_label='label',_cursor='cursor',_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);$.fn[_iCheck]=function(options,fire){var handle='input[type="'+_checkbox+'"], input[type="'+_radio+'"]',stack=$(),walker=function(object){object.each(function(){var self=$(this);if(self.is(handle)){stack=stack.add(self);}else{stack=stack.add(self.find(handle));}});};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options)){options=options.toLowerCase();walker(this);return stack.each(function(){var self=$(this);if(options=='destroy'){tidy(self,'ifDestroyed');}else{operate(self,true,options);}
if($.isFunction(fire)){fire();}});}else if(typeof options=='object'||!options){var settings=$.extend({checkedClass:_checked,disabledClass:_disabled,indeterminateClass:_indeterminate,labelHover:true,aria:false},options),selector=settings.handle,hoverClass=settings.hoverClass||'hover',focusClass=settings.focusClass||'focus',activeClass=settings.activeClass||'active',labelHover=!!settings.labelHover,labelHoverClass=settings.labelHoverClass||'hover',area=(''+settings.increaseArea).replace('%','')|0;if(selector==_checkbox||selector==_radio){handle='input[type="'+selector+'"]';}
if(area<-50){area=-50;}
walker(this);return stack.each(function(){var self=$(this);tidy(self);var node=this,id=node.id,offset=-area+'%',size=100+(area*2)+'%',layer={position:'absolute',top:offset,left:offset,display:'block',width:size,height:size,margin:0,padding:0,background:'#fff',border:0,opacity:0},hide=_mobile?{position:'absolute',visibility:'hidden'}:area?layer:{position:'absolute',opacity:0},className=node[_type]==_checkbox?settings.checkboxClass||'i'+_checkbox:settings.radioClass||'i'+_radio,label=$(_label+'[for="'+id+'"]').add(self.closest(_label)),aria=!!settings.aria,ariaID=_iCheck+'-'+Math.random().toString(36).replace('0.',''),parent='<div class="'+className+'" '+(aria?'role="'+node[_type]+'" ':''),helper;if(label.length&&aria){label.each(function(){parent+='aria-labelledby="';if(this.id){parent+=this.id;}else{this.id=ariaID;parent+=ariaID;}
parent+='"';});}
parent=self.wrap(parent+'/>')[_callback]('ifCreated').parent().append(settings.insert);helper=$('<ins class="'+_iCheckHelper+'"/>').css(layer).appendTo(parent);self.data(_iCheck,{o:settings,s:self.attr('style')}).css(hide);!!settings.inheritClass&&parent[_add](node.className||'');!!settings.inheritID&&id&&parent.attr('id',_iCheck+'-'+id);parent.css('position')=='static'&&parent.css('position','relative');operate(self,true,_update);if(label.length){label.on(_click+'.i mouseover.i mouseout.i '+_touch,function(event){var type=event[_type],item=$(this);if(!node[_disabled]){if(type==_click){if($(event.target).is('a')){return;}
operate(self,false,true);}else if(labelHover){if(/ut|nd/.test(type)){parent[_remove](hoverClass);item[_remove](labelHoverClass);}else{parent[_add](hoverClass);item[_add](labelHoverClass);}}
if(_mobile){event.stopPropagation();}else{return false;}}});}
self.on(_click+'.i focus.i blur.i keyup.i keydown.i keypress.i',function(event){var type=event[_type],key=event.keyCode;if(type==_click){return false;}else if(type=='keydown'&&key==32){if(!(node[_type]==_radio&&node[_checked])){if(node[_checked]){off(self,_checked);}else{on(self,_checked);}}
return false;}else if(type=='keyup'&&node[_type]==_radio){!node[_checked]&&on(self,_checked);}else if(/us|ur/.test(type)){parent[type=='blur'?_remove:_add](focusClass);}});helper.on(_click+' mousedown mouseup mouseover mouseout '+_touch,function(event){var type=event[_type],toggle=/wn|up/.test(type)?activeClass:hoverClass;if(!node[_disabled]){if(type==_click){operate(self,false,true);}else{if(/wn|er|in/.test(type)){parent[_add](toggle);}else{parent[_remove](toggle+' '+activeClass);}
if(label.length&&labelHover&&toggle==hoverClass){label[/ut|nd/.test(type)?_remove:_add](labelHoverClass);}}
if(_mobile){event.stopPropagation();}else{return false;}}});});}else{return this;}};function operate(input,direct,method){var node=input[0],state=/er/.test(method)?_indeterminate:/bl/.test(method)?_disabled:_checked,active=method==_update?{checked:node[_checked],disabled:node[_disabled],indeterminate:input.attr(_indeterminate)=='true'||input.attr(_determinate)=='false'}:node[state];if(/^(ch|di|in)/.test(method)&&!active){on(input,state);}else if(/^(un|en|de)/.test(method)&&active){off(input,state);}else if(method==_update){for(var state in active){if(active[state]){on(input,state,true);}else{off(input,state,true);}}}else if(!direct||method=='toggle'){if(!direct){input[_callback]('ifClicked');}
if(active){if(node[_type]!==_radio){off(input,state);}}else{on(input,state);}}}
function on(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:'enabled',regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==true){if(!keep&&state==_checked&&node[_type]==_radio&&node.name){var form=input.closest('form'),inputs='input[name="'+node.name+'"]';inputs=form.length?form.find(inputs):$(inputs);inputs.each(function(){if(this!==node&&$(this).data(_iCheck)){off($(this),state);}});}
if(indeterminate){node[state]=true;if(node[_checked]){off(input,_checked,'force');}}else{if(!keep){node[state]=true;}
if(checked&&node[_indeterminate]){off(input,_indeterminate,false);}}
callbacks(input,checked,state,keep);}
if(node[_disabled]&&!!option(input,_cursor,true)){parent.find('.'+_iCheckHelper).css(_cursor,'default');}
parent[_add](specific||option(input,state)||'');disabled?parent.attr('aria-disabled','true'):parent.attr('aria-checked',indeterminate?'mixed':'true');parent[_remove](regular||option(input,callback)||'');}
function off(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:'enabled',regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==false){if(indeterminate||!keep||keep=='force'){node[state]=false;}
callbacks(input,checked,callback,keep);}
if(!node[_disabled]&&!!option(input,_cursor,true)){parent.find('.'+_iCheckHelper).css(_cursor,'pointer');}
parent[_remove](specific||option(input,state)||'');disabled?parent.attr('aria-disabled','false'):parent.attr('aria-checked','false');parent[_add](regular||option(input,callback)||'');}
function tidy(input,callback){if(input.data(_iCheck)){input.parent().html(input.attr('style',input.data(_iCheck).s||''));if(callback){input[_callback](callback);}
input.off('.i').unwrap();$(_label+'[for="'+input[0].id+'"]').add(input.closest(_label)).off('.i');}}
function option(input,state,regular){if(input.data(_iCheck)){return input.data(_iCheck).o[state+(regular?'':'Class')];}}
function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function callbacks(input,checked,callback,keep){if(!keep){if(checked){input[_callback]('ifToggled');}
input[_callback]('ifChanged')[_callback]('if'+capitalize(callback));}}})(window.jQuery||window.Zepto);/*!
 * Bootstrap Colorpicker v2.5.1
 * https://itsjavi.com/bootstrap-colorpicker/
 *
 * Originally written by (c) 2012 Stefan Petre
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 *
 */
(function(root,factory){if(typeof define==='function'&&define.amd){define(["jquery"],function(jq){return(factory(jq));});}else if(typeof exports==='object'){module.exports=factory(require("jquery"));}else if(jQuery&&!jQuery.fn.colorpicker){factory(jQuery);}}(this,function($){'use strict';var Color=function(val,predefinedColors,fallbackColor,fallbackFormat,hexNumberSignPrefix){this.fallbackValue=fallbackColor?(fallbackColor&&(typeof fallbackColor.h!=='undefined')?fallbackColor:this.value={h:0,s:0,b:0,a:1}):null;this.fallbackFormat=fallbackFormat?fallbackFormat:'rgba';this.hexNumberSignPrefix=hexNumberSignPrefix===true;this.value=this.fallbackValue;this.origFormat=null;this.predefinedColors=predefinedColors?predefinedColors:{};this.colors=$.extend({},Color.webColors,this.predefinedColors);if(val){if(typeof val.h!=='undefined'){this.value=val;}else{this.setColor(String(val));}}
if(!this.value){this.value={h:0,s:0,b:0,a:1};}};Color.webColors={"aliceblue":"f0f8ff","antiquewhite":"faebd7","aqua":"00ffff","aquamarine":"7fffd4","azure":"f0ffff","beige":"f5f5dc","bisque":"ffe4c4","black":"000000","blanchedalmond":"ffebcd","blue":"0000ff","blueviolet":"8a2be2","brown":"a52a2a","burlywood":"deb887","cadetblue":"5f9ea0","chartreuse":"7fff00","chocolate":"d2691e","coral":"ff7f50","cornflowerblue":"6495ed","cornsilk":"fff8dc","crimson":"dc143c","cyan":"00ffff","darkblue":"00008b","darkcyan":"008b8b","darkgoldenrod":"b8860b","darkgray":"a9a9a9","darkgreen":"006400","darkkhaki":"bdb76b","darkmagenta":"8b008b","darkolivegreen":"556b2f","darkorange":"ff8c00","darkorchid":"9932cc","darkred":"8b0000","darksalmon":"e9967a","darkseagreen":"8fbc8f","darkslateblue":"483d8b","darkslategray":"2f4f4f","darkturquoise":"00ced1","darkviolet":"9400d3","deeppink":"ff1493","deepskyblue":"00bfff","dimgray":"696969","dodgerblue":"1e90ff","firebrick":"b22222","floralwhite":"fffaf0","forestgreen":"228b22","fuchsia":"ff00ff","gainsboro":"dcdcdc","ghostwhite":"f8f8ff","gold":"ffd700","goldenrod":"daa520","gray":"808080","green":"008000","greenyellow":"adff2f","honeydew":"f0fff0","hotpink":"ff69b4","indianred":"cd5c5c","indigo":"4b0082","ivory":"fffff0","khaki":"f0e68c","lavender":"e6e6fa","lavenderblush":"fff0f5","lawngreen":"7cfc00","lemonchiffon":"fffacd","lightblue":"add8e6","lightcoral":"f08080","lightcyan":"e0ffff","lightgoldenrodyellow":"fafad2","lightgrey":"d3d3d3","lightgreen":"90ee90","lightpink":"ffb6c1","lightsalmon":"ffa07a","lightseagreen":"20b2aa","lightskyblue":"87cefa","lightslategray":"778899","lightsteelblue":"b0c4de","lightyellow":"ffffe0","lime":"00ff00","limegreen":"32cd32","linen":"faf0e6","magenta":"ff00ff","maroon":"800000","mediumaquamarine":"66cdaa","mediumblue":"0000cd","mediumorchid":"ba55d3","mediumpurple":"9370d8","mediumseagreen":"3cb371","mediumslateblue":"7b68ee","mediumspringgreen":"00fa9a","mediumturquoise":"48d1cc","mediumvioletred":"c71585","midnightblue":"191970","mintcream":"f5fffa","mistyrose":"ffe4e1","moccasin":"ffe4b5","navajowhite":"ffdead","navy":"000080","oldlace":"fdf5e6","olive":"808000","olivedrab":"6b8e23","orange":"ffa500","orangered":"ff4500","orchid":"da70d6","palegoldenrod":"eee8aa","palegreen":"98fb98","paleturquoise":"afeeee","palevioletred":"d87093","papayawhip":"ffefd5","peachpuff":"ffdab9","peru":"cd853f","pink":"ffc0cb","plum":"dda0dd","powderblue":"b0e0e6","purple":"800080","red":"ff0000","rosybrown":"bc8f8f","royalblue":"4169e1","saddlebrown":"8b4513","salmon":"fa8072","sandybrown":"f4a460","seagreen":"2e8b57","seashell":"fff5ee","sienna":"a0522d","silver":"c0c0c0","skyblue":"87ceeb","slateblue":"6a5acd","slategray":"708090","snow":"fffafa","springgreen":"00ff7f","steelblue":"4682b4","tan":"d2b48c","teal":"008080","thistle":"d8bfd8","tomato":"ff6347","turquoise":"40e0d0","violet":"ee82ee","wheat":"f5deb3","white":"ffffff","whitesmoke":"f5f5f5","yellow":"ffff00","yellowgreen":"9acd32","transparent":"transparent"};Color.prototype={constructor:Color,colors:{},predefinedColors:{},getValue:function(){return this.value;},setValue:function(val){this.value=val;},_sanitizeNumber:function(val){if(typeof val==='number'){return val;}
if(isNaN(val)||(val===null)||(val==='')||(val===undefined)){return 1;}
if(val===''){return 0;}
if(typeof val.toLowerCase!=='undefined'){if(val.match(/^\./)){val="0"+val;}
return Math.ceil(parseFloat(val)*100)/100;}
return 1;},isTransparent:function(strVal){if(!strVal||!(typeof strVal==='string'||strVal instanceof String)){return false;}
strVal=strVal.toLowerCase().trim();return(strVal==='transparent')||(strVal.match(/#?00000000/))||(strVal.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/));},rgbaIsTransparent:function(rgba){return((rgba.r===0)&&(rgba.g===0)&&(rgba.b===0)&&(rgba.a===0));},setColor:function(strVal){strVal=strVal.toLowerCase().trim();if(strVal){if(this.isTransparent(strVal)){this.value={h:0,s:0,b:0,a:0};return true;}else{var parsedColor=this.parse(strVal);if(parsedColor){this.value=this.value={h:parsedColor.h,s:parsedColor.s,b:parsedColor.b,a:parsedColor.a};if(!this.origFormat){this.origFormat=parsedColor.format;}}else if(this.fallbackValue){this.value=this.fallbackValue;}}}
return false;},setHue:function(h){this.value.h=1-h;},setSaturation:function(s){this.value.s=s;},setBrightness:function(b){this.value.b=1-b;},setAlpha:function(a){this.value.a=Math.round((parseInt((1-a)*100,10)/100)*100)/100;},toRGB:function(h,s,b,a){if(arguments.length===0){h=this.value.h;s=this.value.s;b=this.value.b;a=this.value.a;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=b*s;X=C*(1-Math.abs(h%2-1));R=G=B=b-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return{r:Math.round(R*255),g:Math.round(G*255),b:Math.round(B*255),a:a};},toHex:function(h,s,b,a){if(arguments.length===0){h=this.value.h;s=this.value.s;b=this.value.b;a=this.value.a;}
var rgb=this.toRGB(h,s,b,a);if(this.rgbaIsTransparent(rgb)){return'transparent';}
var hexStr=(this.hexNumberSignPrefix?'#':'')+((1<<24)+
(parseInt(rgb.r)<<16)+
(parseInt(rgb.g)<<8)+
parseInt(rgb.b)).toString(16).slice(1);return hexStr;},toHSL:function(h,s,b,a){if(arguments.length===0){h=this.value.h;s=this.value.s;b=this.value.b;a=this.value.a;}
var H=h,L=(2-s)*b,S=s*b;if(L>0&&L<=1){S/=L;}else{S/=2-L;}
L/=2;if(S>1){S=1;}
return{h:isNaN(H)?0:H,s:isNaN(S)?0:S,l:isNaN(L)?0:L,a:isNaN(a)?0:a};},toAlias:function(r,g,b,a){var c,rgb=(arguments.length===0)?this.toHex():this.toHex(r,g,b,a);var original=this.origFormat==='alias'?rgb:this.toString(this.origFormat,false);for(var alias in this.colors){c=this.colors[alias].toLowerCase().trim();if((c===rgb)||(c===original)){return alias;}}
return false;},RGBtoHSB:function(r,g,b,a){r/=255;g/=255;b/=255;var H,S,V,C;V=Math.max(r,g,b);C=V-Math.min(r,g,b);H=(C===0?null:V===r?(g-b)/C:V===g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C===0?0:C/V;return{h:this._sanitizeNumber(H),s:S,b:V,a:this._sanitizeNumber(a)};},HueToRGB:function(p,q,h){if(h<0){h+=1;}else if(h>1){h-=1;}
if((h*6)<1){return p+(q-p)*h*6;}else if((h*2)<1){return q;}else if((h*3)<2){return p+(q-p)*((2/3)-h)*6;}else{return p;}},HSLtoRGB:function(h,s,l,a){if(s<0){s=0;}
var q;if(l<=0.5){q=l*(1+s);}else{q=l+s-(l*s);}
var p=2*l-q;var tr=h+(1/3);var tg=h;var tb=h-(1/3);var r=Math.round(this.HueToRGB(p,q,tr)*255);var g=Math.round(this.HueToRGB(p,q,tg)*255);var b=Math.round(this.HueToRGB(p,q,tb)*255);return[r,g,b,this._sanitizeNumber(a)];},parse:function(strVal){if(arguments.length===0){return false;}
var that=this,result=false,isAlias=(typeof this.colors[strVal]!=='undefined'),values,format;if(isAlias){strVal=this.colors[strVal].toLowerCase().trim();}
$.each(this.stringParsers,function(i,parser){var match=parser.re.exec(strVal);values=match&&parser.parse.apply(that,[match]);if(values){result={};format=(isAlias?'alias':(parser.format?parser.format:that.getValidFallbackFormat()));if(format.match(/hsla?/)){result=that.RGBtoHSB.apply(that,that.HSLtoRGB.apply(that,values));}else{result=that.RGBtoHSB.apply(that,values);}
if(result instanceof Object){result.format=format;}
return false;}
return true;});return result;},getValidFallbackFormat:function(){var formats=['rgba','rgb','hex','hsla','hsl'];if(this.origFormat&&(formats.indexOf(this.origFormat)!==-1)){return this.origFormat;}
if(this.fallbackFormat&&(formats.indexOf(this.fallbackFormat)!==-1)){return this.fallbackFormat;}
return'rgba';},toString:function(format,translateAlias){format=format||this.origFormat||this.fallbackFormat;translateAlias=translateAlias||false;var c=false;switch(format){case'rgb':{c=this.toRGB();if(this.rgbaIsTransparent(c)){return'transparent';}
return'rgb('+c.r+','+c.g+','+c.b+')';}
break;case'rgba':{c=this.toRGB();return'rgba('+c.r+','+c.g+','+c.b+','+c.a+')';}
break;case'hsl':{c=this.toHSL();return'hsl('+Math.round(c.h*360)+','+Math.round(c.s*100)+'%,'+Math.round(c.l*100)+'%)';}
break;case'hsla':{c=this.toHSL();return'hsla('+Math.round(c.h*360)+','+Math.round(c.s*100)+'%,'+Math.round(c.l*100)+'%,'+c.a+')';}
break;case'hex':{return this.toHex();}
break;case'alias':{c=this.toAlias();if(c===false){return this.toString(this.getValidFallbackFormat());}
if(translateAlias&&!(c in Color.webColors)&&(c in this.predefinedColors)){return this.predefinedColors[c];}
return c;}
default:{return c;}
break;}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:'rgb',parse:function(execResult){return[execResult[1],execResult[2],execResult[3],1];}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:'rgb',parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],1];}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:'rgba',parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:'rgba',parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]];}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:'hsl',parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]];}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:'hsla',parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]];}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:'hex',parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16),1];}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:'hex',parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16),1];}}],colorNameToHex:function(name){if(typeof this.colors[name.toLowerCase()]!=='undefined'){return this.colors[name.toLowerCase()];}
return false;}};var defaults={horizontal:false,inline:false,color:false,format:false,input:'input',container:false,component:'.add-on, .input-group-addon',fallbackColor:false,fallbackFormat:'hex',hexNumberSignPrefix:true,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:'setSaturation',callTop:'setBrightness'},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:'setHue'},alpha:{maxLeft:0,maxTop:100,callLeft:false,callTop:'setAlpha'}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:'setSaturation',callTop:'setBrightness'},hue:{maxLeft:100,maxTop:0,callLeft:'setHue',callTop:false},alpha:{maxLeft:100,maxTop:0,callLeft:'setAlpha',callTop:false}},template:'<div class="colorpicker dropdown-menu">'+'<div class="colorpicker-saturation"><i><b></b></i></div>'+'<div class="colorpicker-hue"><i></i></div>'+'<div class="colorpicker-alpha"><i></i></div>'+'<div class="colorpicker-color"><div /></div>'+'<div class="colorpicker-selectors"></div>'+'</div>',align:'right',customClass:null,colorSelectors:null};var Colorpicker=function(element,options){this.element=$(element).addClass('colorpicker-element');this.options=$.extend(true,{},defaults,this.element.data(),options);this.component=this.options.component;this.component=(this.component!==false)?this.element.find(this.component):false;if(this.component&&(this.component.length===0)){this.component=false;}
this.container=(this.options.container===true)?this.element:this.options.container;this.container=(this.container!==false)?$(this.container):false;this.input=this.element.is('input')?this.element:(this.options.input?this.element.find(this.options.input):false);if(this.input&&(this.input.length===0)){this.input=false;}
this.color=this.createColor(this.options.color!==false?this.options.color:this.getValue());this.format=this.options.format!==false?this.options.format:this.color.origFormat;if(this.options.color!==false){this.updateInput(this.color);this.updateData(this.color);}
var $picker=this.picker=$(this.options.template);if(this.options.customClass){$picker.addClass(this.options.customClass);}
if(this.options.inline){$picker.addClass('colorpicker-inline colorpicker-visible');}else{$picker.addClass('colorpicker-hidden');}
if(this.options.horizontal){$picker.addClass('colorpicker-horizontal');}
if((['rgba','hsla','alias'].indexOf(this.format)!==-1)||this.options.format===false||this.getValue()==='transparent'){$picker.addClass('colorpicker-with-alpha');}
if(this.options.align==='right'){$picker.addClass('colorpicker-right');}
if(this.options.inline===true){$picker.addClass('colorpicker-no-arrow');}
if(this.options.colorSelectors){var colorpicker=this,selectorsContainer=colorpicker.picker.find('.colorpicker-selectors');if(selectorsContainer.length>0){$.each(this.options.colorSelectors,function(name,color){var $btn=$('<i />').addClass('colorpicker-selectors-color').css('background-color',color).data('class',name).data('alias',name);$btn.on('mousedown.colorpicker touchstart.colorpicker',function(event){event.preventDefault();colorpicker.setValue(colorpicker.format==='alias'?$(this).data('alias'):$(this).css('background-color'));});selectorsContainer.append($btn);});selectorsContainer.show().addClass('colorpicker-visible');}}
$picker.on('mousedown.colorpicker touchstart.colorpicker',$.proxy(function(e){if(e.target===e.currentTarget){e.preventDefault();}},this));$picker.find('.colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha').on('mousedown.colorpicker touchstart.colorpicker',$.proxy(this.mousedown,this));$picker.appendTo(this.container?this.container:$('body'));if(this.input!==false){this.input.on({'keyup.colorpicker':$.proxy(this.keyup,this)});this.input.on({'change.colorpicker':$.proxy(this.change,this)});if(this.component===false){this.element.on({'focus.colorpicker':$.proxy(this.show,this)});}
if(this.options.inline===false){this.element.on({'focusout.colorpicker':$.proxy(this.hide,this)});}}
if(this.component!==false){this.component.on({'click.colorpicker':$.proxy(this.show,this)});}
if((this.input===false)&&(this.component===false)){this.element.on({'click.colorpicker':$.proxy(this.show,this)});}
if((this.input!==false)&&(this.component!==false)&&(this.input.attr('type')==='color')){this.input.on({'click.colorpicker':$.proxy(this.show,this),'focus.colorpicker':$.proxy(this.show,this)});}
this.update();$($.proxy(function(){this.element.trigger('create');},this));};Colorpicker.Color=Color;Colorpicker.prototype={constructor:Colorpicker,destroy:function(){this.picker.remove();this.element.removeData('colorpicker','color').off('.colorpicker');if(this.input!==false){this.input.off('.colorpicker');}
if(this.component!==false){this.component.off('.colorpicker');}
this.element.removeClass('colorpicker-element');this.element.trigger({type:'destroy'});},reposition:function(){if(this.options.inline!==false||this.options.container){return false;}
var type=this.container&&this.container[0]!==window.document.body?'position':'offset';var element=this.component||this.element;var offset=element[type]();if(this.options.align==='right'){offset.left-=this.picker.outerWidth()-element.outerWidth();}
this.picker.css({top:offset.top+element.outerHeight(),left:offset.left});},show:function(e){if(this.isDisabled()){return;}
this.picker.addClass('colorpicker-visible').removeClass('colorpicker-hidden');this.reposition();$(window).on('resize.colorpicker',$.proxy(this.reposition,this));if(e&&(!this.hasInput()||this.input.attr('type')==='color')){if(e.stopPropagation&&e.preventDefault){e.stopPropagation();e.preventDefault();}}
if((this.component||!this.input)&&(this.options.inline===false)){$(window.document).on({'mousedown.colorpicker':$.proxy(this.hide,this)});}
this.element.trigger({type:'showPicker',color:this.color});},hide:function(e){if((typeof e!=='undefined')&&e.target){if($(e.currentTarget).parents('.colorpicker').length>0||$(e.target).parents('.colorpicker').length>0){return false;}}
this.picker.addClass('colorpicker-hidden').removeClass('colorpicker-visible');$(window).off('resize.colorpicker',this.reposition);$(window.document).off({'mousedown.colorpicker':this.hide});this.update();this.element.trigger({type:'hidePicker',color:this.color});},updateData:function(val){val=val||this.color.toString(this.format,false);this.element.data('color',val);return val;},updateInput:function(val){val=val||this.color.toString(this.format,false);if(this.input!==false){this.input.prop('value',val);this.input.trigger('change');}
return val;},updatePicker:function(val){if(typeof val!=='undefined'){this.color=this.createColor(val);}
var sl=(this.options.horizontal===false)?this.options.sliders:this.options.slidersHorz;var icns=this.picker.find('i');if(icns.length===0){return;}
if(this.options.horizontal===false){sl=this.options.sliders;icns.eq(1).css('top',sl.hue.maxTop*(1-this.color.value.h)).end().eq(2).css('top',sl.alpha.maxTop*(1-this.color.value.a));}else{sl=this.options.slidersHorz;icns.eq(1).css('left',sl.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css('left',sl.alpha.maxLeft*(1-this.color.value.a));}
icns.eq(0).css({'top':sl.saturation.maxTop-this.color.value.b*sl.saturation.maxTop,'left':this.color.value.s*sl.saturation.maxLeft});this.picker.find('.colorpicker-saturation').css('backgroundColor',(this.options.hexNumberSignPrefix?'':'#')+this.color.toHex(this.color.value.h,1,1,1));this.picker.find('.colorpicker-alpha').css('backgroundColor',(this.options.hexNumberSignPrefix?'':'#')+this.color.toHex());this.picker.find('.colorpicker-color, .colorpicker-color div').css('backgroundColor',this.color.toString(this.format,true));return val;},updateComponent:function(val){var color;if(typeof val!=='undefined'){color=this.createColor(val);}else{color=this.color;}
if(this.component!==false){var icn=this.component.find('i').eq(0);if(icn.length>0){icn.css({'backgroundColor':color.toString(this.format,true)});}else{this.component.css({'backgroundColor':color.toString(this.format,true)});}}
return color.toString(this.format,false);},update:function(force){var val;if((this.getValue(false)!==false)||(force===true)){val=this.updateComponent();this.updateInput(val);this.updateData(val);this.updatePicker();}
return val;},setValue:function(val){this.color=this.createColor(val);this.update(true);this.element.trigger({type:'changeColor',color:this.color,value:val});},createColor:function(val){return new Color(val?val:null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix);},getValue:function(defaultValue){defaultValue=(typeof defaultValue==='undefined')?this.options.fallbackColor:defaultValue;var val;if(this.hasInput()){val=this.input.val();}else{val=this.element.data('color');}
if((val===undefined)||(val==='')||(val===null)){val=defaultValue;}
return val;},hasInput:function(){return(this.input!==false);},isDisabled:function(){if(this.hasInput()){return(this.input.prop('disabled')===true);}
return false;},disable:function(){if(this.hasInput()){this.input.prop('disabled',true);this.element.trigger({type:'disable',color:this.color,value:this.getValue()});return true;}
return false;},enable:function(){if(this.hasInput()){this.input.prop('disabled',false);this.element.trigger({type:'enable',color:this.color,value:this.getValue()});return true;}
return false;},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){if(!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches){e.pageX=e.originalEvent.touches[0].pageX;e.pageY=e.originalEvent.touches[0].pageY;}
e.stopPropagation();e.preventDefault();var target=$(e.target);var zone=target.closest('div');var sl=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!zone.is('.colorpicker')){if(zone.is('.colorpicker-saturation')){this.currentSlider=$.extend({},sl.saturation);}else if(zone.is('.colorpicker-hue')){this.currentSlider=$.extend({},sl.hue);}else if(zone.is('.colorpicker-alpha')){this.currentSlider=$.extend({},sl.alpha);}else{return false;}
var offset=zone.offset();this.currentSlider.guide=zone.find('i')[0].style;this.currentSlider.left=e.pageX-offset.left;this.currentSlider.top=e.pageY-offset.top;this.mousePointer={left:e.pageX,top:e.pageY};$(window.document).on({'mousemove.colorpicker':$.proxy(this.mousemove,this),'touchmove.colorpicker':$.proxy(this.mousemove,this),'mouseup.colorpicker':$.proxy(this.mouseup,this),'touchend.colorpicker':$.proxy(this.mouseup,this)}).trigger('mousemove');}
return false;},mousemove:function(e){if(!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches){e.pageX=e.originalEvent.touches[0].pageX;e.pageY=e.originalEvent.touches[0].pageY;}
e.stopPropagation();e.preventDefault();var left=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left)));var top=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));this.currentSlider.guide.left=left+'px';this.currentSlider.guide.top=top+'px';if(this.currentSlider.callLeft){this.color[this.currentSlider.callLeft].call(this.color,left/this.currentSlider.maxLeft);}
if(this.currentSlider.callTop){this.color[this.currentSlider.callTop].call(this.color,top/this.currentSlider.maxTop);}
if(this.options.format===false&&(this.currentSlider.callTop==='setAlpha'||this.currentSlider.callLeft==='setAlpha')){if(this.color.value.a!==1){this.format='rgba';this.color.origFormat='rgba';}
else{this.format='hex';this.color.origFormat='hex';}}
this.update(true);this.element.trigger({type:'changeColor',color:this.color});return false;},mouseup:function(e){e.stopPropagation();e.preventDefault();$(window.document).off({'mousemove.colorpicker':this.mousemove,'touchmove.colorpicker':this.mousemove,'mouseup.colorpicker':this.mouseup,'touchend.colorpicker':this.mouseup});return false;},change:function(e){this.keyup(e);},keyup:function(e){if((e.keyCode===38)){if(this.color.value.a<1){this.color.value.a=Math.round((this.color.value.a+0.01)*100)/100;}
this.update(true);}else if((e.keyCode===40)){if(this.color.value.a>0){this.color.value.a=Math.round((this.color.value.a-0.01)*100)/100;}
this.update(true);}else{this.color=this.createColor(this.input.val());if(this.color.origFormat&&this.options.format===false){this.format=this.color.origFormat;}
if(this.getValue(false)!==false){this.updateData();this.updateComponent();this.updatePicker();}}
this.element.trigger({type:'changeColor',color:this.color,value:this.input.val()});}};$.colorpicker=Colorpicker;$.fn.colorpicker=function(option){var apiArgs=Array.prototype.slice.call(arguments,1),isSingleElement=(this.length===1),returnValue=null;var $jq=this.each(function(){var $this=$(this),inst=$this.data('colorpicker'),options=((typeof option==='object')?option:{});if(!inst){inst=new Colorpicker(this,options);$this.data('colorpicker',inst);}
if(typeof option==='string'){if($.isFunction(inst[option])){returnValue=inst[option].apply(inst,apiArgs);}else{if(apiArgs.length){inst[option]=apiArgs[0];}
returnValue=inst[option];}}else{returnValue=$this;}});return isSingleElement?returnValue:$jq;};$.fn.colorpicker.constructor=Colorpicker;}));/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function(jQuery){var S2=(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var S2=jQuery.fn.select2.amd;}
var S2;(function(){if(!S2||!S2.requirejs){if(!S2){S2={};}else{require=S2;}
var requirejs,require,define;(function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop);}
function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=(map&&map['*'])||{};if(name&&name.charAt(0)==="."){if(baseName){name=name.split('/');lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,'');}
name=baseParts.slice(0,baseParts.length-1).concat(name);for(i=0;i<name.length;i+=1){part=name[i];if(part==="."){name.splice(i,1);i-=1;}else if(part===".."){if(i===1&&(name[2]==='..'||name[0]==='..')){break;}else if(i>0){name.splice(i-1,2);i-=2;}}}
name=name.join("/");}else if(name.indexOf('./')===0){name=name.substring(2);}}
if((baseParts||starMap)&&map){nameParts=name.split('/');for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join('/')];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break;}}}}
if(foundMap){break;}
if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i;}}
if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI;}
if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join('/');}}
return name;}
function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);if(typeof args[0]!=='string'&&args.length===1){args.push(null);}
return req.apply(undef,args.concat([relName,forceSync]));};}
function makeNormalize(relName){return function(name){return normalize(name,relName);};}
function makeLoad(depName){return function(value){defined[depName]=value;};}
function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=true;main.apply(undef,args);}
if(!hasProp(defined,name)&&!hasProp(defining,name)){throw new Error('No '+name);}
return defined[name];}
function splitPrefix(name){var prefix,index=name?name.indexOf('!'):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length);}
return[prefix,name];}
makeMap=function(name,relName){var plugin,parts=splitPrefix(name),prefix=parts[0];name=parts[1];if(prefix){prefix=normalize(prefix,relName);plugin=callDep(prefix);}
if(prefix){if(plugin&&plugin.normalize){name=plugin.normalize(name,makeNormalize(relName));}else{name=normalize(name,relName);}}else{name=normalize(name,relName);parts=splitPrefix(name);prefix=parts[0];name=parts[1];if(prefix){plugin=callDep(prefix);}}
return{f:prefix?prefix+'!'+name:name,n:name,pr:prefix,p:plugin};};function makeConfig(name){return function(){return(config&&config.config&&config.config[name])||{};};}
handlers={require:function(name){return makeRequire(name);},exports:function(name){var e=defined[name];if(typeof e!=='undefined'){return e;}else{return(defined[name]={});}},module:function(name){return{id:name,uri:'',exports:defined[name],config:makeConfig(name)};}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,args=[],callbackType=typeof callback,usingExports;relName=relName||name;if(callbackType==='undefined'||callbackType==='function'){deps=!deps.length&&callback.length?['require','exports','module']:deps;for(i=0;i<deps.length;i+=1){map=makeMap(deps[i],relName);depName=map.f;if(depName==="require"){args[i]=handlers.require(name);}else if(depName==="exports"){args[i]=handlers.exports(name);usingExports=true;}else if(depName==="module"){cjsModule=args[i]=handlers.module(name);}else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName)){args[i]=callDep(depName);}else if(map.p){map.p.load(map.n,makeRequire(relName,true),makeLoad(depName),{});args[i]=defined[depName];}else{throw new Error(name+' missing '+depName);}}
ret=callback?callback.apply(defined[name],args):undefined;if(name){if(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]){defined[name]=cjsModule.exports;}else if(ret!==undef||!usingExports){defined[name]=ret;}}}else if(name){defined[name]=callback;}};requirejs=require=req=function(deps,callback,relName,forceSync,alt){if(typeof deps==="string"){if(handlers[deps]){return handlers[deps](callback);}
return callDep(makeMap(deps,callback).f);}else if(!deps.splice){config=deps;if(config.deps){req(config.deps,config.callback);}
if(!callback){return;}
if(callback.splice){deps=callback;callback=relName;relName=null;}else{deps=undef;}}
callback=callback||function(){};if(typeof relName==='function'){relName=forceSync;forceSync=alt;}
if(forceSync){main(undef,deps,callback,relName);}else{setTimeout(function(){main(undef,deps,callback,relName);},4);}
return req;};req.config=function(cfg){return req(cfg);};requirejs._defined=defined;define=function(name,deps,callback){if(typeof name!=='string'){throw new Error('See almond README: incorrect module build, no module name');}
if(!deps.splice){callback=deps;deps=[];}
if(!hasProp(defined,name)&&!hasProp(waiting,name)){waiting[name]=[name,deps,callback];}};define.amd={jQuery:true};}());S2.requirejs=requirejs;S2.require=require;S2.define=define;}}());S2.define("almond",function(){});S2.define('jquery',[],function(){var _$=jQuery||$;if(_$==null&&console&&console.error){console.error('Select2: An instance of jQuery or a jQuery-compatible library was not '+'found. Make sure that you are including jQuery before Select2 on your '+'web page.');}
return _$;});S2.define('select2/utils',['jquery'],function($){var Utils={};Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass;}
for(var key in SuperClass){if(__hasProp.call(SuperClass,key)){ChildClass[key]=SuperClass[key];}}
BaseConstructor.prototype=SuperClass.prototype;ChildClass.prototype=new BaseConstructor();ChildClass.__super__=SuperClass.prototype;return ChildClass;};function getMethods(theClass){var proto=theClass.prototype;var methods=[];for(var methodName in proto){var m=proto[methodName];if(typeof m!=='function'){continue;}
if(methodName==='constructor'){continue;}
methods.push(methodName);}
return methods;}
Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass);var superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift;var argCount=DecoratorClass.prototype.constructor.length;var calledConstructor=SuperClass.prototype.constructor;if(argCount>0){unshift.call(arguments,SuperClass.prototype.constructor);calledConstructor=DecoratorClass.prototype.constructor;}
calledConstructor.apply(this,arguments);}
DecoratorClass.displayName=SuperClass.displayName;function ctr(){this.constructor=DecoratedClass;}
DecoratedClass.prototype=new ctr();for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod];}
var calledMethod=function(methodName){var originalMethod=function(){};if(methodName in DecoratedClass.prototype){originalMethod=DecoratedClass.prototype[methodName];}
var decoratedMethod=DecoratorClass.prototype[methodName];return function(){var unshift=Array.prototype.unshift;unshift.call(arguments,originalMethod);return decoratedMethod.apply(this,arguments);};};for(var d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod);}
return DecoratedClass;};var Observable=function(){this.listeners={};};Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{};if(event in this.listeners){this.listeners[event].push(callback);}else{this.listeners[event]=[callback];}};Observable.prototype.trigger=function(event){var slice=Array.prototype.slice;var params=slice.call(arguments,1);this.listeners=this.listeners||{};if(params==null){params=[];}
if(params.length===0){params.push({});}
params[0]._type=event;if(event in this.listeners){this.invoke(this.listeners[event],slice.call(arguments,1));}
if('*'in this.listeners){this.invoke(this.listeners['*'],arguments);}};Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++){listeners[i].apply(this,params);}};Utils.Observable=Observable;Utils.generateChars=function(length){var chars='';for(var i=0;i<length;i++){var randomChar=Math.floor(Math.random()*36);chars+=randomChar.toString(36);}
return chars;};Utils.bind=function(func,context){return function(){func.apply(context,arguments);};};Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split('-');var dataLevel=data;if(keys.length===1){continue;}
for(var k=0;k<keys.length;k++){var key=keys[k];key=key.substring(0,1).toLowerCase()+key.substring(1);if(!(key in dataLevel)){dataLevel[key]={};}
if(k==keys.length-1){dataLevel[key]=data[originalKey];}
dataLevel=dataLevel[key];}
delete data[originalKey];}
return data;};Utils.hasScroll=function(index,el){var $el=$(el);var overflowX=el.style.overflowX;var overflowY=el.style.overflowY;if(overflowX===overflowY&&(overflowY==='hidden'||overflowY==='visible')){return false;}
if(overflowX==='scroll'||overflowY==='scroll'){return true;}
return($el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth);};Utils.escapeMarkup=function(markup){var replaceMap={'\\':'&#92;','&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;','/':'&#47;'};if(typeof markup!=='string'){return markup;}
return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match];});};Utils.appendMany=function($element,$nodes){if($.fn.jquery.substr(0,3)==='1.7'){var $jqNodes=$();$.map($nodes,function(node){$jqNodes=$jqNodes.add(node);});$nodes=$jqNodes;}
$element.append($nodes);};return Utils;});S2.define('select2/results',['jquery','./utils'],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element;this.data=dataAdapter;this.options=options;Results.__super__.constructor.call(this);}
Utils.Extend(Results,Utils.Observable);Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="tree"></ul>');if(this.options.get('multiple')){$results.attr('aria-multiselectable','true');}
this.$results=$results;return $results;};Results.prototype.clear=function(){this.$results.empty();};Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get('escapeMarkup');this.clear();this.hideLoading();var $message=$('<li role="treeitem" aria-live="assertive"'+' class="select2-results__option"></li>');var message=this.options.get('translations').get(params.message);$message.append(escapeMarkup(message(params.args)));$message[0].className+=' select2-results__message';this.$results.append($message);};Results.prototype.hideMessages=function(){this.$results.find('.select2-results__message').remove();};Results.prototype.append=function(data){this.hideLoading();var $options=[];if(data.results==null||data.results.length===0){if(this.$results.children().length===0){this.trigger('results:message',{message:'noResults'});}
return;}
data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d];var $option=this.option(item);$options.push($option);}
this.$results.append($options);};Results.prototype.position=function($results,$dropdown){var $resultsContainer=$dropdown.find('.select2-results');$resultsContainer.append($results);};Results.prototype.sort=function(data){var sorter=this.options.get('sorter');return sorter(data);};Results.prototype.highlightFirstItem=function(){var $options=this.$results.find('.select2-results__option[aria-selected]');var $selected=$options.filter('[aria-selected=true]');if($selected.length>0){$selected.first().trigger('mouseenter');}else{$options.first().trigger('mouseenter');}
this.ensureHighlightVisible();};Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=$.map(selected,function(s){return s.id.toString();});var $options=self.$results.find('.select2-results__option[aria-selected]');$options.each(function(){var $option=$(this);var item=$.data(this,'data');var id=''+item.id;if((item.element!=null&&item.element.selected)||(item.element==null&&$.inArray(id,selectedIds)>-1)){$option.attr('aria-selected','true');}else{$option.attr('aria-selected','false');}});});};Results.prototype.showLoading=function(params){this.hideLoading();var loadingMore=this.options.get('translations').get('searching');var loading={disabled:true,loading:true,text:loadingMore(params)};var $loading=this.option(loading);$loading.className+=' loading-results';this.$results.prepend($loading);};Results.prototype.hideLoading=function(){this.$results.find('.loading-results').remove();};Results.prototype.option=function(data){var option=document.createElement('li');option.className='select2-results__option';var attrs={'role':'treeitem','aria-selected':'false'};if(data.disabled){delete attrs['aria-selected'];attrs['aria-disabled']='true';}
if(data.id==null){delete attrs['aria-selected'];}
if(data._resultId!=null){option.id=data._resultId;}
if(data.title){option.title=data.title;}
if(data.children){attrs.role='group';attrs['aria-label']=data.text;delete attrs['aria-selected'];}
for(var attr in attrs){var val=attrs[attr];option.setAttribute(attr,val);}
if(data.children){var $option=$(option);var label=document.createElement('strong');label.className='select2-results__group';var $label=$(label);this.template(data,label);var $children=[];for(var c=0;c<data.children.length;c++){var child=data.children[c];var $child=this.option(child);$children.push($child);}
var $childrenContainer=$('<ul></ul>',{'class':'select2-results__options select2-results__options--nested'});$childrenContainer.append($children);$option.append(label);$option.append($childrenContainer);}else{this.template(data,option);}
$.data(option,'data',data);return option;};Results.prototype.bind=function(container,$container){var self=this;var id=container.id+'-results';this.$results.attr('id',id);container.on('results:all',function(params){self.clear();self.append(params.data);if(container.isOpen()){self.setClasses();self.highlightFirstItem();}});container.on('results:append',function(params){self.append(params.data);if(container.isOpen()){self.setClasses();}});container.on('query',function(params){self.hideMessages();self.showLoading(params);});container.on('select',function(){if(!container.isOpen()){return;}
self.setClasses();self.highlightFirstItem();});container.on('unselect',function(){if(!container.isOpen()){return;}
self.setClasses();self.highlightFirstItem();});container.on('open',function(){self.$results.attr('aria-expanded','true');self.$results.attr('aria-hidden','false');self.setClasses();self.ensureHighlightVisible();});container.on('close',function(){self.$results.attr('aria-expanded','false');self.$results.attr('aria-hidden','true');self.$results.removeAttr('aria-activedescendant');});container.on('results:toggle',function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return;}
$highlighted.trigger('mouseup');});container.on('results:select',function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return;}
var data=$highlighted.data('data');if($highlighted.attr('aria-selected')=='true'){self.trigger('close',{});}else{self.trigger('select',{data:data});}});container.on('results:previous',function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find('[aria-selected]');var currentIndex=$options.index($highlighted);if(currentIndex===0){return;}
var nextIndex=currentIndex-1;if($highlighted.length===0){nextIndex=0;}
var $next=$options.eq(nextIndex);$next.trigger('mouseenter');var currentOffset=self.$results.offset().top;var nextTop=$next.offset().top;var nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);if(nextIndex===0){self.$results.scrollTop(0);}else if(nextTop-currentOffset<0){self.$results.scrollTop(nextOffset);}});container.on('results:next',function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find('[aria-selected]');var currentIndex=$options.index($highlighted);var nextIndex=currentIndex+1;if(nextIndex>=$options.length){return;}
var $next=$options.eq(nextIndex);$next.trigger('mouseenter');var currentOffset=self.$results.offset().top+
self.$results.outerHeight(false);var nextBottom=$next.offset().top+$next.outerHeight(false);var nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;if(nextIndex===0){self.$results.scrollTop(0);}else if(nextBottom>currentOffset){self.$results.scrollTop(nextOffset);}});container.on('results:focus',function(params){params.element.addClass('select2-results__option--highlighted');});container.on('results:message',function(params){self.displayMessage(params);});if($.fn.mousewheel){this.$results.on('mousewheel',function(e){var top=self.$results.scrollTop();var bottom=self.$results.get(0).scrollHeight-top+e.deltaY;var isAtTop=e.deltaY>0&&top-e.deltaY<=0;var isAtBottom=e.deltaY<0&&bottom<=self.$results.height();if(isAtTop){self.$results.scrollTop(0);e.preventDefault();e.stopPropagation();}else if(isAtBottom){self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height());e.preventDefault();e.stopPropagation();}});}
this.$results.on('mouseup','.select2-results__option[aria-selected]',function(evt){var $this=$(this);var data=$this.data('data');if($this.attr('aria-selected')==='true'){if(self.options.get('multiple')){self.trigger('unselect',{originalEvent:evt,data:data});}else{self.trigger('close',{});}
return;}
self.trigger('select',{originalEvent:evt,data:data});});this.$results.on('mouseenter','.select2-results__option[aria-selected]',function(evt){var data=$(this).data('data');self.getHighlightedResults().removeClass('select2-results__option--highlighted');self.trigger('results:focus',{data:data,element:$(this)});});};Results.prototype.getHighlightedResults=function(){var $highlighted=this.$results.find('.select2-results__option--highlighted');return $highlighted;};Results.prototype.destroy=function(){this.$results.remove();};Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if($highlighted.length===0){return;}
var $options=this.$results.find('[aria-selected]');var currentIndex=$options.index($highlighted);var currentOffset=this.$results.offset().top;var nextTop=$highlighted.offset().top;var nextOffset=this.$results.scrollTop()+(nextTop-currentOffset);var offsetDelta=nextTop-currentOffset;nextOffset-=$highlighted.outerHeight(false)*2;if(currentIndex<=2){this.$results.scrollTop(0);}else if(offsetDelta>this.$results.outerHeight()||offsetDelta<0){this.$results.scrollTop(nextOffset);}};Results.prototype.template=function(result,container){var template=this.options.get('templateResult');var escapeMarkup=this.options.get('escapeMarkup');var content=template(result,container);if(content==null){container.style.display='none';}else if(typeof content==='string'){container.innerHTML=escapeMarkup(content);}else{$(container).append(content);}};return Results;});S2.define('select2/keys',[],function(){var KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return KEYS;});S2.define('select2/selection/base',['jquery','../utils','../keys'],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element;this.options=options;BaseSelection.__super__.constructor.call(this);}
Utils.Extend(BaseSelection,Utils.Observable);BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+'</span>');this._tabindex=0;if(this.$element.data('old-tabindex')!=null){this._tabindex=this.$element.data('old-tabindex');}else if(this.$element.attr('tabindex')!=null){this._tabindex=this.$element.attr('tabindex');}
$selection.attr('title',this.$element.attr('title'));$selection.attr('tabindex',this._tabindex);this.$selection=$selection;return $selection;};BaseSelection.prototype.bind=function(container,$container){var self=this;var id=container.id+'-container';var resultsId=container.id+'-results';this.container=container;this.$selection.on('focus',function(evt){self.trigger('focus',evt);});this.$selection.on('blur',function(evt){self._handleBlur(evt);});this.$selection.on('keydown',function(evt){self.trigger('keypress',evt);if(evt.which===KEYS.SPACE){evt.preventDefault();}});container.on('results:focus',function(params){self.$selection.attr('aria-activedescendant',params.data._resultId);});container.on('selection:update',function(params){self.update(params.data);});container.on('open',function(){self.$selection.attr('aria-expanded','true');self.$selection.attr('aria-owns',resultsId);self._attachCloseHandler(container);});container.on('close',function(){self.$selection.attr('aria-expanded','false');self.$selection.removeAttr('aria-activedescendant');self.$selection.removeAttr('aria-owns');self.$selection.focus();self._detachCloseHandler(container);});container.on('enable',function(){self.$selection.attr('tabindex',self._tabindex);});container.on('disable',function(){self.$selection.attr('tabindex','-1');});};BaseSelection.prototype._handleBlur=function(evt){var self=this;window.setTimeout(function(){if((document.activeElement==self.$selection[0])||($.contains(self.$selection[0],document.activeElement))){return;}
self.trigger('blur',evt);},1);};BaseSelection.prototype._attachCloseHandler=function(container){var self=this;$(document.body).on('mousedown.select2.'+container.id,function(e){var $target=$(e.target);var $select=$target.closest('.select2');var $all=$('.select2.select2-container--open');$all.each(function(){var $this=$(this);if(this==$select[0]){return;}
var $element=$this.data('element');$element.select2('close');});});};BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off('mousedown.select2.'+container.id);};BaseSelection.prototype.position=function($selection,$container){var $selectionContainer=$container.find('.selection');$selectionContainer.append($selection);};BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container);};BaseSelection.prototype.update=function(data){throw new Error('The `update` method must be defined in child classes.');};return BaseSelection;});S2.define('select2/selection/single',['jquery','./base','../utils','../keys'],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments);}
Utils.Extend(SingleSelection,BaseSelection);SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);$selection.addClass('select2-selection--single');$selection.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+'</span>');return $selection;};SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+'-container';this.$selection.find('.select2-selection__rendered').attr('id',id);this.$selection.attr('aria-labelledby',id);this.$selection.on('mousedown',function(evt){if(evt.which!==1){return;}
self.trigger('toggle',{originalEvent:evt});});this.$selection.on('focus',function(evt){});this.$selection.on('blur',function(evt){});container.on('focus',function(evt){if(!container.isOpen()){self.$selection.focus();}});container.on('selection:update',function(params){self.update(params.data);});};SingleSelection.prototype.clear=function(){this.$selection.find('.select2-selection__rendered').empty();};SingleSelection.prototype.display=function(data,container){var template=this.options.get('templateSelection');var escapeMarkup=this.options.get('escapeMarkup');return escapeMarkup(template(data,container));};SingleSelection.prototype.selectionContainer=function(){return $('<span></span>');};SingleSelection.prototype.update=function(data){if(data.length===0){this.clear();return;}
var selection=data[0];var $rendered=this.$selection.find('.select2-selection__rendered');var formatted=this.display(selection,$rendered);$rendered.empty().append(formatted);$rendered.prop('title',selection.title||selection.text);};return SingleSelection;});S2.define('select2/selection/multiple',['jquery','./base','../utils'],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments);}
Utils.Extend(MultipleSelection,BaseSelection);MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);$selection.addClass('select2-selection--multiple');$selection.html('<ul class="select2-selection__rendered"></ul>');return $selection;};MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments);this.$selection.on('click',function(evt){self.trigger('toggle',{originalEvent:evt});});this.$selection.on('click','.select2-selection__choice__remove',function(evt){if(self.options.get('disabled')){return;}
var $remove=$(this);var $selection=$remove.parent();var data=$selection.data('data');self.trigger('unselect',{originalEvent:evt,data:data});});};MultipleSelection.prototype.clear=function(){this.$selection.find('.select2-selection__rendered').empty();};MultipleSelection.prototype.display=function(data,container){var template=this.options.get('templateSelection');var escapeMarkup=this.options.get('escapeMarkup');return escapeMarkup(template(data,container));};MultipleSelection.prototype.selectionContainer=function(){var $container=$('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+'&times;'+'</span>'+'</li>');return $container;};MultipleSelection.prototype.update=function(data){this.clear();if(data.length===0){return;}
var $selections=[];for(var d=0;d<data.length;d++){var selection=data[d];var $selection=this.selectionContainer();var formatted=this.display(selection,$selection);$selection.append(formatted);$selection.prop('title',selection.title||selection.text);$selection.data('data',selection);$selections.push($selection);}
var $rendered=this.$selection.find('.select2-selection__rendered');Utils.appendMany($rendered,$selections);};return MultipleSelection;});S2.define('select2/selection/placeholder',['../utils'],function(Utils){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get('placeholder'));decorated.call(this,$element,options);}
Placeholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==='string'){placeholder={id:'',text:placeholder};}
return placeholder;};Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();$placeholder.html(this.display(placeholder));$placeholder.addClass('select2-selection__placeholder').removeClass('select2-selection__choice');return $placeholder;};Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=(data.length==1&&data[0].id!=this.placeholder.id);var multipleSelections=data.length>1;if(multipleSelections||singlePlaceholder){return decorated.call(this,data);}
this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find('.select2-selection__rendered').append($placeholder);};return Placeholder;});S2.define('select2/selection/allowClear',['jquery','../keys'],function($,KEYS){function AllowClear(){}
AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);if(this.placeholder==null){if(this.options.get('debug')&&window.console&&console.error){console.error('Select2: The `allowClear` option should be used in combination '+'with the `placeholder` option.');}}
this.$selection.on('mousedown','.select2-selection__clear',function(evt){self._handleClear(evt);});container.on('keypress',function(evt){self._handleKeyboardClear(evt,container);});};AllowClear.prototype._handleClear=function(_,evt){if(this.options.get('disabled')){return;}
var $clear=this.$selection.find('.select2-selection__clear');if($clear.length===0){return;}
evt.stopPropagation();var data=$clear.data('data');for(var d=0;d<data.length;d++){var unselectData={data:data[d]};this.trigger('unselect',unselectData);if(unselectData.prevented){return;}}
this.$element.val(this.placeholder.id).trigger('change');this.trigger('toggle',{});};AllowClear.prototype._handleKeyboardClear=function(_,evt,container){if(container.isOpen()){return;}
if(evt.which==KEYS.DELETE||evt.which==KEYS.BACKSPACE){this._handleClear(evt);}};AllowClear.prototype.update=function(decorated,data){decorated.call(this,data);if(this.$selection.find('.select2-selection__placeholder').length>0||data.length===0){return;}
var $remove=$('<span class="select2-selection__clear">'+'&times;'+'</span>');$remove.data('data',data);this.$selection.find('.select2-selection__rendered').prepend($remove);};return AllowClear;});S2.define('select2/selection/search',['jquery','../utils','../keys'],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options);}
Search.prototype.render=function(decorated){var $search=$('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" aria-autocomplete="list" />'+'</li>');this.$searchContainer=$search;this.$search=$search.find('input');var $rendered=decorated.call(this);this._transferTabIndex();return $rendered;};Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on('open',function(){self.$search.trigger('focus');});container.on('close',function(){self.$search.val('');self.$search.removeAttr('aria-activedescendant');self.$search.trigger('focus');});container.on('enable',function(){self.$search.prop('disabled',false);self._transferTabIndex();});container.on('disable',function(){self.$search.prop('disabled',true);});container.on('focus',function(evt){self.$search.trigger('focus');});container.on('results:focus',function(params){self.$search.attr('aria-activedescendant',params.id);});this.$selection.on('focusin','.select2-search--inline',function(evt){self.trigger('focus',evt);});this.$selection.on('focusout','.select2-search--inline',function(evt){self._handleBlur(evt);});this.$selection.on('keydown','.select2-search--inline',function(evt){evt.stopPropagation();self.trigger('keypress',evt);self._keyUpPrevented=evt.isDefaultPrevented();var key=evt.which;if(key===KEYS.BACKSPACE&&self.$search.val()===''){var $previousChoice=self.$searchContainer.prev('.select2-selection__choice');if($previousChoice.length>0){var item=$previousChoice.data('data');self.searchRemoveChoice(item);evt.preventDefault();}}});var msie=document.documentMode;var disableInputEvents=msie&&msie<=11;this.$selection.on('input.searchcheck','.select2-search--inline',function(evt){if(disableInputEvents){self.$selection.off('input.search input.searchcheck');return;}
self.$selection.off('keyup.search');});this.$selection.on('keyup.search input.search','.select2-search--inline',function(evt){if(disableInputEvents&&evt.type==='input'){self.$selection.off('input.search input.searchcheck');return;}
var key=evt.which;if(key==KEYS.SHIFT||key==KEYS.CTRL||key==KEYS.ALT){return;}
if(key==KEYS.TAB){return;}
self.handleSearch(evt);});};Search.prototype._transferTabIndex=function(decorated){this.$search.attr('tabindex',this.$selection.attr('tabindex'));this.$selection.attr('tabindex','-1');};Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr('placeholder',placeholder.text);};Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr('placeholder','');decorated.call(this,data);this.$selection.find('.select2-selection__rendered').append(this.$searchContainer);this.resizeSearch();if(searchHadFocus){this.$search.focus();}};Search.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var input=this.$search.val();this.trigger('query',{term:input});}
this._keyUpPrevented=false;};Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger('unselect',{data:item});this.$search.val(item.text);this.handleSearch();};Search.prototype.resizeSearch=function(){this.$search.css('width','25px');var width='';if(this.$search.attr('placeholder')!==''){width=this.$selection.find('.select2-selection__rendered').innerWidth();}else{var minimumWidth=this.$search.val().length+1;width=(minimumWidth*0.75)+'em';}
this.$search.css('width',width);};return Search;});S2.define('select2/selection/eventRelay',['jquery'],function($){function EventRelay(){}
EventRelay.prototype.bind=function(decorated,container,$container){var self=this;var relayEvents=['open','opening','close','closing','select','selecting','unselect','unselecting'];var preventableEvents=['opening','closing','selecting','unselecting'];decorated.call(this,container,$container);container.on('*',function(name,params){if($.inArray(name,relayEvents)===-1){return;}
params=params||{};var evt=$.Event('select2:'+name,{params:params});self.$element.trigger(evt);if($.inArray(name,preventableEvents)===-1){return;}
params.prevented=evt.isDefaultPrevented();});};return EventRelay;});S2.define('select2/translation',['jquery','require'],function($,require){function Translation(dict){this.dict=dict||{};}
Translation.prototype.all=function(){return this.dict;};Translation.prototype.get=function(key){return this.dict[key];};Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict);};Translation._cache={};Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations;}
return new Translation(Translation._cache[path]);};return Translation;});S2.define('select2/diacritics',[],function(){var diacritics={'\u24B6':'A','\uFF21':'A','\u00C0':'A','\u00C1':'A','\u00C2':'A','\u1EA6':'A','\u1EA4':'A','\u1EAA':'A','\u1EA8':'A','\u00C3':'A','\u0100':'A','\u0102':'A','\u1EB0':'A','\u1EAE':'A','\u1EB4':'A','\u1EB2':'A','\u0226':'A','\u01E0':'A','\u00C4':'A','\u01DE':'A','\u1EA2':'A','\u00C5':'A','\u01FA':'A','\u01CD':'A','\u0200':'A','\u0202':'A','\u1EA0':'A','\u1EAC':'A','\u1EB6':'A','\u1E00':'A','\u0104':'A','\u023A':'A','\u2C6F':'A','\uA732':'AA','\u00C6':'AE','\u01FC':'AE','\u01E2':'AE','\uA734':'AO','\uA736':'AU','\uA738':'AV','\uA73A':'AV','\uA73C':'AY','\u24B7':'B','\uFF22':'B','\u1E02':'B','\u1E04':'B','\u1E06':'B','\u0243':'B','\u0182':'B','\u0181':'B','\u24B8':'C','\uFF23':'C','\u0106':'C','\u0108':'C','\u010A':'C','\u010C':'C','\u00C7':'C','\u1E08':'C','\u0187':'C','\u023B':'C','\uA73E':'C','\u24B9':'D','\uFF24':'D','\u1E0A':'D','\u010E':'D','\u1E0C':'D','\u1E10':'D','\u1E12':'D','\u1E0E':'D','\u0110':'D','\u018B':'D','\u018A':'D','\u0189':'D','\uA779':'D','\u01F1':'DZ','\u01C4':'DZ','\u01F2':'Dz','\u01C5':'Dz','\u24BA':'E','\uFF25':'E','\u00C8':'E','\u00C9':'E','\u00CA':'E','\u1EC0':'E','\u1EBE':'E','\u1EC4':'E','\u1EC2':'E','\u1EBC':'E','\u0112':'E','\u1E14':'E','\u1E16':'E','\u0114':'E','\u0116':'E','\u00CB':'E','\u1EBA':'E','\u011A':'E','\u0204':'E','\u0206':'E','\u1EB8':'E','\u1EC6':'E','\u0228':'E','\u1E1C':'E','\u0118':'E','\u1E18':'E','\u1E1A':'E','\u0190':'E','\u018E':'E','\u24BB':'F','\uFF26':'F','\u1E1E':'F','\u0191':'F','\uA77B':'F','\u24BC':'G','\uFF27':'G','\u01F4':'G','\u011C':'G','\u1E20':'G','\u011E':'G','\u0120':'G','\u01E6':'G','\u0122':'G','\u01E4':'G','\u0193':'G','\uA7A0':'G','\uA77D':'G','\uA77E':'G','\u24BD':'H','\uFF28':'H','\u0124':'H','\u1E22':'H','\u1E26':'H','\u021E':'H','\u1E24':'H','\u1E28':'H','\u1E2A':'H','\u0126':'H','\u2C67':'H','\u2C75':'H','\uA78D':'H','\u24BE':'I','\uFF29':'I','\u00CC':'I','\u00CD':'I','\u00CE':'I','\u0128':'I','\u012A':'I','\u012C':'I','\u0130':'I','\u00CF':'I','\u1E2E':'I','\u1EC8':'I','\u01CF':'I','\u0208':'I','\u020A':'I','\u1ECA':'I','\u012E':'I','\u1E2C':'I','\u0197':'I','\u24BF':'J','\uFF2A':'J','\u0134':'J','\u0248':'J','\u24C0':'K','\uFF2B':'K','\u1E30':'K','\u01E8':'K','\u1E32':'K','\u0136':'K','\u1E34':'K','\u0198':'K','\u2C69':'K','\uA740':'K','\uA742':'K','\uA744':'K','\uA7A2':'K','\u24C1':'L','\uFF2C':'L','\u013F':'L','\u0139':'L','\u013D':'L','\u1E36':'L','\u1E38':'L','\u013B':'L','\u1E3C':'L','\u1E3A':'L','\u0141':'L','\u023D':'L','\u2C62':'L','\u2C60':'L','\uA748':'L','\uA746':'L','\uA780':'L','\u01C7':'LJ','\u01C8':'Lj','\u24C2':'M','\uFF2D':'M','\u1E3E':'M','\u1E40':'M','\u1E42':'M','\u2C6E':'M','\u019C':'M','\u24C3':'N','\uFF2E':'N','\u01F8':'N','\u0143':'N','\u00D1':'N','\u1E44':'N','\u0147':'N','\u1E46':'N','\u0145':'N','\u1E4A':'N','\u1E48':'N','\u0220':'N','\u019D':'N','\uA790':'N','\uA7A4':'N','\u01CA':'NJ','\u01CB':'Nj','\u24C4':'O','\uFF2F':'O','\u00D2':'O','\u00D3':'O','\u00D4':'O','\u1ED2':'O','\u1ED0':'O','\u1ED6':'O','\u1ED4':'O','\u00D5':'O','\u1E4C':'O','\u022C':'O','\u1E4E':'O','\u014C':'O','\u1E50':'O','\u1E52':'O','\u014E':'O','\u022E':'O','\u0230':'O','\u00D6':'O','\u022A':'O','\u1ECE':'O','\u0150':'O','\u01D1':'O','\u020C':'O','\u020E':'O','\u01A0':'O','\u1EDC':'O','\u1EDA':'O','\u1EE0':'O','\u1EDE':'O','\u1EE2':'O','\u1ECC':'O','\u1ED8':'O','\u01EA':'O','\u01EC':'O','\u00D8':'O','\u01FE':'O','\u0186':'O','\u019F':'O','\uA74A':'O','\uA74C':'O','\u01A2':'OI','\uA74E':'OO','\u0222':'OU','\u24C5':'P','\uFF30':'P','\u1E54':'P','\u1E56':'P','\u01A4':'P','\u2C63':'P','\uA750':'P','\uA752':'P','\uA754':'P','\u24C6':'Q','\uFF31':'Q','\uA756':'Q','\uA758':'Q','\u024A':'Q','\u24C7':'R','\uFF32':'R','\u0154':'R','\u1E58':'R','\u0158':'R','\u0210':'R','\u0212':'R','\u1E5A':'R','\u1E5C':'R','\u0156':'R','\u1E5E':'R','\u024C':'R','\u2C64':'R','\uA75A':'R','\uA7A6':'R','\uA782':'R','\u24C8':'S','\uFF33':'S','\u1E9E':'S','\u015A':'S','\u1E64':'S','\u015C':'S','\u1E60':'S','\u0160':'S','\u1E66':'S','\u1E62':'S','\u1E68':'S','\u0218':'S','\u015E':'S','\u2C7E':'S','\uA7A8':'S','\uA784':'S','\u24C9':'T','\uFF34':'T','\u1E6A':'T','\u0164':'T','\u1E6C':'T','\u021A':'T','\u0162':'T','\u1E70':'T','\u1E6E':'T','\u0166':'T','\u01AC':'T','\u01AE':'T','\u023E':'T','\uA786':'T','\uA728':'TZ','\u24CA':'U','\uFF35':'U','\u00D9':'U','\u00DA':'U','\u00DB':'U','\u0168':'U','\u1E78':'U','\u016A':'U','\u1E7A':'U','\u016C':'U','\u00DC':'U','\u01DB':'U','\u01D7':'U','\u01D5':'U','\u01D9':'U','\u1EE6':'U','\u016E':'U','\u0170':'U','\u01D3':'U','\u0214':'U','\u0216':'U','\u01AF':'U','\u1EEA':'U','\u1EE8':'U','\u1EEE':'U','\u1EEC':'U','\u1EF0':'U','\u1EE4':'U','\u1E72':'U','\u0172':'U','\u1E76':'U','\u1E74':'U','\u0244':'U','\u24CB':'V','\uFF36':'V','\u1E7C':'V','\u1E7E':'V','\u01B2':'V','\uA75E':'V','\u0245':'V','\uA760':'VY','\u24CC':'W','\uFF37':'W','\u1E80':'W','\u1E82':'W','\u0174':'W','\u1E86':'W','\u1E84':'W','\u1E88':'W','\u2C72':'W','\u24CD':'X','\uFF38':'X','\u1E8A':'X','\u1E8C':'X','\u24CE':'Y','\uFF39':'Y','\u1EF2':'Y','\u00DD':'Y','\u0176':'Y','\u1EF8':'Y','\u0232':'Y','\u1E8E':'Y','\u0178':'Y','\u1EF6':'Y','\u1EF4':'Y','\u01B3':'Y','\u024E':'Y','\u1EFE':'Y','\u24CF':'Z','\uFF3A':'Z','\u0179':'Z','\u1E90':'Z','\u017B':'Z','\u017D':'Z','\u1E92':'Z','\u1E94':'Z','\u01B5':'Z','\u0224':'Z','\u2C7F':'Z','\u2C6B':'Z','\uA762':'Z','\u24D0':'a','\uFF41':'a','\u1E9A':'a','\u00E0':'a','\u00E1':'a','\u00E2':'a','\u1EA7':'a','\u1EA5':'a','\u1EAB':'a','\u1EA9':'a','\u00E3':'a','\u0101':'a','\u0103':'a','\u1EB1':'a','\u1EAF':'a','\u1EB5':'a','\u1EB3':'a','\u0227':'a','\u01E1':'a','\u00E4':'a','\u01DF':'a','\u1EA3':'a','\u00E5':'a','\u01FB':'a','\u01CE':'a','\u0201':'a','\u0203':'a','\u1EA1':'a','\u1EAD':'a','\u1EB7':'a','\u1E01':'a','\u0105':'a','\u2C65':'a','\u0250':'a','\uA733':'aa','\u00E6':'ae','\u01FD':'ae','\u01E3':'ae','\uA735':'ao','\uA737':'au','\uA739':'av','\uA73B':'av','\uA73D':'ay','\u24D1':'b','\uFF42':'b','\u1E03':'b','\u1E05':'b','\u1E07':'b','\u0180':'b','\u0183':'b','\u0253':'b','\u24D2':'c','\uFF43':'c','\u0107':'c','\u0109':'c','\u010B':'c','\u010D':'c','\u00E7':'c','\u1E09':'c','\u0188':'c','\u023C':'c','\uA73F':'c','\u2184':'c','\u24D3':'d','\uFF44':'d','\u1E0B':'d','\u010F':'d','\u1E0D':'d','\u1E11':'d','\u1E13':'d','\u1E0F':'d','\u0111':'d','\u018C':'d','\u0256':'d','\u0257':'d','\uA77A':'d','\u01F3':'dz','\u01C6':'dz','\u24D4':'e','\uFF45':'e','\u00E8':'e','\u00E9':'e','\u00EA':'e','\u1EC1':'e','\u1EBF':'e','\u1EC5':'e','\u1EC3':'e','\u1EBD':'e','\u0113':'e','\u1E15':'e','\u1E17':'e','\u0115':'e','\u0117':'e','\u00EB':'e','\u1EBB':'e','\u011B':'e','\u0205':'e','\u0207':'e','\u1EB9':'e','\u1EC7':'e','\u0229':'e','\u1E1D':'e','\u0119':'e','\u1E19':'e','\u1E1B':'e','\u0247':'e','\u025B':'e','\u01DD':'e','\u24D5':'f','\uFF46':'f','\u1E1F':'f','\u0192':'f','\uA77C':'f','\u24D6':'g','\uFF47':'g','\u01F5':'g','\u011D':'g','\u1E21':'g','\u011F':'g','\u0121':'g','\u01E7':'g','\u0123':'g','\u01E5':'g','\u0260':'g','\uA7A1':'g','\u1D79':'g','\uA77F':'g','\u24D7':'h','\uFF48':'h','\u0125':'h','\u1E23':'h','\u1E27':'h','\u021F':'h','\u1E25':'h','\u1E29':'h','\u1E2B':'h','\u1E96':'h','\u0127':'h','\u2C68':'h','\u2C76':'h','\u0265':'h','\u0195':'hv','\u24D8':'i','\uFF49':'i','\u00EC':'i','\u00ED':'i','\u00EE':'i','\u0129':'i','\u012B':'i','\u012D':'i','\u00EF':'i','\u1E2F':'i','\u1EC9':'i','\u01D0':'i','\u0209':'i','\u020B':'i','\u1ECB':'i','\u012F':'i','\u1E2D':'i','\u0268':'i','\u0131':'i','\u24D9':'j','\uFF4A':'j','\u0135':'j','\u01F0':'j','\u0249':'j','\u24DA':'k','\uFF4B':'k','\u1E31':'k','\u01E9':'k','\u1E33':'k','\u0137':'k','\u1E35':'k','\u0199':'k','\u2C6A':'k','\uA741':'k','\uA743':'k','\uA745':'k','\uA7A3':'k','\u24DB':'l','\uFF4C':'l','\u0140':'l','\u013A':'l','\u013E':'l','\u1E37':'l','\u1E39':'l','\u013C':'l','\u1E3D':'l','\u1E3B':'l','\u017F':'l','\u0142':'l','\u019A':'l','\u026B':'l','\u2C61':'l','\uA749':'l','\uA781':'l','\uA747':'l','\u01C9':'lj','\u24DC':'m','\uFF4D':'m','\u1E3F':'m','\u1E41':'m','\u1E43':'m','\u0271':'m','\u026F':'m','\u24DD':'n','\uFF4E':'n','\u01F9':'n','\u0144':'n','\u00F1':'n','\u1E45':'n','\u0148':'n','\u1E47':'n','\u0146':'n','\u1E4B':'n','\u1E49':'n','\u019E':'n','\u0272':'n','\u0149':'n','\uA791':'n','\uA7A5':'n','\u01CC':'nj','\u24DE':'o','\uFF4F':'o','\u00F2':'o','\u00F3':'o','\u00F4':'o','\u1ED3':'o','\u1ED1':'o','\u1ED7':'o','\u1ED5':'o','\u00F5':'o','\u1E4D':'o','\u022D':'o','\u1E4F':'o','\u014D':'o','\u1E51':'o','\u1E53':'o','\u014F':'o','\u022F':'o','\u0231':'o','\u00F6':'o','\u022B':'o','\u1ECF':'o','\u0151':'o','\u01D2':'o','\u020D':'o','\u020F':'o','\u01A1':'o','\u1EDD':'o','\u1EDB':'o','\u1EE1':'o','\u1EDF':'o','\u1EE3':'o','\u1ECD':'o','\u1ED9':'o','\u01EB':'o','\u01ED':'o','\u00F8':'o','\u01FF':'o','\u0254':'o','\uA74B':'o','\uA74D':'o','\u0275':'o','\u01A3':'oi','\u0223':'ou','\uA74F':'oo','\u24DF':'p','\uFF50':'p','\u1E55':'p','\u1E57':'p','\u01A5':'p','\u1D7D':'p','\uA751':'p','\uA753':'p','\uA755':'p','\u24E0':'q','\uFF51':'q','\u024B':'q','\uA757':'q','\uA759':'q','\u24E1':'r','\uFF52':'r','\u0155':'r','\u1E59':'r','\u0159':'r','\u0211':'r','\u0213':'r','\u1E5B':'r','\u1E5D':'r','\u0157':'r','\u1E5F':'r','\u024D':'r','\u027D':'r','\uA75B':'r','\uA7A7':'r','\uA783':'r','\u24E2':'s','\uFF53':'s','\u00DF':'s','\u015B':'s','\u1E65':'s','\u015D':'s','\u1E61':'s','\u0161':'s','\u1E67':'s','\u1E63':'s','\u1E69':'s','\u0219':'s','\u015F':'s','\u023F':'s','\uA7A9':'s','\uA785':'s','\u1E9B':'s','\u24E3':'t','\uFF54':'t','\u1E6B':'t','\u1E97':'t','\u0165':'t','\u1E6D':'t','\u021B':'t','\u0163':'t','\u1E71':'t','\u1E6F':'t','\u0167':'t','\u01AD':'t','\u0288':'t','\u2C66':'t','\uA787':'t','\uA729':'tz','\u24E4':'u','\uFF55':'u','\u00F9':'u','\u00FA':'u','\u00FB':'u','\u0169':'u','\u1E79':'u','\u016B':'u','\u1E7B':'u','\u016D':'u','\u00FC':'u','\u01DC':'u','\u01D8':'u','\u01D6':'u','\u01DA':'u','\u1EE7':'u','\u016F':'u','\u0171':'u','\u01D4':'u','\u0215':'u','\u0217':'u','\u01B0':'u','\u1EEB':'u','\u1EE9':'u','\u1EEF':'u','\u1EED':'u','\u1EF1':'u','\u1EE5':'u','\u1E73':'u','\u0173':'u','\u1E77':'u','\u1E75':'u','\u0289':'u','\u24E5':'v','\uFF56':'v','\u1E7D':'v','\u1E7F':'v','\u028B':'v','\uA75F':'v','\u028C':'v','\uA761':'vy','\u24E6':'w','\uFF57':'w','\u1E81':'w','\u1E83':'w','\u0175':'w','\u1E87':'w','\u1E85':'w','\u1E98':'w','\u1E89':'w','\u2C73':'w','\u24E7':'x','\uFF58':'x','\u1E8B':'x','\u1E8D':'x','\u24E8':'y','\uFF59':'y','\u1EF3':'y','\u00FD':'y','\u0177':'y','\u1EF9':'y','\u0233':'y','\u1E8F':'y','\u00FF':'y','\u1EF7':'y','\u1E99':'y','\u1EF5':'y','\u01B4':'y','\u024F':'y','\u1EFF':'y','\u24E9':'z','\uFF5A':'z','\u017A':'z','\u1E91':'z','\u017C':'z','\u017E':'z','\u1E93':'z','\u1E95':'z','\u01B6':'z','\u0225':'z','\u0240':'z','\u2C6C':'z','\uA763':'z','\u0386':'\u0391','\u0388':'\u0395','\u0389':'\u0397','\u038A':'\u0399','\u03AA':'\u0399','\u038C':'\u039F','\u038E':'\u03A5','\u03AB':'\u03A5','\u038F':'\u03A9','\u03AC':'\u03B1','\u03AD':'\u03B5','\u03AE':'\u03B7','\u03AF':'\u03B9','\u03CA':'\u03B9','\u0390':'\u03B9','\u03CC':'\u03BF','\u03CD':'\u03C5','\u03CB':'\u03C5','\u03B0':'\u03C5','\u03C9':'\u03C9','\u03C2':'\u03C3'};return diacritics;});S2.define('select2/data/base',['../utils'],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this);}
Utils.Extend(BaseAdapter,Utils.Observable);BaseAdapter.prototype.current=function(callback){throw new Error('The `current` method must be defined in child classes.');};BaseAdapter.prototype.query=function(params,callback){throw new Error('The `query` method must be defined in child classes.');};BaseAdapter.prototype.bind=function(container,$container){};BaseAdapter.prototype.destroy=function(){};BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+'-result-';id+=Utils.generateChars(4);if(data.id!=null){id+='-'+data.id.toString();}else{id+='-'+Utils.generateChars(4);}
return id;};return BaseAdapter;});S2.define('select2/data/select',['./base','../utils','jquery'],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element;this.options=options;SelectAdapter.__super__.constructor.call(this);}
Utils.Extend(SelectAdapter,BaseAdapter);SelectAdapter.prototype.current=function(callback){var data=[];var self=this;this.$element.find(':selected').each(function(){var $option=$(this);var option=self.item($option);data.push(option);});callback(data);};SelectAdapter.prototype.select=function(data){var self=this;data.selected=true;if($(data.element).is('option')){data.element.selected=true;this.$element.trigger('change');return;}
if(this.$element.prop('multiple')){this.current(function(currentData){var val=[];data=[data];data.push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;if($.inArray(id,val)===-1){val.push(id);}}
self.$element.val(val);self.$element.trigger('change');});}else{var val=data.id;this.$element.val(val);this.$element.trigger('change');}};SelectAdapter.prototype.unselect=function(data){var self=this;if(!this.$element.prop('multiple')){return;}
data.selected=false;if($(data.element).is('option')){data.element.selected=false;this.$element.trigger('change');return;}
this.current(function(currentData){var val=[];for(var d=0;d<currentData.length;d++){var id=currentData[d].id;if(id!==data.id&&$.inArray(id,val)===-1){val.push(id);}}
self.$element.val(val);self.$element.trigger('change');});};SelectAdapter.prototype.bind=function(container,$container){var self=this;this.container=container;container.on('select',function(params){self.select(params.data);});container.on('unselect',function(params){self.unselect(params.data);});};SelectAdapter.prototype.destroy=function(){this.$element.find('*').each(function(){$.removeData(this,'data');});};SelectAdapter.prototype.query=function(params,callback){var data=[];var self=this;var $options=this.$element.children();$options.each(function(){var $option=$(this);if(!$option.is('option')&&!$option.is('optgroup')){return;}
var option=self.item($option);var matches=self.matches(params,option);if(matches!==null){data.push(matches);}});callback({results:data});};SelectAdapter.prototype.addOptions=function($options){Utils.appendMany(this.$element,$options);};SelectAdapter.prototype.option=function(data){var option;if(data.children){option=document.createElement('optgroup');option.label=data.text;}else{option=document.createElement('option');if(option.textContent!==undefined){option.textContent=data.text;}else{option.innerText=data.text;}}
if(data.id){option.value=data.id;}
if(data.disabled){option.disabled=true;}
if(data.selected){option.selected=true;}
if(data.title){option.title=data.title;}
var $option=$(option);var normalizedData=this._normalizeItem(data);normalizedData.element=option;$.data(option,'data',normalizedData);return $option;};SelectAdapter.prototype.item=function($option){var data={};data=$.data($option[0],'data');if(data!=null){return data;}
if($option.is('option')){data={id:$option.val(),text:$option.text(),disabled:$option.prop('disabled'),selected:$option.prop('selected'),title:$option.prop('title')};}else if($option.is('optgroup')){data={text:$option.prop('label'),children:[],title:$option.prop('title')};var $children=$option.children('option');var children=[];for(var c=0;c<$children.length;c++){var $child=$($children[c]);var child=this.item($child);children.push(child);}
data.children=children;}
data=this._normalizeItem(data);data.element=$option[0];$.data($option[0],'data',data);return data;};SelectAdapter.prototype._normalizeItem=function(item){if(!$.isPlainObject(item)){item={id:item,text:item};}
item=$.extend({},{text:''},item);var defaults={selected:false,disabled:false};if(item.id!=null){item.id=item.id.toString();}
if(item.text!=null){item.text=item.text.toString();}
if(item._resultId==null&&item.id&&this.container!=null){item._resultId=this.generateResultId(this.container,item);}
return $.extend({},defaults,item);};SelectAdapter.prototype.matches=function(params,data){var matcher=this.options.get('matcher');return matcher(params,data);};return SelectAdapter;});S2.define('select2/data/array',['./select','../utils','jquery'],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){var data=options.get('data')||[];ArrayAdapter.__super__.constructor.call(this,$element,options);this.addOptions(this.convertToOptions(data));}
Utils.Extend(ArrayAdapter,SelectAdapter);ArrayAdapter.prototype.select=function(data){var $option=this.$element.find('option').filter(function(i,elm){return elm.value==data.id.toString();});if($option.length===0){$option=this.option(data);this.addOptions($option);}
ArrayAdapter.__super__.select.call(this,data);};ArrayAdapter.prototype.convertToOptions=function(data){var self=this;var $existing=this.$element.find('option');var existingIds=$existing.map(function(){return self.item($(this)).id;}).get();var $options=[];function onlyItem(item){return function(){return $(this).val()==item.id;};}
for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if($.inArray(item.id,existingIds)>=0){var $existingOption=$existing.filter(onlyItem(item));var existingData=this.item($existingOption);var newData=$.extend(true,{},item,existingData);var $newOption=this.option(newData);$existingOption.replaceWith($newOption);continue;}
var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);Utils.appendMany($option,$children);}
$options.push($option);}
return $options;};return ArrayAdapter;});S2.define('select2/data/ajax',['./array','../utils','jquery'],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get('ajax'));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults;}
AjaxAdapter.__super__.constructor.call(this,$element,options);}
Utils.Extend(AjaxAdapter,ArrayAdapter);AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $.extend({},params,{q:params.term});},transport:function(params,success,failure){var $request=$.ajax(params);$request.then(success);$request.fail(failure);return $request;}};return $.extend({},defaults,options,true);};AjaxAdapter.prototype.processResults=function(results){return results;};AjaxAdapter.prototype.query=function(params,callback){var matches=[];var self=this;if(this._request!=null){if($.isFunction(this._request.abort)){this._request.abort();}
this._request=null;}
var options=$.extend({type:'GET'},this.ajaxOptions);if(typeof options.url==='function'){options.url=options.url.call(this.$element,params);}
if(typeof options.data==='function'){options.data=options.data.call(this.$element,params);}
function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);if(self.options.get('debug')&&window.console&&console.error){if(!results||!results.results||!$.isArray(results.results)){console.error('Select2: The AJAX results did not return an array in the '+'`results` key of the response.');}}
callback(results);},function(){if($request.status&&$request.status==='0'){return;}
self.trigger('results:message',{message:'errorLoading'});});self._request=$request;}
if(this.ajaxOptions.delay&&params.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout);}
this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay);}else{request();}};return AjaxAdapter;});S2.define('select2/data/tags',['jquery'],function($){function Tags(decorated,$element,options){var tags=options.get('tags');var createTag=options.get('createTag');if(createTag!==undefined){this.createTag=createTag;}
var insertTag=options.get('insertTag');if(insertTag!==undefined){this.insertTag=insertTag;}
decorated.call(this,$element,options);if($.isArray(tags)){for(var t=0;t<tags.length;t++){var tag=tags[t];var item=this._normalizeItem(tag);var $option=this.option(item);this.$element.append($option);}}}
Tags.prototype.query=function(decorated,params,callback){var self=this;this._removeOldTags();if(params.term==null||params.page!=null){decorated.call(this,params,callback);return;}
function wrapper(obj,child){var data=obj.results;for(var i=0;i<data.length;i++){var option=data[i];var checkChildren=(option.children!=null&&!wrapper({results:option.children},true));var checkText=option.text===params.term;if(checkText||checkChildren){if(child){return false;}
obj.data=data;callback(obj);return;}}
if(child){return true;}
var tag=self.createTag(params);if(tag!=null){var $option=self.option(tag);$option.attr('data-select2-tag',true);self.addOptions([$option]);self.insertTag(data,tag);}
obj.results=data;callback(obj);}
decorated.call(this,params,wrapper);};Tags.prototype.createTag=function(decorated,params){var term=$.trim(params.term);if(term===''){return null;}
return{id:term,text:term};};Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag);};Tags.prototype._removeOldTags=function(_){var tag=this._lastTag;var $options=this.$element.find('option[data-select2-tag]');$options.each(function(){if(this.selected){return;}
$(this).remove();});};return Tags;});S2.define('select2/data/tokenizer',['jquery'],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get('tokenizer');if(tokenizer!==undefined){this.tokenizer=tokenizer;}
decorated.call(this,$element,options);}
Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);this.$search=container.dropdown.$search||container.selection.$search||$container.find('.select2-search__field');};Tokenizer.prototype.query=function(decorated,params,callback){var self=this;function createAndSelect(data){var item=self._normalizeItem(data);var $existingOptions=self.$element.find('option').filter(function(){return $(this).val()===item.id;});if(!$existingOptions.length){var $option=self.option(item);$option.attr('data-select2-tag',true);self._removeOldTags();self.addOptions([$option]);}
select(item);}
function select(data){self.trigger('select',{data:data});}
params.term=params.term||'';var tokenData=this.tokenizer(params,this.options,createAndSelect);if(tokenData.term!==params.term){if(this.$search.length){this.$search.val(tokenData.term);this.$search.focus();}
params.term=tokenData.term;}
decorated.call(this,params,callback);};Tokenizer.prototype.tokenizer=function(_,params,options,callback){var separators=options.get('tokenSeparators')||[];var term=params.term;var i=0;var createTag=this.createTag||function(params){return{id:params.term,text:params.term};};while(i<term.length){var termChar=term[i];if($.inArray(termChar,separators)===-1){i++;continue;}
var part=term.substr(0,i);var partParams=$.extend({},params,{term:part});var data=createTag(partParams);if(data==null){i++;continue;}
callback(data);term=term.substr(i+1)||'';i=0;}
return{term:term};};return Tokenizer;});S2.define('select2/data/minimumInputLength',[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get('minimumInputLength');decorated.call(this,$e,options);}
MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||'';if(params.term.length<this.minimumInputLength){this.trigger('results:message',{message:'inputTooShort',args:{minimum:this.minimumInputLength,input:params.term,params:params}});return;}
decorated.call(this,params,callback);};return MinimumInputLength;});S2.define('select2/data/maximumInputLength',[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get('maximumInputLength');decorated.call(this,$e,options);}
MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||'';if(this.maximumInputLength>0&&params.term.length>this.maximumInputLength){this.trigger('results:message',{message:'inputTooLong',args:{maximum:this.maximumInputLength,input:params.term,params:params}});return;}
decorated.call(this,params,callback);};return MaximumInputLength;});S2.define('select2/data/maximumSelectionLength',[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get('maximumSelectionLength');decorated.call(this,$e,options);}
MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this.current(function(currentData){var count=currentData!=null?currentData.length:0;if(self.maximumSelectionLength>0&&count>=self.maximumSelectionLength){self.trigger('results:message',{message:'maximumSelected',args:{maximum:self.maximumSelectionLength}});return;}
decorated.call(self,params,callback);});};return MaximumSelectionLength;});S2.define('select2/dropdown',['jquery','./utils'],function($,Utils){function Dropdown($element,options){this.$element=$element;this.options=options;Dropdown.__super__.constructor.call(this);}
Utils.Extend(Dropdown,Utils.Observable);Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+'</span>');$dropdown.attr('dir',this.options.get('dir'));this.$dropdown=$dropdown;return $dropdown;};Dropdown.prototype.bind=function(){};Dropdown.prototype.position=function($dropdown,$container){};Dropdown.prototype.destroy=function(){this.$dropdown.remove();};return Dropdown;});S2.define('select2/dropdown/search',['jquery','../utils'],function($,Utils){function Search(){}
Search.prototype.render=function(decorated){var $rendered=decorated.call(this);var $search=$('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" />'+'</span>');this.$searchContainer=$search;this.$search=$search.find('input');$rendered.prepend($search);return $rendered;};Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);this.$search.on('keydown',function(evt){self.trigger('keypress',evt);self._keyUpPrevented=evt.isDefaultPrevented();});this.$search.on('input',function(evt){$(this).off('keyup');});this.$search.on('keyup input',function(evt){self.handleSearch(evt);});container.on('open',function(){self.$search.attr('tabindex',0);self.$search.focus();window.setTimeout(function(){self.$search.focus();},0);});container.on('close',function(){self.$search.attr('tabindex',-1);self.$search.val('');});container.on('focus',function(){if(container.isOpen()){self.$search.focus();}});container.on('results:all',function(params){if(params.query.term==null||params.query.term===''){var showSearch=self.showSearch(params);if(showSearch){self.$searchContainer.removeClass('select2-search--hide');}else{self.$searchContainer.addClass('select2-search--hide');}}});};Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger('query',{term:input});}
this._keyUpPrevented=false;};Search.prototype.showSearch=function(_,params){return true;};return Search;});S2.define('select2/dropdown/hidePlaceholder',[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get('placeholder'));decorated.call(this,$element,options,dataAdapter);}
HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results);decorated.call(this,data);};HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==='string'){placeholder={id:'',text:placeholder};}
return placeholder;};HidePlaceholder.prototype.removePlaceholder=function(_,data){var modifiedData=data.slice(0);for(var d=data.length-1;d>=0;d--){var item=data[d];if(this.placeholder.id===item.id){modifiedData.splice(d,1);}}
return modifiedData;};return HidePlaceholder;});S2.define('select2/dropdown/infiniteScroll',['jquery'],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={};decorated.call(this,$element,options,dataAdapter);this.$loadingMore=this.createLoadingMore();this.loading=false;}
InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove();this.loading=false;decorated.call(this,data);if(this.showLoadingMore(data)){this.$results.append(this.$loadingMore);}};InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on('query',function(params){self.lastParams=params;self.loading=true;});container.on('query:append',function(params){self.lastParams=params;self.loading=true;});this.$results.on('scroll',function(){var isLoadMoreVisible=$.contains(document.documentElement,self.$loadingMore[0]);if(self.loading||!isLoadMoreVisible){return;}
var currentOffset=self.$results.offset().top+
self.$results.outerHeight(false);var loadingMoreOffset=self.$loadingMore.offset().top+
self.$loadingMore.outerHeight(false);if(currentOffset+50>=loadingMoreOffset){self.loadMore();}});};InfiniteScroll.prototype.loadMore=function(){this.loading=true;var params=$.extend({},{page:1},this.lastParams);params.page++;this.trigger('query:append',params);};InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more;};InfiniteScroll.prototype.createLoadingMore=function(){var $option=$('<li '+'class="select2-results__option select2-results__option--load-more"'+'role="treeitem" aria-disabled="true"></li>');var message=this.options.get('translations').get('loadingMore');$option.html(message(this.lastParams));return $option;};return InfiniteScroll;});S2.define('select2/dropdown/attachBody',['jquery','../utils'],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=options.get('dropdownParent')||$(document.body);decorated.call(this,$element,options);}
AttachBody.prototype.bind=function(decorated,container,$container){var self=this;var setupResultsEvents=false;decorated.call(this,container,$container);container.on('open',function(){self._showDropdown();self._attachPositioningHandler(container);if(!setupResultsEvents){setupResultsEvents=true;container.on('results:all',function(){self._positionDropdown();self._resizeDropdown();});container.on('results:append',function(){self._positionDropdown();self._resizeDropdown();});}});container.on('close',function(){self._hideDropdown();self._detachPositioningHandler(container);});this.$dropdownContainer.on('mousedown',function(evt){evt.stopPropagation();});};AttachBody.prototype.destroy=function(decorated){decorated.call(this);this.$dropdownContainer.remove();};AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr('class',$container.attr('class'));$dropdown.removeClass('select2');$dropdown.addClass('select2-container--open');$dropdown.css({position:'absolute',top:-999999});this.$container=$container;};AttachBody.prototype.render=function(decorated){var $container=$('<span></span>');var $dropdown=decorated.call(this);$container.append($dropdown);this.$dropdownContainer=$container;return $container;};AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach();};AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self=this;var scrollEvent='scroll.select2.'+container.id;var resizeEvent='resize.select2.'+container.id;var orientationEvent='orientationchange.select2.'+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){$(this).data('select2-scroll-position',{x:$(this).scrollLeft(),y:$(this).scrollTop()});});$watchers.on(scrollEvent,function(ev){var position=$(this).data('select2-scroll-position');$(this).scrollTop(position.y);});$(window).on(scrollEvent+' '+resizeEvent+' '+orientationEvent,function(e){self._positionDropdown();self._resizeDropdown();});};AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent='scroll.select2.'+container.id;var resizeEvent='resize.select2.'+container.id;var orientationEvent='orientationchange.select2.'+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.off(scrollEvent);$(window).off(scrollEvent+' '+resizeEvent+' '+orientationEvent);};AttachBody.prototype._positionDropdown=function(){var $window=$(window);var isCurrentlyAbove=this.$dropdown.hasClass('select2-dropdown--above');var isCurrentlyBelow=this.$dropdown.hasClass('select2-dropdown--below');var newDirection=null;var offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(false);var container={height:this.$container.outerHeight(false)};container.top=offset.top;container.bottom=offset.top+container.height;var dropdown={height:this.$dropdown.outerHeight(false)};var viewport={top:$window.scrollTop(),bottom:$window.scrollTop()+$window.height()};var enoughRoomAbove=viewport.top<(offset.top-dropdown.height);var enoughRoomBelow=viewport.bottom>(offset.bottom+dropdown.height);var css={left:offset.left,top:container.bottom};var $offsetParent=this.$dropdownParent;if($offsetParent.css('position')==='static'){$offsetParent=$offsetParent.offsetParent();}
var parentOffset=$offsetParent.offset();css.top-=parentOffset.top;css.left-=parentOffset.left;if(!isCurrentlyAbove&&!isCurrentlyBelow){newDirection='below';}
if(!enoughRoomBelow&&enoughRoomAbove&&!isCurrentlyAbove){newDirection='above';}else if(!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove){newDirection='below';}
if(newDirection=='above'||(isCurrentlyAbove&&newDirection!=='below')){css.top=container.top-parentOffset.top-dropdown.height;}
if(newDirection!=null){this.$dropdown.removeClass('select2-dropdown--below select2-dropdown--above').addClass('select2-dropdown--'+newDirection);this.$container.removeClass('select2-container--below select2-container--above').addClass('select2-container--'+newDirection);}
this.$dropdownContainer.css(css);};AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(false)+'px'};if(this.options.get('dropdownAutoWidth')){css.minWidth=css.width;css.position='relative';css.width='auto';}
this.$dropdown.css(css);};AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown();};return AttachBody;});S2.define('select2/dropdown/minimumResultsForSearch',[],function(){function countResults(data){var count=0;for(var d=0;d<data.length;d++){var item=data[d];if(item.children){count+=countResults(item.children);}else{count++;}}
return count;}
function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get('minimumResultsForSearch');if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity;}
decorated.call(this,$element,options,dataAdapter);}
MinimumResultsForSearch.prototype.showSearch=function(decorated,params){if(countResults(params.data.results)<this.minimumResultsForSearch){return false;}
return decorated.call(this,params);};return MinimumResultsForSearch;});S2.define('select2/dropdown/selectOnClose',[],function(){function SelectOnClose(){}
SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on('close',function(params){self._handleSelectOnClose(params);});};SelectOnClose.prototype._handleSelectOnClose=function(_,params){if(params&&params.originalSelect2Event!=null){var event=params.originalSelect2Event;if(event._type==='select'||event._type==='unselect'){return;}}
var $highlightedResults=this.getHighlightedResults();if($highlightedResults.length<1){return;}
var data=$highlightedResults.data('data');if((data.element!=null&&data.element.selected)||(data.element==null&&data.selected)){return;}
this.trigger('select',{data:data});};return SelectOnClose;});S2.define('select2/dropdown/closeOnSelect',[],function(){function CloseOnSelect(){}
CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on('select',function(evt){self._selectTriggered(evt);});container.on('unselect',function(evt){self._selectTriggered(evt);});};CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;if(originalEvent&&originalEvent.ctrlKey){return;}
this.trigger('close',{originalEvent:originalEvent,originalSelect2Event:evt});};return CloseOnSelect;});S2.define('select2/i18n/en',[],function(){return{errorLoading:function(){return'The results could not be loaded.';},inputTooLong:function(args){var overChars=args.input.length-args.maximum;var message='Please delete '+overChars+' character';if(overChars!=1){message+='s';}
return message;},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length;var message='Please enter '+remainingChars+' or more characters';return message;},loadingMore:function(){return'Loading more resultsâ¦';},maximumSelected:function(args){var message='You can only select '+args.maximum+' item';if(args.maximum!=1){message+='s';}
return message;},noResults:function(){return'No results found';},searching:function(){return'Searchingâ¦';}};});S2.define('select2/defaults',['jquery','require','./results','./selection/single','./selection/multiple','./selection/placeholder','./selection/allowClear','./selection/search','./selection/eventRelay','./utils','./translation','./diacritics','./data/select','./data/array','./data/ajax','./data/tags','./data/tokenizer','./data/minimumInputLength','./data/maximumInputLength','./data/maximumSelectionLength','./dropdown','./dropdown/search','./dropdown/hidePlaceholder','./dropdown/infiniteScroll','./dropdown/attachBody','./dropdown/minimumResultsForSearch','./dropdown/selectOnClose','./dropdown/closeOnSelect','./i18n/en'],function($,require,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,EnglishTranslation){function Defaults(){this.reset();}
Defaults.prototype.apply=function(options){options=$.extend(true,{},this.defaults,options);if(options.dataAdapter==null){if(options.ajax!=null){options.dataAdapter=AjaxData;}else if(options.data!=null){options.dataAdapter=ArrayData;}else{options.dataAdapter=SelectData;}
if(options.minimumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength);}
if(options.maximumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength);}
if(options.maximumSelectionLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength);}
if(options.tags){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags);}
if(options.tokenSeparators!=null||options.tokenizer!=null){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer);}
if(options.query!=null){var Query=require(options.amdBase+'compat/query');options.dataAdapter=Utils.Decorate(options.dataAdapter,Query);}
if(options.initSelection!=null){var InitSelection=require(options.amdBase+'compat/initSelection');options.dataAdapter=Utils.Decorate(options.dataAdapter,InitSelection);}}
if(options.resultsAdapter==null){options.resultsAdapter=ResultsList;if(options.ajax!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll);}
if(options.placeholder!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder);}
if(options.selectOnClose){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose);}}
if(options.dropdownAdapter==null){if(options.multiple){options.dropdownAdapter=Dropdown;}else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown;}
if(options.minimumResultsForSearch!==0){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch);}
if(options.closeOnSelect){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect);}
if(options.dropdownCssClass!=null||options.dropdownCss!=null||options.adaptDropdownCssClass!=null){var DropdownCSS=require(options.amdBase+'compat/dropdownCss');options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS);}
options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody);}
if(options.selectionAdapter==null){if(options.multiple){options.selectionAdapter=MultipleSelection;}else{options.selectionAdapter=SingleSelection;}
if(options.placeholder!=null){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder);}
if(options.allowClear){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear);}
if(options.multiple){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch);}
if(options.containerCssClass!=null||options.containerCss!=null||options.adaptContainerCssClass!=null){var ContainerCSS=require(options.amdBase+'compat/containerCss');options.selectionAdapter=Utils.Decorate(options.selectionAdapter,ContainerCSS);}
options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay);}
if(typeof options.language==='string'){if(options.language.indexOf('-')>0){var languageParts=options.language.split('-');var baseLanguage=languageParts[0];options.language=[options.language,baseLanguage];}else{options.language=[options.language];}}
if($.isArray(options.language)){var languages=new Translation();options.language.push('en');var languageNames=options.language;for(var l=0;l<languageNames.length;l++){var name=languageNames[l];var language={};try{language=Translation.loadPath(name);}catch(e){try{name=this.defaults.amdLanguageBase+name;language=Translation.loadPath(name);}catch(ex){if(options.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+name+'" could not be '+'automatically loaded. A fallback will be used instead.');}
continue;}}
languages.extend(language);}
options.translations=languages;}else{var baseTranslation=Translation.loadPath(this.defaults.amdLanguageBase+'en');var customTranslation=new Translation(options.language);customTranslation.extend(baseTranslation);options.translations=customTranslation;}
return options;};Defaults.prototype.reset=function(){function stripDiacritics(text){function match(a){return DIACRITICS[a]||a;}
return text.replace(/[^\u0000-\u007E]/g,match);}
function matcher(params,data){if($.trim(params.term)===''){return data;}
if(data.children&&data.children.length>0){var match=$.extend(true,{},data);for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];var matches=matcher(params,child);if(matches==null){match.children.splice(c,1);}}
if(match.children.length>0){return match;}
return matcher(params,match);}
var original=stripDiacritics(data.text).toUpperCase();var term=stripDiacritics(params.term).toUpperCase();if(original.indexOf(term)>-1){return data;}
return null;}
this.defaults={amdBase:'./',amdLanguageBase:'./i18n/',closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:Utils.escapeMarkup,language:EnglishTranslation,matcher:matcher,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(data){return data;},templateResult:function(result){return result.text;},templateSelection:function(selection){return selection.text;},theme:'default',width:'resolve'};};Defaults.prototype.set=function(key,value){var camelKey=$.camelCase(key);var data={};data[camelKey]=value;var convertedData=Utils._convertData(data);$.extend(this.defaults,convertedData);};var defaults=new Defaults();return defaults;});S2.define('select2/options',['require','jquery','./defaults','./utils'],function(require,$,Defaults,Utils){function Options(options,$element){this.options=options;if($element!=null){this.fromElement($element);}
this.options=Defaults.apply(this.options);if($element&&$element.is('input')){var InputCompat=require(this.get('amdBase')+'compat/inputData');this.options.dataAdapter=Utils.Decorate(this.options.dataAdapter,InputCompat);}}
Options.prototype.fromElement=function($e){var excludedData=['select2'];if(this.options.multiple==null){this.options.multiple=$e.prop('multiple');}
if(this.options.disabled==null){this.options.disabled=$e.prop('disabled');}
if(this.options.language==null){if($e.prop('lang')){this.options.language=$e.prop('lang').toLowerCase();}else if($e.closest('[lang]').prop('lang')){this.options.language=$e.closest('[lang]').prop('lang');}}
if(this.options.dir==null){if($e.prop('dir')){this.options.dir=$e.prop('dir');}else if($e.closest('[dir]').prop('dir')){this.options.dir=$e.closest('[dir]').prop('dir');}else{this.options.dir='ltr';}}
$e.prop('disabled',this.options.disabled);$e.prop('multiple',this.options.multiple);if($e.data('select2Tags')){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-select2-tags` attribute has been changed to '+'use the `data-data` and `data-tags="true"` attributes and will be '+'removed in future versions of Select2.');}
$e.data('data',$e.data('select2Tags'));$e.data('tags',true);}
if($e.data('ajaxUrl')){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-ajax-url` attribute has been changed to '+'`data-ajax--url` and support for the old attribute will be removed'+' in future versions of Select2.');}
$e.attr('ajax--url',$e.data('ajaxUrl'));$e.data('ajax--url',$e.data('ajaxUrl'));}
var dataset={};if($.fn.jquery&&$.fn.jquery.substr(0,2)=='1.'&&$e[0].dataset){dataset=$.extend(true,{},$e[0].dataset,$e.data());}else{dataset=$e.data();}
var data=$.extend(true,{},dataset);data=Utils._convertData(data);for(var key in data){if($.inArray(key,excludedData)>-1){continue;}
if($.isPlainObject(this.options[key])){$.extend(this.options[key],data[key]);}else{this.options[key]=data[key];}}
return this;};Options.prototype.get=function(key){return this.options[key];};Options.prototype.set=function(key,val){this.options[key]=val;};return Options;});S2.define('select2/core',['jquery','./options','./utils','./keys'],function($,Options,Utils,KEYS){var Select2=function($element,options){if($element.data('select2')!=null){$element.data('select2').destroy();}
this.$element=$element;this.id=this._generateId($element);options=options||{};this.options=new Options(options,$element);Select2.__super__.constructor.call(this);var tabindex=$element.attr('tabindex')||0;$element.data('old-tabindex',tabindex);$element.attr('tabindex','-1');var DataAdapter=this.options.get('dataAdapter');this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get('selectionAdapter');this.selection=new SelectionAdapter($element,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get('dropdownAdapter');this.dropdown=new DropdownAdapter($element,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get('resultsAdapter');this.results=new ResultsAdapter($element,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(initialData){self.trigger('selection:update',{data:initialData});});$element.addClass('select2-hidden-accessible');$element.attr('aria-hidden','true');this._syncAttributes();$element.data('select2',this);};Utils.Extend(Select2,Utils.Observable);Select2.prototype._generateId=function($element){var id='';if($element.attr('id')!=null){id=$element.attr('id');}else if($element.attr('name')!=null){id=$element.attr('name')+'-'+Utils.generateChars(2);}else{id=Utils.generateChars(4);}
id=id.replace(/(:|\.|\[|\]|,)/g,'');id='select2-'+id;return id;};Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get('width'));if(width!=null){$container.css('width',width);}};Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(method=='resolve'){var styleWidth=this._resolveWidth($element,'style');if(styleWidth!=null){return styleWidth;}
return this._resolveWidth($element,'element');}
if(method=='element'){var elementWidth=$element.outerWidth(false);if(elementWidth<=0){return'auto';}
return elementWidth+'px';}
if(method=='style'){var style=$element.attr('style');if(typeof(style)!=='string'){return null;}
var attrs=style.split(';');for(var i=0,l=attrs.length;i<l;i=i+1){var attr=attrs[i].replace(/\s/g,'');var matches=attr.match(WIDTH);if(matches!==null&&matches.length>=1){return matches[1];}}
return null;}
return method;};Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container);};Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on('change.select2',function(){self.dataAdapter.current(function(data){self.trigger('selection:update',{data:data});});});this.$element.on('focus.select2',function(evt){self.trigger('focus',evt);});this._syncA=Utils.bind(this._syncAttributes,this);this._syncS=Utils.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent('onpropertychange',this._syncA);}
var observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(observer!=null){this._observer=new observer(function(mutations){$.each(mutations,self._syncA);$.each(mutations,self._syncS);});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false});}else if(this.$element[0].addEventListener){this.$element[0].addEventListener('DOMAttrModified',self._syncA,false);this.$element[0].addEventListener('DOMNodeInserted',self._syncS,false);this.$element[0].addEventListener('DOMNodeRemoved',self._syncS,false);}};Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on('*',function(name,params){self.trigger(name,params);});};Select2.prototype._registerSelectionEvents=function(){var self=this;var nonRelayEvents=['toggle','focus'];this.selection.on('toggle',function(){self.toggleDropdown();});this.selection.on('focus',function(params){self.focus(params);});this.selection.on('*',function(name,params){if($.inArray(name,nonRelayEvents)!==-1){return;}
self.trigger(name,params);});};Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on('*',function(name,params){self.trigger(name,params);});};Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on('*',function(name,params){self.trigger(name,params);});};Select2.prototype._registerEvents=function(){var self=this;this.on('open',function(){self.$container.addClass('select2-container--open');});this.on('close',function(){self.$container.removeClass('select2-container--open');});this.on('enable',function(){self.$container.removeClass('select2-container--disabled');});this.on('disable',function(){self.$container.addClass('select2-container--disabled');});this.on('blur',function(){self.$container.removeClass('select2-container--focus');});this.on('query',function(params){if(!self.isOpen()){self.trigger('open',{});}
this.dataAdapter.query(params,function(data){self.trigger('results:all',{data:data,query:params});});});this.on('query:append',function(params){this.dataAdapter.query(params,function(data){self.trigger('results:append',{data:data,query:params});});});this.on('keypress',function(evt){var key=evt.which;if(self.isOpen()){if(key===KEYS.ESC||key===KEYS.TAB||(key===KEYS.UP&&evt.altKey)){self.close();evt.preventDefault();}else if(key===KEYS.ENTER){self.trigger('results:select',{});evt.preventDefault();}else if((key===KEYS.SPACE&&evt.ctrlKey)){self.trigger('results:toggle',{});evt.preventDefault();}else if(key===KEYS.UP){self.trigger('results:previous',{});evt.preventDefault();}else if(key===KEYS.DOWN){self.trigger('results:next',{});evt.preventDefault();}}else{if(key===KEYS.ENTER||key===KEYS.SPACE||(key===KEYS.DOWN&&evt.altKey)){self.open();evt.preventDefault();}}});};Select2.prototype._syncAttributes=function(){this.options.set('disabled',this.$element.prop('disabled'));if(this.options.get('disabled')){if(this.isOpen()){this.close();}
this.trigger('disable',{});}else{this.trigger('enable',{});}};Select2.prototype._syncSubtree=function(evt,mutations){var changed=false;var self=this;if(evt&&evt.target&&(evt.target.nodeName!=='OPTION'&&evt.target.nodeName!=='OPTGROUP')){return;}
if(!mutations){changed=true;}else if(mutations.addedNodes&&mutations.addedNodes.length>0){for(var n=0;n<mutations.addedNodes.length;n++){var node=mutations.addedNodes[n];if(node.selected){changed=true;}}}else if(mutations.removedNodes&&mutations.removedNodes.length>0){changed=true;}
if(changed){this.dataAdapter.current(function(currentData){self.trigger('selection:update',{data:currentData});});}};Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger;var preTriggerMap={'open':'opening','close':'closing','select':'selecting','unselect':'unselecting'};if(args===undefined){args={};}
if(name in preTriggerMap){var preTriggerName=preTriggerMap[name];var preTriggerArgs={prevented:false,name:name,args:args};actualTrigger.call(this,preTriggerName,preTriggerArgs);if(preTriggerArgs.prevented){args.prevented=true;return;}}
actualTrigger.call(this,name,args);};Select2.prototype.toggleDropdown=function(){if(this.options.get('disabled')){return;}
if(this.isOpen()){this.close();}else{this.open();}};Select2.prototype.open=function(){if(this.isOpen()){return;}
this.trigger('query',{});};Select2.prototype.close=function(){if(!this.isOpen()){return;}
this.trigger('close',{});};Select2.prototype.isOpen=function(){return this.$container.hasClass('select2-container--open');};Select2.prototype.hasFocus=function(){return this.$container.hasClass('select2-container--focus');};Select2.prototype.focus=function(data){if(this.hasFocus()){return;}
this.$container.addClass('select2-container--focus');this.trigger('focus',{});};Select2.prototype.enable=function(args){if(this.options.get('debug')&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+' instead.');}
if(args==null||args.length===0){args=[true];}
var disabled=!args[0];this.$element.prop('disabled',disabled);};Select2.prototype.data=function(){if(this.options.get('debug')&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+'should consider setting the value instead using `$element.val()`.');}
var data=[];this.dataAdapter.current(function(currentData){data=currentData;});return data;};Select2.prototype.val=function(args){if(this.options.get('debug')&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+' removed in later Select2 versions. Use $element.val() instead.');}
if(args==null||args.length===0){return this.$element.val();}
var newVal=args[0];if($.isArray(newVal)){newVal=$.map(newVal,function(obj){return obj.toString();});}
this.$element.val(newVal).trigger('change');};Select2.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent('onpropertychange',this._syncA);}
if(this._observer!=null){this._observer.disconnect();this._observer=null;}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener('DOMAttrModified',this._syncA,false);this.$element[0].removeEventListener('DOMNodeInserted',this._syncS,false);this.$element[0].removeEventListener('DOMNodeRemoved',this._syncS,false);}
this._syncA=null;this._syncS=null;this.$element.off('.select2');this.$element.attr('tabindex',this.$element.data('old-tabindex'));this.$element.removeClass('select2-hidden-accessible');this.$element.attr('aria-hidden','false');this.$element.removeData('select2');this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null;};Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+'</span>');$container.attr('dir',this.options.get('dir'));this.$container=$container;this.$container.addClass('select2-container--'+this.options.get('theme'));$container.data('element',this.$element);return $container;};return Select2;});S2.define('select2/compat/utils',['jquery'],function($){function syncCssClasses($dest,$src,adapter){var classes,replacements=[],adapted;classes=$.trim($dest.attr('class'));if(classes){classes=''+classes;$(classes.split(/\s+/)).each(function(){if(this.indexOf('select2-')===0){replacements.push(this);}});}
classes=$.trim($src.attr('class'));if(classes){classes=''+classes;$(classes.split(/\s+/)).each(function(){if(this.indexOf('select2-')!==0){adapted=adapter(this);if(adapted!=null){replacements.push(adapted);}}});}
$dest.attr('class',replacements.join(' '));}
return{syncCssClasses:syncCssClasses};});S2.define('select2/compat/containerCss',['jquery','./utils'],function($,CompatUtils){function _containerAdapter(clazz){return null;}
function ContainerCSS(){}
ContainerCSS.prototype.render=function(decorated){var $container=decorated.call(this);var containerCssClass=this.options.get('containerCssClass')||'';if($.isFunction(containerCssClass)){containerCssClass=containerCssClass(this.$element);}
var containerCssAdapter=this.options.get('adaptContainerCssClass');containerCssAdapter=containerCssAdapter||_containerAdapter;if(containerCssClass.indexOf(':all:')!==-1){containerCssClass=containerCssClass.replace(':all:','');var _cssAdapter=containerCssAdapter;containerCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);if(adapted!=null){return adapted+' '+clazz;}
return clazz;};}
var containerCss=this.options.get('containerCss')||{};if($.isFunction(containerCss)){containerCss=containerCss(this.$element);}
CompatUtils.syncCssClasses($container,this.$element,containerCssAdapter);$container.css(containerCss);$container.addClass(containerCssClass);return $container;};return ContainerCSS;});S2.define('select2/compat/dropdownCss',['jquery','./utils'],function($,CompatUtils){function _dropdownAdapter(clazz){return null;}
function DropdownCSS(){}
DropdownCSS.prototype.render=function(decorated){var $dropdown=decorated.call(this);var dropdownCssClass=this.options.get('dropdownCssClass')||'';if($.isFunction(dropdownCssClass)){dropdownCssClass=dropdownCssClass(this.$element);}
var dropdownCssAdapter=this.options.get('adaptDropdownCssClass');dropdownCssAdapter=dropdownCssAdapter||_dropdownAdapter;if(dropdownCssClass.indexOf(':all:')!==-1){dropdownCssClass=dropdownCssClass.replace(':all:','');var _cssAdapter=dropdownCssAdapter;dropdownCssAdapter=function(clazz){var adapted=_cssAdapter(clazz);if(adapted!=null){return adapted+' '+clazz;}
return clazz;};}
var dropdownCss=this.options.get('dropdownCss')||{};if($.isFunction(dropdownCss)){dropdownCss=dropdownCss(this.$element);}
CompatUtils.syncCssClasses($dropdown,this.$element,dropdownCssAdapter);$dropdown.css(dropdownCss);$dropdown.addClass(dropdownCssClass);return $dropdown;};return DropdownCSS;});S2.define('select2/compat/initSelection',['jquery'],function($){function InitSelection(decorated,$element,options){if(options.get('debug')&&window.console&&console.warn){console.warn('Select2: The `initSelection` option has been deprecated in favor'+' of a custom data adapter that overrides the `current` method. '+'This method is now called multiple times instead of a single '+'time when the instance is initialized. Support will be removed '+'for the `initSelection` option in future versions of Select2');}
this.initSelection=options.get('initSelection');this._isInitialized=false;decorated.call(this,$element,options);}
InitSelection.prototype.current=function(decorated,callback){var self=this;if(this._isInitialized){decorated.call(this,callback);return;}
this.initSelection.call(null,this.$element,function(data){self._isInitialized=true;if(!$.isArray(data)){data=[data];}
callback(data);});};return InitSelection;});S2.define('select2/compat/inputData',['jquery'],function($){function InputData(decorated,$element,options){this._currentData=[];this._valueSeparator=options.get('valueSeparator')||',';if($element.prop('type')==='hidden'){if(options.get('debug')&&console&&console.warn){console.warn('Select2: Using a hidden input with Select2 is no longer '+'supported and may stop working in the future. It is recommended '+'to use a `<select>` element instead.');}}
decorated.call(this,$element,options);}
InputData.prototype.current=function(_,callback){function getSelected(data,selectedIds){var selected=[];if(data.selected||$.inArray(data.id,selectedIds)!==-1){data.selected=true;selected.push(data);}else{data.selected=false;}
if(data.children){selected.push.apply(selected,getSelected(data.children,selectedIds));}
return selected;}
var selected=[];for(var d=0;d<this._currentData.length;d++){var data=this._currentData[d];selected.push.apply(selected,getSelected(data,this.$element.val().split(this._valueSeparator)));}
callback(selected);};InputData.prototype.select=function(_,data){if(!this.options.get('multiple')){this.current(function(allData){$.map(allData,function(data){data.selected=false;});});this.$element.val(data.id);this.$element.trigger('change');}else{var value=this.$element.val();value+=this._valueSeparator+data.id;this.$element.val(value);this.$element.trigger('change');}};InputData.prototype.unselect=function(_,data){var self=this;data.selected=false;this.current(function(allData){var values=[];for(var d=0;d<allData.length;d++){var item=allData[d];if(data.id==item.id){continue;}
values.push(item.id);}
self.$element.val(values.join(self._valueSeparator));self.$element.trigger('change');});};InputData.prototype.query=function(_,params,callback){var results=[];for(var d=0;d<this._currentData.length;d++){var data=this._currentData[d];var matches=this.matches(params,data);if(matches!==null){results.push(matches);}}
callback({results:results});};InputData.prototype.addOptions=function(_,$options){var options=$.map($options,function($option){return $.data($option[0],'data');});this._currentData.push.apply(this._currentData,options);};return InputData;});S2.define('select2/compat/matcher',['jquery'],function($){function oldMatcher(matcher){function wrappedMatcher(params,data){var match=$.extend(true,{},data);if(params.term==null||$.trim(params.term)===''){return match;}
if(data.children){for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];var doesMatch=matcher(params.term,child.text,child);if(!doesMatch){match.children.splice(c,1);}}
if(match.children.length>0){return match;}}
if(matcher(params.term,data.text,data)){return match;}
return null;}
return wrappedMatcher;}
return oldMatcher;});S2.define('select2/compat/query',[],function(){function Query(decorated,$element,options){if(options.get('debug')&&window.console&&console.warn){console.warn('Select2: The `query` option has been deprecated in favor of a '+'custom data adapter that overrides the `query` method. Support '+'will be removed for the `query` option in future versions of '+'Select2.');}
decorated.call(this,$element,options);}
Query.prototype.query=function(_,params,callback){params.callback=callback;var query=this.options.get('query');query.call(null,params);};return Query;});S2.define('select2/dropdown/attachContainer',[],function(){function AttachContainer(decorated,$element,options){decorated.call(this,$element,options);}
AttachContainer.prototype.position=function(decorated,$dropdown,$container){var $dropdownContainer=$container.find('.dropdown-wrapper');$dropdownContainer.append($dropdown);$dropdown.addClass('select2-dropdown--below');$container.addClass('select2-container--below');};return AttachContainer;});S2.define('select2/dropdown/stopPropagation',[],function(){function StopPropagation(){}
StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=['blur','change','click','dblclick','focus','focusin','focusout','input','keydown','keyup','keypress','mousedown','mouseenter','mouseleave','mousemove','mouseover','mouseup','search','touchend','touchstart'];this.$dropdown.on(stoppedEvents.join(' '),function(evt){evt.stopPropagation();});};return StopPropagation;});S2.define('select2/selection/stopPropagation',[],function(){function StopPropagation(){}
StopPropagation.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);var stoppedEvents=['blur','change','click','dblclick','focus','focusin','focusout','input','keydown','keyup','keypress','mousedown','mouseenter','mouseleave','mousemove','mouseover','mouseup','search','touchend','touchstart'];this.$selection.on(stoppedEvents.join(' '),function(evt){evt.stopPropagation();});};return StopPropagation;});
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(factory){if(typeof S2.define==='function'&&S2.define.amd){S2.define('jquery-mousewheel',['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));S2.define('jquery.select2',['jquery','jquery-mousewheel','./select2/core','./select2/defaults'],function($,_,Select2,Defaults){if($.fn.select2==null){var thisMethods=['open','close','destroy'];$.fn.select2=function(options){options=options||{};if(typeof options==='object'){this.each(function(){var instanceOptions=$.extend(true,{},options);var instance=new Select2($(this),instanceOptions);});return this;}else if(typeof options==='string'){var ret;var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$(this).data('select2');if(instance==null&&window.console&&console.error){console.error('The select2(\''+options+'\') method was called on an '+'element that is not using Select2.');}
ret=instance[options].apply(instance,args);});if($.inArray(options,thisMethods)>-1){return this;}
return ret;}else{throw new Error('Invalid arguments for Select2: '+options);}};}
if($.fn.select2.defaults==null){$.fn.select2.defaults=Defaults;}
return Select2;});return{define:S2.define,require:S2.require};}());var select2=S2.require('jquery.select2');jQuery.fn.select2.amd=S2;return select2;}));if(Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get){(function(){var innerText=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return innerText.get.call(this);},set:function(s){return innerText.set.call(this,s);}});})();}
if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};};var wysihtml5={version:"0.4.8",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\uFEFF",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};;(function(global){var amdSupported=(typeof global.define=="function"&&global.define.amd);var OBJECT="object",FUNCTION="function",UNDEFINED="undefined";var domRangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var domRangeMethods=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var textRangeProperties=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var textRangeMethods=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function isHostMethod(o,p){var t=typeof o[p];return t==FUNCTION||(!!(t==OBJECT&&o[p]))||t=="unknown";}
function isHostObject(o,p){return!!(typeof o[p]==OBJECT&&o[p]);}
function isHostProperty(o,p){return typeof o[p]!=UNDEFINED;}
function createMultiplePropertyTest(testFunc){return function(o,props){var i=props.length;while(i--){if(!testFunc(o,props[i])){return false;}}
return true;};}
var areHostMethods=createMultiplePropertyTest(isHostMethod);var areHostObjects=createMultiplePropertyTest(isHostObject);var areHostProperties=createMultiplePropertyTest(isHostProperty);function isTextRange(range){return range&&areHostMethods(range,textRangeMethods)&&areHostProperties(range,textRangeProperties);}
function getBody(doc){return isHostObject(doc,"body")?doc.body:doc.getElementsByTagName("body")[0];}
var modules={};var api={version:"1.3alpha.804",initialized:false,supported:true,util:{isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:areHostMethods,areHostObjects:areHostObjects,areHostProperties:areHostProperties,isTextRange:isTextRange,getBody:getBody},features:{},modules:modules,config:{alertOnFail:true,alertOnWarn:false,preferTextRange:false}};function consoleLog(msg){if(isHostObject(window,"console")&&isHostMethod(window.console,"log")){window.console.log(msg);}}
function alertOrLog(msg,shouldAlert){if(shouldAlert){window.alert(msg);}else{consoleLog(msg);}}
function fail(reason){api.initialized=true;api.supported=false;alertOrLog("Rangy is not supported on this page in your browser. Reason: "+reason,api.config.alertOnFail);}
api.fail=fail;function warn(msg){alertOrLog("Rangy warning: "+msg,api.config.alertOnWarn);}
api.warn=warn;if({}.hasOwnProperty){api.util.extend=function(obj,props,deep){var o,p;for(var i in props){if(props.hasOwnProperty(i)){o=obj[i];p=props[i];if(deep&&o!==null&&typeof o=="object"&&p!==null&&typeof p=="object"){api.util.extend(o,p,true);}
obj[i]=p;}}
return obj;};}else{fail("hasOwnProperty not supported");}
(function(){var el=document.createElement("div");el.appendChild(document.createElement("span"));var slice=[].slice;var toArray;try{if(slice.call(el.childNodes,0)[0].nodeType==1){toArray=function(arrayLike){return slice.call(arrayLike,0);};}}catch(e){}
if(!toArray){toArray=function(arrayLike){var arr=[];for(var i=0,len=arrayLike.length;i<len;++i){arr[i]=arrayLike[i];}
return arr;};}
api.util.toArray=toArray;})();var addListener;if(isHostMethod(document,"addEventListener")){addListener=function(obj,eventType,listener){obj.addEventListener(eventType,listener,false);};}else if(isHostMethod(document,"attachEvent")){addListener=function(obj,eventType,listener){obj.attachEvent("on"+eventType,listener);};}else{fail("Document does not have required addEventListener or attachEvent method");}
api.util.addListener=addListener;var initListeners=[];function getErrorDesc(ex){return ex.message||ex.description||String(ex);}
function init(){if(api.initialized){return;}
var testRange;var implementsDomRange=false,implementsTextRange=false;if(isHostMethod(document,"createRange")){testRange=document.createRange();if(areHostMethods(testRange,domRangeMethods)&&areHostProperties(testRange,domRangeProperties)){implementsDomRange=true;}
testRange.detach();}
var body=getBody(document);if(!body||body.nodeName.toLowerCase()!="body"){fail("No body element found");return;}
if(body&&isHostMethod(body,"createTextRange")){testRange=body.createTextRange();if(isTextRange(testRange)){implementsTextRange=true;}}
if(!implementsDomRange&&!implementsTextRange){fail("Neither Range nor TextRange are available");return;}
api.initialized=true;api.features={implementsDomRange:implementsDomRange,implementsTextRange:implementsTextRange};var module,errorMessage;for(var moduleName in modules){if((module=modules[moduleName])instanceof Module){module.init(module,api);}}
for(var i=0,len=initListeners.length;i<len;++i){try{initListeners[i](api);}catch(ex){errorMessage="Rangy init listener threw an exception. Continuing. Detail: "+getErrorDesc(ex);consoleLog(errorMessage);}}}
api.init=init;api.addInitListener=function(listener){if(api.initialized){listener(api);}else{initListeners.push(listener);}};var createMissingNativeApiListeners=[];api.addCreateMissingNativeApiListener=function(listener){createMissingNativeApiListeners.push(listener);};function createMissingNativeApi(win){win=win||window;init();for(var i=0,len=createMissingNativeApiListeners.length;i<len;++i){createMissingNativeApiListeners[i](win);}}
api.createMissingNativeApi=createMissingNativeApi;function Module(name,dependencies,initializer){this.name=name;this.dependencies=dependencies;this.initialized=false;this.supported=false;this.initializer=initializer;}
Module.prototype={init:function(api){var requiredModuleNames=this.dependencies||[];for(var i=0,len=requiredModuleNames.length,requiredModule,moduleName;i<len;++i){moduleName=requiredModuleNames[i];requiredModule=modules[moduleName];if(!requiredModule||!(requiredModule instanceof Module)){throw new Error("required module '"+moduleName+"' not found");}
requiredModule.init();if(!requiredModule.supported){throw new Error("required module '"+moduleName+"' not supported");}}
this.initializer(this)},fail:function(reason){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+reason);},warn:function(msg){api.warn("Module "+this.name+": "+msg);},deprecationNotice:function(deprecated,replacement){api.warn("DEPRECATED: "+deprecated+" in module "+this.name+"is deprecated. Please use "
+replacement+" instead");},createError:function(msg){return new Error("Error in Rangy "+this.name+" module: "+msg);}};function createModule(isCore,name,dependencies,initFunc){var newModule=new Module(name,dependencies,function(module){if(!module.initialized){module.initialized=true;try{initFunc(api,module);module.supported=true;}catch(ex){var errorMessage="Module '"+name+"' failed to load: "+getErrorDesc(ex);consoleLog(errorMessage);}}});modules[name]=newModule;}
api.createModule=function(name){var initFunc,dependencies;if(arguments.length==2){initFunc=arguments[1];dependencies=[];}else{initFunc=arguments[2];dependencies=arguments[1];}
createModule(false,name,dependencies,initFunc);};api.createCoreModule=function(name,dependencies,initFunc){createModule(true,name,dependencies,initFunc);};function RangePrototype(){}
api.RangePrototype=RangePrototype;api.rangePrototype=new RangePrototype();function SelectionPrototype(){}
api.selectionPrototype=new SelectionPrototype();var docReady=false;var loadHandler=function(e){if(!docReady){docReady=true;if(!api.initialized){init();}}};if(typeof window==UNDEFINED){fail("No window found");return;}
if(typeof document==UNDEFINED){fail("No document found");return;}
if(isHostMethod(document,"addEventListener")){document.addEventListener("DOMContentLoaded",loadHandler,false);}
addListener(window,"load",loadHandler);if(amdSupported){global.define(function(){api.amd=true;return api;});}
global.rangy=api;})(this);rangy.createCoreModule("DomUtil",[],function(api,module){var UNDEF="undefined";var util=api.util;if(!util.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){module.fail("document missing a Node creation method");}
if(!util.isHostMethod(document,"getElementsByTagName")){module.fail("document missing getElementsByTagName method");}
var el=document.createElement("div");if(!util.areHostMethods(el,["insertBefore","appendChild","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"]))){module.fail("Incomplete Element implementation");}
if(!util.isHostProperty(el,"innerHTML")){module.fail("Element is missing innerHTML property");}
var textNode=document.createTextNode("test");if(!util.areHostMethods(textNode,["splitText","deleteData","insertData","appendData","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"])||!util.areHostProperties(textNode,["data"]))){module.fail("Incomplete Text Node implementation");}
var arrayContains=function(arr,val){var i=arr.length;while(i--){if(arr[i]===val){return true;}}
return false;};function isHtmlNamespace(node){var ns;return typeof node.namespaceURI==UNDEF||((ns=node.namespaceURI)===null||ns=="http://www.w3.org/1999/xhtml");}
function parentElement(node){var parent=node.parentNode;return(parent.nodeType==1)?parent:null;}
function getNodeIndex(node){var i=0;while((node=node.previousSibling)){++i;}
return i;}
function getNodeLength(node){switch(node.nodeType){case 7:case 10:return 0;case 3:case 8:return node.length;default:return node.childNodes.length;}}
function getCommonAncestor(node1,node2){var ancestors=[],n;for(n=node1;n;n=n.parentNode){ancestors.push(n);}
for(n=node2;n;n=n.parentNode){if(arrayContains(ancestors,n)){return n;}}
return null;}
function isAncestorOf(ancestor,descendant,selfIsAncestor){var n=selfIsAncestor?descendant:descendant.parentNode;while(n){if(n===ancestor){return true;}else{n=n.parentNode;}}
return false;}
function isOrIsAncestorOf(ancestor,descendant){return isAncestorOf(ancestor,descendant,true);}
function getClosestAncestorIn(node,ancestor,selfIsAncestor){var p,n=selfIsAncestor?node:node.parentNode;while(n){p=n.parentNode;if(p===ancestor){return n;}
n=p;}
return null;}
function isCharacterDataNode(node){var t=node.nodeType;return t==3||t==4||t==8;}
function isTextOrCommentNode(node){if(!node){return false;}
var t=node.nodeType;return t==3||t==8;}
function insertAfter(node,precedingNode){var nextNode=precedingNode.nextSibling,parent=precedingNode.parentNode;if(nextNode){parent.insertBefore(node,nextNode);}else{parent.appendChild(node);}
return node;}
function splitDataNode(node,index,positionsToPreserve){var newNode=node.cloneNode(false);newNode.deleteData(0,index);node.deleteData(index,node.length-index);insertAfter(newNode,node);if(positionsToPreserve){for(var i=0,position;position=positionsToPreserve[i++];){if(position.node==node&&position.offset>index){position.node=newNode;position.offset-=index;}
else if(position.node==node.parentNode&&position.offset>getNodeIndex(node)){++position.offset;}}}
return newNode;}
function getDocument(node){if(node.nodeType==9){return node;}else if(typeof node.ownerDocument!=UNDEF){return node.ownerDocument;}else if(typeof node.document!=UNDEF){return node.document;}else if(node.parentNode){return getDocument(node.parentNode);}else{throw module.createError("getDocument: no document found for node");}}
function getWindow(node){var doc=getDocument(node);if(typeof doc.defaultView!=UNDEF){return doc.defaultView;}else if(typeof doc.parentWindow!=UNDEF){return doc.parentWindow;}else{throw module.createError("Cannot get a window object for node");}}
function getIframeDocument(iframeEl){if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument;}else if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow.document;}else{throw module.createError("getIframeDocument: No Document object found for iframe element");}}
function getIframeWindow(iframeEl){if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow;}else if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument.defaultView;}else{throw module.createError("getIframeWindow: No Window object found for iframe element");}}
function isWindow(obj){return obj&&util.isHostMethod(obj,"setTimeout")&&util.isHostObject(obj,"document");}
function getContentDocument(obj,module,methodName){var doc;if(!obj){doc=document;}
else if(util.isHostProperty(obj,"nodeType")){doc=(obj.nodeType==1&&obj.tagName.toLowerCase()=="iframe")?getIframeDocument(obj):getDocument(obj);}
else if(isWindow(obj)){doc=obj.document;}
if(!doc){throw module.createError(methodName+"(): Parameter must be a Window object or DOM node");}
return doc;}
function getRootContainer(node){var parent;while((parent=node.parentNode)){node=parent;}
return node;}
function comparePoints(nodeA,offsetA,nodeB,offsetB){var nodeC,root,childA,childB,n;if(nodeA==nodeB){return offsetA===offsetB?0:(offsetA<offsetB)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeB,nodeA,true))){return offsetA<=getNodeIndex(nodeC)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeA,nodeB,true))){return getNodeIndex(nodeC)<offsetB?-1:1;}else{root=getCommonAncestor(nodeA,nodeB);if(!root){throw new Error("comparePoints error: nodes have no common ancestor");}
childA=(nodeA===root)?root:getClosestAncestorIn(nodeA,root,true);childB=(nodeB===root)?root:getClosestAncestorIn(nodeB,root,true);if(childA===childB){throw module.createError("comparePoints got to case 4 and childA and childB are the same!");}else{n=root.firstChild;while(n){if(n===childA){return-1;}else if(n===childB){return 1;}
n=n.nextSibling;}}}}
var crashyTextNodes=false;function isBrokenNode(node){try{node.parentNode;return false;}catch(e){return true;}}
(function(){var el=document.createElement("b");el.innerHTML="1";var textNode=el.firstChild;el.innerHTML="<br>";crashyTextNodes=isBrokenNode(textNode);api.features.crashyTextNodes=crashyTextNodes;})();function inspectNode(node){if(!node){return"[No node]";}
if(crashyTextNodes&&isBrokenNode(node)){return"[Broken node]";}
if(isCharacterDataNode(node)){return'"'+node.data+'"';}
if(node.nodeType==1){var idAttr=node.id?' id="'+node.id+'"':"";return"<"+node.nodeName+idAttr+">["+getNodeIndex(node)+"]["+node.childNodes.length+"]["+(node.innerHTML||"[innerHTML not supported]").slice(0,25)+"]";}
return node.nodeName;}
function fragmentFromNodeChildren(node){var fragment=getDocument(node).createDocumentFragment(),child;while((child=node.firstChild)){fragment.appendChild(child);}
return fragment;}
var getComputedStyleProperty;if(typeof window.getComputedStyle!=UNDEF){getComputedStyleProperty=function(el,propName){return getWindow(el).getComputedStyle(el,null)[propName];};}else if(typeof document.documentElement.currentStyle!=UNDEF){getComputedStyleProperty=function(el,propName){return el.currentStyle[propName];};}else{module.fail("No means of obtaining computed style properties found");}
function NodeIterator(root){this.root=root;this._next=root;}
NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next;},next:function(){var n=this._current=this._next;var child,next;if(this._current){child=n.firstChild;if(child){this._next=child;}else{next=null;while((n!==this.root)&&!(next=n.nextSibling)){n=n.parentNode;}
this._next=next;}}
return this._current;},detach:function(){this._current=this._next=this.root=null;}};function createIterator(root){return new NodeIterator(root);}
function DomPosition(node,offset){this.node=node;this.offset=offset;}
DomPosition.prototype={equals:function(pos){return!!pos&&this.node===pos.node&&this.offset==pos.offset;},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]";},toString:function(){return this.inspect();}};function DOMException(codeName){this.code=this[codeName];this.codeName=codeName;this.message="DOMException: "+this.codeName;}
DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};DOMException.prototype.toString=function(){return this.message;};api.dom={arrayContains:arrayContains,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,isOrIsAncestorOf:isOrIsAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,isTextOrCommentNode:isTextOrCommentNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:util.getBody,isWindow:isWindow,getContentDocument:getContentDocument,getRootContainer:getRootContainer,comparePoints:comparePoints,isBrokenNode:isBrokenNode,inspectNode:inspectNode,getComputedStyleProperty:getComputedStyleProperty,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition};api.DOMException=DOMException;});rangy.createCoreModule("DomRange",["DomUtil"],function(api,module){var dom=api.dom;var util=api.util;var DomPosition=dom.DomPosition;var DOMException=api.DOMException;var isCharacterDataNode=dom.isCharacterDataNode;var getNodeIndex=dom.getNodeIndex;var isOrIsAncestorOf=dom.isOrIsAncestorOf;var getDocument=dom.getDocument;var comparePoints=dom.comparePoints;var splitDataNode=dom.splitDataNode;var getClosestAncestorIn=dom.getClosestAncestorIn;var getNodeLength=dom.getNodeLength;var arrayContains=dom.arrayContains;var getRootContainer=dom.getRootContainer;var crashyTextNodes=api.features.crashyTextNodes;function isNonTextPartiallySelected(node,range){return(node.nodeType!=3)&&(isOrIsAncestorOf(node,range.startContainer)||isOrIsAncestorOf(node,range.endContainer));}
function getRangeDocument(range){return range.document||getDocument(range.startContainer);}
function getBoundaryBeforeNode(node){return new DomPosition(node.parentNode,getNodeIndex(node));}
function getBoundaryAfterNode(node){return new DomPosition(node.parentNode,getNodeIndex(node)+1);}
function insertNodeAtPosition(node,n,o){var firstNodeInserted=node.nodeType==11?node.firstChild:node;if(isCharacterDataNode(n)){if(o==n.length){dom.insertAfter(node,n);}else{n.parentNode.insertBefore(node,o==0?n:splitDataNode(n,o));}}else if(o>=n.childNodes.length){n.appendChild(node);}else{n.insertBefore(node,n.childNodes[o]);}
return firstNodeInserted;}
function rangesIntersect(rangeA,rangeB,touchingIsIntersecting){assertRangeValid(rangeA);assertRangeValid(rangeB);if(getRangeDocument(rangeB)!=getRangeDocument(rangeA)){throw new DOMException("WRONG_DOCUMENT_ERR");}
var startComparison=comparePoints(rangeA.startContainer,rangeA.startOffset,rangeB.endContainer,rangeB.endOffset),endComparison=comparePoints(rangeA.endContainer,rangeA.endOffset,rangeB.startContainer,rangeB.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;}
function cloneSubtree(iterator){var partiallySelected;for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){partiallySelected=iterator.isPartiallySelectedSubtree();node=node.cloneNode(!partiallySelected);if(partiallySelected){subIterator=iterator.getSubtreeIterator();node.appendChild(cloneSubtree(subIterator));subIterator.detach(true);}
if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}
frag.appendChild(node);}
return frag;}
function iterateSubtree(rangeIterator,func,iteratorState){var it,n;iteratorState=iteratorState||{stop:false};for(var node,subRangeIterator;node=rangeIterator.next();){if(rangeIterator.isPartiallySelectedSubtree()){if(func(node)===false){iteratorState.stop=true;return;}else{subRangeIterator=rangeIterator.getSubtreeIterator();iterateSubtree(subRangeIterator,func,iteratorState);subRangeIterator.detach(true);if(iteratorState.stop){return;}}}else{it=dom.createIterator(node);while((n=it.next())){if(func(n)===false){iteratorState.stop=true;return;}}}}}
function deleteSubtree(iterator){var subIterator;while(iterator.next()){if(iterator.isPartiallySelectedSubtree()){subIterator=iterator.getSubtreeIterator();deleteSubtree(subIterator);subIterator.detach(true);}else{iterator.remove();}}}
function extractSubtree(iterator){for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){if(iterator.isPartiallySelectedSubtree()){node=node.cloneNode(false);subIterator=iterator.getSubtreeIterator();node.appendChild(extractSubtree(subIterator));subIterator.detach(true);}else{iterator.remove();}
if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}
frag.appendChild(node);}
return frag;}
function getNodesInRange(range,nodeTypes,filter){var filterNodeTypes=!!(nodeTypes&&nodeTypes.length),regex;var filterExists=!!filter;if(filterNodeTypes){regex=new RegExp("^("+nodeTypes.join("|")+")$");}
var nodes=[];iterateSubtree(new RangeIterator(range,false),function(node){if(filterNodeTypes&&!regex.test(node.nodeType)){return;}
if(filterExists&&!filter(node)){return;}
var sc=range.startContainer;if(node==sc&&isCharacterDataNode(sc)&&range.startOffset==sc.length){return;}
var ec=range.endContainer;if(node==ec&&isCharacterDataNode(ec)&&range.endOffset==0){return;}
nodes.push(node);});return nodes;}
function inspect(range){var name=(typeof range.getName=="undefined")?"Range":range.getName();return"["+name+"("+dom.inspectNode(range.startContainer)+":"+range.startOffset+", "+
dom.inspectNode(range.endContainer)+":"+range.endOffset+")]";}
function RangeIterator(range,clonePartiallySelectedTextNodes){this.range=range;this.clonePartiallySelectedTextNodes=clonePartiallySelectedTextNodes;if(!range.collapsed){this.sc=range.startContainer;this.so=range.startOffset;this.ec=range.endContainer;this.eo=range.endOffset;var root=range.commonAncestorContainer;if(this.sc===this.ec&&isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc;}else{this._first=this._next=(this.sc===root&&!isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:getClosestAncestorIn(this.sc,root,true);this._last=(this.ec===root&&!isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:getClosestAncestorIn(this.ec,root,true);}}}
RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first;},hasNext:function(){return!!this._next;},next:function(){var current=this._current=this._next;if(current){this._next=(current!==this._last)?current.nextSibling:null;if(isCharacterDataNode(current)&&this.clonePartiallySelectedTextNodes){if(current===this.ec){(current=current.cloneNode(true)).deleteData(this.eo,current.length-this.eo);}
if(this._current===this.sc){(current=current.cloneNode(true)).deleteData(0,this.so);}}}
return current;},remove:function(){var current=this._current,start,end;if(isCharacterDataNode(current)&&(current===this.sc||current===this.ec)){start=(current===this.sc)?this.so:0;end=(current===this.ec)?this.eo:current.length;if(start!=end){current.deleteData(start,end-start);}}else{if(current.parentNode){current.parentNode.removeChild(current);}else{}}},isPartiallySelectedSubtree:function(){var current=this._current;return isNonTextPartiallySelected(current,this.range);},getSubtreeIterator:function(){var subRange;if(this.isSingleCharacterDataNode){subRange=this.range.cloneRange();subRange.collapse(false);}else{subRange=new Range(getRangeDocument(this.range));var current=this._current;var startContainer=current,startOffset=0,endContainer=current,endOffset=getNodeLength(current);if(isOrIsAncestorOf(current,this.sc)){startContainer=this.sc;startOffset=this.so;}
if(isOrIsAncestorOf(current,this.ec)){endContainer=this.ec;endOffset=this.eo;}
updateBoundaries(subRange,startContainer,startOffset,endContainer,endOffset);}
return new RangeIterator(subRange,this.clonePartiallySelectedTextNodes);},detach:function(detachRange){if(detachRange){this.range.detach();}
this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null;}};function RangeException(codeName){this.code=this[codeName];this.codeName=codeName;this.message="RangeException: "+this.codeName;}
RangeException.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};RangeException.prototype.toString=function(){return this.message;};var beforeAfterNodeTypes=[1,3,4,5,7,8,10];var rootContainerNodeTypes=[2,9,11];var readonlyNodeTypes=[5,6,10,12];var insertableNodeTypes=[1,3,4,5,7,8,10,11];var surroundNodeTypes=[1,3,4,5,7,8];function createAncestorFinder(nodeTypes){return function(node,selfIsAncestor){var t,n=selfIsAncestor?node:node.parentNode;while(n){t=n.nodeType;if(arrayContains(nodeTypes,t)){return n;}
n=n.parentNode;}
return null;};}
var getDocumentOrFragmentContainer=createAncestorFinder([9,11]);var getReadonlyAncestor=createAncestorFinder(readonlyNodeTypes);var getDocTypeNotationEntityAncestor=createAncestorFinder([6,10,12]);function assertNoDocTypeNotationEntityAncestor(node,allowSelf){if(getDocTypeNotationEntityAncestor(node,allowSelf)){throw new RangeException("INVALID_NODE_TYPE_ERR");}}
function assertNotDetached(range){if(!range.startContainer){throw new DOMException("INVALID_STATE_ERR");}}
function assertValidNodeType(node,invalidTypes){if(!arrayContains(invalidTypes,node.nodeType)){throw new RangeException("INVALID_NODE_TYPE_ERR");}}
function assertValidOffset(node,offset){if(offset<0||offset>(isCharacterDataNode(node)?node.length:node.childNodes.length)){throw new DOMException("INDEX_SIZE_ERR");}}
function assertSameDocumentOrFragment(node1,node2){if(getDocumentOrFragmentContainer(node1,true)!==getDocumentOrFragmentContainer(node2,true)){throw new DOMException("WRONG_DOCUMENT_ERR");}}
function assertNodeNotReadOnly(node){if(getReadonlyAncestor(node,true)){throw new DOMException("NO_MODIFICATION_ALLOWED_ERR");}}
function assertNode(node,codeName){if(!node){throw new DOMException(codeName);}}
function isOrphan(node){return(crashyTextNodes&&dom.isBrokenNode(node))||!arrayContains(rootContainerNodeTypes,node.nodeType)&&!getDocumentOrFragmentContainer(node,true);}
function isValidOffset(node,offset){return offset<=(isCharacterDataNode(node)?node.length:node.childNodes.length);}
function isRangeValid(range){return(!!range.startContainer&&!!range.endContainer&&!isOrphan(range.startContainer)&&!isOrphan(range.endContainer)&&isValidOffset(range.startContainer,range.startOffset)&&isValidOffset(range.endContainer,range.endOffset));}
function assertRangeValid(range){assertNotDetached(range);if(!isRangeValid(range)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+range.inspect()+")");}}
var styleEl=document.createElement("style");var htmlParsingConforms=false;try{styleEl.innerHTML="<b>x</b>";htmlParsingConforms=(styleEl.firstChild.nodeType==3);}catch(e){}
api.features.htmlParsingConforms=htmlParsingConforms;var createContextualFragment=htmlParsingConforms?function(fragmentStr){var node=this.startContainer;var doc=getDocument(node);if(!node){throw new DOMException("INVALID_STATE_ERR");}
var el=null;if(node.nodeType==1){el=node;}else if(isCharacterDataNode(node)){el=dom.parentElement(node);}
if(el===null||(el.nodeName=="HTML"&&dom.isHtmlNamespace(getDocument(el).documentElement)&&dom.isHtmlNamespace(el))){el=doc.createElement("body");}else{el=el.cloneNode(false);}
el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);}:function(fragmentStr){assertNotDetached(this);var doc=getRangeDocument(this);var el=doc.createElement("body");el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);};function splitRangeBoundaries(range,positionsToPreserve){assertRangeValid(range);var sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset;var startEndSame=(sc===ec);if(isCharacterDataNode(ec)&&eo>0&&eo<ec.length){splitDataNode(ec,eo,positionsToPreserve);}
if(isCharacterDataNode(sc)&&so>0&&so<sc.length){sc=splitDataNode(sc,so,positionsToPreserve);if(startEndSame){eo-=so;ec=sc;}else if(ec==sc.parentNode&&eo>=getNodeIndex(sc)){eo++;}
so=0;}
range.setStartAndEnd(sc,so,ec,eo);}
var rangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var s2s=0,s2e=1,e2e=2,e2s=3;var n_b=0,n_a=1,n_b_a=2,n_i=3;util.extend(api.rangePrototype,{compareBoundaryPoints:function(how,range){assertRangeValid(this);assertSameDocumentOrFragment(this.startContainer,range.startContainer);var nodeA,offsetA,nodeB,offsetB;var prefixA=(how==e2s||how==s2s)?"start":"end";var prefixB=(how==s2e||how==s2s)?"start":"end";nodeA=this[prefixA+"Container"];offsetA=this[prefixA+"Offset"];nodeB=range[prefixB+"Container"];offsetB=range[prefixB+"Offset"];return comparePoints(nodeA,offsetA,nodeB,offsetB);},insertNode:function(node){assertRangeValid(this);assertValidNodeType(node,insertableNodeTypes);assertNodeNotReadOnly(this.startContainer);if(isOrIsAncestorOf(node,this.startContainer)){throw new DOMException("HIERARCHY_REQUEST_ERR");}
var firstNodeInserted=insertNodeAtPosition(node,this.startContainer,this.startOffset);this.setStartBefore(firstNodeInserted);},cloneContents:function(){assertRangeValid(this);var clone,frag;if(this.collapsed){return getRangeDocument(this).createDocumentFragment();}else{if(this.startContainer===this.endContainer&&isCharacterDataNode(this.startContainer)){clone=this.startContainer.cloneNode(true);clone.data=clone.data.slice(this.startOffset,this.endOffset);frag=getRangeDocument(this).createDocumentFragment();frag.appendChild(clone);return frag;}else{var iterator=new RangeIterator(this,true);clone=cloneSubtree(iterator);iterator.detach();}
return clone;}},canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&(isNonTextPartiallySelected(iterator._first,this))||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},surroundContents:function(node){assertValidNodeType(node,surroundNodeTypes);if(!this.canSurroundContents()){throw new RangeException("BAD_BOUNDARYPOINTS_ERR");}
var content=this.extractContents();if(node.hasChildNodes()){while(node.lastChild){node.removeChild(node.lastChild);}}
insertNodeAtPosition(node,this.startContainer,this.startOffset);node.appendChild(content);this.selectNode(node);},cloneRange:function(){assertRangeValid(this);var range=new Range(getRangeDocument(this));var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=this[prop];}
return range;},toString:function(){assertRangeValid(this);var sc=this.startContainer;if(sc===this.endContainer&&isCharacterDataNode(sc)){return(sc.nodeType==3||sc.nodeType==4)?sc.data.slice(this.startOffset,this.endOffset):"";}else{var textParts=[],iterator=new RangeIterator(this,true);iterateSubtree(iterator,function(node){if(node.nodeType==3||node.nodeType==4){textParts.push(node.data);}});iterator.detach();return textParts.join("");}},compareNode:function(node){assertRangeValid(this);var parent=node.parentNode;var nodeIndex=getNodeIndex(node);if(!parent){throw new DOMException("NOT_FOUND_ERR");}
var startComparison=this.comparePoint(parent,nodeIndex),endComparison=this.comparePoint(parent,nodeIndex+1);if(startComparison<0){return(endComparison>0)?n_b_a:n_b;}else{return(endComparison>0)?n_a:n_i;}},comparePoint:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);if(comparePoints(node,offset,this.startContainer,this.startOffset)<0){return-1;}else if(comparePoints(node,offset,this.endContainer,this.endOffset)>0){return 1;}
return 0;},createContextualFragment:createContextualFragment,toHtml:function(){assertRangeValid(this);var container=this.commonAncestorContainer.parentNode.cloneNode(false);container.appendChild(this.cloneContents());return container.innerHTML;},intersectsNode:function(node,touchingIsIntersecting){assertRangeValid(this);assertNode(node,"NOT_FOUND_ERR");if(getDocument(node)!==getRangeDocument(this)){return false;}
var parent=node.parentNode,offset=getNodeIndex(node);assertNode(parent,"NOT_FOUND_ERR");var startComparison=comparePoints(parent,offset,this.endContainer,this.endOffset),endComparison=comparePoints(parent,offset+1,this.startContainer,this.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;},isPointInRange:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);return(comparePoints(node,offset,this.startContainer,this.startOffset)>=0)&&(comparePoints(node,offset,this.endContainer,this.endOffset)<=0);},intersectsRange:function(range){return rangesIntersect(this,range,false);},intersectsOrTouchesRange:function(range){return rangesIntersect(this,range,true);},intersection:function(range){if(this.intersectsRange(range)){var startComparison=comparePoints(this.startContainer,this.startOffset,range.startContainer,range.startOffset),endComparison=comparePoints(this.endContainer,this.endOffset,range.endContainer,range.endOffset);var intersectionRange=this.cloneRange();if(startComparison==-1){intersectionRange.setStart(range.startContainer,range.startOffset);}
if(endComparison==1){intersectionRange.setEnd(range.endContainer,range.endOffset);}
return intersectionRange;}
return null;},union:function(range){if(this.intersectsOrTouchesRange(range)){var unionRange=this.cloneRange();if(comparePoints(range.startContainer,range.startOffset,this.startContainer,this.startOffset)==-1){unionRange.setStart(range.startContainer,range.startOffset);}
if(comparePoints(range.endContainer,range.endOffset,this.endContainer,this.endOffset)==1){unionRange.setEnd(range.endContainer,range.endOffset);}
return unionRange;}else{throw new RangeException("Ranges do not intersect");}},containsNode:function(node,allowPartial){if(allowPartial){return this.intersectsNode(node,false);}else{return this.compareNode(node)==n_i;}},containsNodeContents:function(node){return this.comparePoint(node,0)>=0&&this.comparePoint(node,getNodeLength(node))<=0;},containsRange:function(range){var intersection=this.intersection(range);return intersection!==null&&range.equals(intersection);},containsNodeText:function(node){var nodeRange=this.cloneRange();nodeRange.selectNode(node);var textNodes=nodeRange.getNodes([3]);if(textNodes.length>0){nodeRange.setStart(textNodes[0],0);var lastTextNode=textNodes.pop();nodeRange.setEnd(lastTextNode,lastTextNode.length);var contains=this.containsRange(nodeRange);nodeRange.detach();return contains;}else{return this.containsNodeContents(node);}},getNodes:function(nodeTypes,filter){assertRangeValid(this);return getNodesInRange(this,nodeTypes,filter);},getDocument:function(){return getRangeDocument(this);},collapseBefore:function(node){assertNotDetached(this);this.setEndBefore(node);this.collapse(false);},collapseAfter:function(node){assertNotDetached(this);this.setStartAfter(node);this.collapse(true);},getBookmark:function(containerNode){var doc=getRangeDocument(this);var preSelectionRange=api.createRange(doc);containerNode=containerNode||dom.getBody(doc);preSelectionRange.selectNodeContents(containerNode);var range=this.intersection(preSelectionRange);var start=0,end=0;if(range){preSelectionRange.setEnd(range.startContainer,range.startOffset);start=preSelectionRange.toString().length;end=start+range.toString().length;preSelectionRange.detach();}
return{start:start,end:end,containerNode:containerNode};},moveToBookmark:function(bookmark){var containerNode=bookmark.containerNode;var charIndex=0;this.setStart(containerNode,0);this.collapse(true);var nodeStack=[containerNode],node,foundStart=false,stop=false;var nextCharIndex,i,childNodes;while(!stop&&(node=nodeStack.pop())){if(node.nodeType==3){nextCharIndex=charIndex+node.length;if(!foundStart&&bookmark.start>=charIndex&&bookmark.start<=nextCharIndex){this.setStart(node,bookmark.start-charIndex);foundStart=true;}
if(foundStart&&bookmark.end>=charIndex&&bookmark.end<=nextCharIndex){this.setEnd(node,bookmark.end-charIndex);stop=true;}
charIndex=nextCharIndex;}else{childNodes=node.childNodes;i=childNodes.length;while(i--){nodeStack.push(childNodes[i]);}}}},getName:function(){return"DomRange";},equals:function(range){return Range.rangesEqual(this,range);},isValid:function(){return isRangeValid(this);},inspect:function(){return inspect(this);}});function copyComparisonConstantsToObject(obj){obj.START_TO_START=s2s;obj.START_TO_END=s2e;obj.END_TO_END=e2e;obj.END_TO_START=e2s;obj.NODE_BEFORE=n_b;obj.NODE_AFTER=n_a;obj.NODE_BEFORE_AND_AFTER=n_b_a;obj.NODE_INSIDE=n_i;}
function copyComparisonConstants(constructor){copyComparisonConstantsToObject(constructor);copyComparisonConstantsToObject(constructor.prototype);}
function createRangeContentRemover(remover,boundaryUpdater){return function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,root=this.commonAncestorContainer;var iterator=new RangeIterator(this,true);var node,boundary;if(sc!==root){node=getClosestAncestorIn(sc,root,true);boundary=getBoundaryAfterNode(node);sc=boundary.node;so=boundary.offset;}
iterateSubtree(iterator,assertNodeNotReadOnly);iterator.reset();var returnValue=remover(iterator);iterator.detach();boundaryUpdater(this,sc,so,sc,so);return returnValue;};}
function createPrototypeRange(constructor,boundaryUpdater,detacher){function createBeforeAfterNodeSetter(isBefore,isStart){return function(node){assertNotDetached(this);assertValidNodeType(node,beforeAfterNodeTypes);assertValidNodeType(getRootContainer(node),rootContainerNodeTypes);var boundary=(isBefore?getBoundaryBeforeNode:getBoundaryAfterNode)(node);(isStart?setRangeStart:setRangeEnd)(this,boundary.node,boundary.offset);};}
function setRangeStart(range,node,offset){var ec=range.endContainer,eo=range.endOffset;if(node!==range.startContainer||offset!==range.startOffset){if(getRootContainer(node)!=getRootContainer(ec)||comparePoints(node,offset,ec,eo)==1){ec=node;eo=offset;}
boundaryUpdater(range,node,offset,ec,eo);}}
function setRangeEnd(range,node,offset){var sc=range.startContainer,so=range.startOffset;if(node!==range.endContainer||offset!==range.endOffset){if(getRootContainer(node)!=getRootContainer(sc)||comparePoints(node,offset,sc,so)==-1){sc=node;so=offset;}
boundaryUpdater(range,sc,so,node,offset);}}
var F=function(){};F.prototype=api.rangePrototype;constructor.prototype=new F();util.extend(constructor.prototype,{setStart:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeStart(this,node,offset);},setEnd:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeEnd(this,node,offset);},setStartAndEnd:function(){assertNotDetached(this);var args=arguments;var sc=args[0],so=args[1],ec=sc,eo=so;switch(args.length){case 3:eo=args[2];break;case 4:ec=args[2];eo=args[3];break;}
boundaryUpdater(this,sc,so,ec,eo);},setBoundary:function(node,offset,isStart){this["set"+(isStart?"Start":"End")](node,offset);},setStartBefore:createBeforeAfterNodeSetter(true,true),setStartAfter:createBeforeAfterNodeSetter(false,true),setEndBefore:createBeforeAfterNodeSetter(true,false),setEndAfter:createBeforeAfterNodeSetter(false,false),collapse:function(isStart){assertRangeValid(this);if(isStart){boundaryUpdater(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset);}else{boundaryUpdater(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset);}},selectNodeContents:function(node){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);boundaryUpdater(this,node,0,node,getNodeLength(node));},selectNode:function(node){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,false);assertValidNodeType(node,beforeAfterNodeTypes);var start=getBoundaryBeforeNode(node),end=getBoundaryAfterNode(node);boundaryUpdater(this,start.node,start.offset,end.node,end.offset);},extractContents:createRangeContentRemover(extractSubtree,boundaryUpdater),deleteContents:createRangeContentRemover(deleteSubtree,boundaryUpdater),canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&(isNonTextPartiallySelected(iterator._first,this))||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},detach:function(){detacher(this);},splitBoundaries:function(){splitRangeBoundaries(this);},splitBoundariesPreservingPositions:function(positionsToPreserve){splitRangeBoundaries(this,positionsToPreserve);},normalizeBoundaries:function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset;var mergeForward=function(node){var sibling=node.nextSibling;if(sibling&&sibling.nodeType==node.nodeType){ec=node;eo=node.length;node.appendData(sibling.data);sibling.parentNode.removeChild(sibling);}};var mergeBackward=function(node){var sibling=node.previousSibling;if(sibling&&sibling.nodeType==node.nodeType){sc=node;var nodeLength=node.length;so=sibling.length;node.insertData(0,sibling.data);sibling.parentNode.removeChild(sibling);if(sc==ec){eo+=so;ec=sc;}else if(ec==node.parentNode){var nodeIndex=getNodeIndex(node);if(eo==nodeIndex){ec=node;eo=nodeLength;}else if(eo>nodeIndex){eo--;}}}};var normalizeStart=true;if(isCharacterDataNode(ec)){if(ec.length==eo){mergeForward(ec);}}else{if(eo>0){var endNode=ec.childNodes[eo-1];if(endNode&&isCharacterDataNode(endNode)){mergeForward(endNode);}}
normalizeStart=!this.collapsed;}
if(normalizeStart){if(isCharacterDataNode(sc)){if(so==0){mergeBackward(sc);}}else{if(so<sc.childNodes.length){var startNode=sc.childNodes[so];if(startNode&&isCharacterDataNode(startNode)){mergeBackward(startNode);}}}}else{sc=ec;so=eo;}
boundaryUpdater(this,sc,so,ec,eo);},collapseToPoint:function(node,offset){assertNotDetached(this);assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);this.setStartAndEnd(node,offset);}});copyComparisonConstants(constructor);}
function updateCollapsedAndCommonAncestor(range){range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);range.commonAncestorContainer=range.collapsed?range.startContainer:dom.getCommonAncestor(range.startContainer,range.endContainer);}
function updateBoundaries(range,startContainer,startOffset,endContainer,endOffset){range.startContainer=startContainer;range.startOffset=startOffset;range.endContainer=endContainer;range.endOffset=endOffset;range.document=dom.getDocument(startContainer);updateCollapsedAndCommonAncestor(range);}
function detach(range){assertNotDetached(range);range.startContainer=range.startOffset=range.endContainer=range.endOffset=range.document=null;range.collapsed=range.commonAncestorContainer=null;}
function Range(doc){this.startContainer=doc;this.startOffset=0;this.endContainer=doc;this.endOffset=0;this.document=doc;updateCollapsedAndCommonAncestor(this);}
createPrototypeRange(Range,updateBoundaries,detach);util.extend(Range,{rangeProperties:rangeProperties,RangeIterator:RangeIterator,copyComparisonConstants:copyComparisonConstants,createPrototypeRange:createPrototypeRange,inspect:inspect,getRangeDocument:getRangeDocument,rangesEqual:function(r1,r2){return r1.startContainer===r2.startContainer&&r1.startOffset===r2.startOffset&&r1.endContainer===r2.endContainer&&r1.endOffset===r2.endOffset;}});api.DomRange=Range;api.RangeException=RangeException;});rangy.createCoreModule("WrappedRange",["DomRange"],function(api,module){var WrappedRange,WrappedTextRange;var dom=api.dom;var util=api.util;var DomPosition=dom.DomPosition;var DomRange=api.DomRange;var getBody=dom.getBody;var getContentDocument=dom.getContentDocument;var isCharacterDataNode=dom.isCharacterDataNode;if(api.features.implementsDomRange){(function(){var rangeProto;var rangeProperties=DomRange.rangeProperties;function updateRangeProperties(range){var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=range.nativeRange[prop];}
range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);}
function updateNativeRange(range,startContainer,startOffset,endContainer,endOffset){var startMoved=(range.startContainer!==startContainer||range.startOffset!=startOffset);var endMoved=(range.endContainer!==endContainer||range.endOffset!=endOffset);var nativeRangeDifferent=!range.equals(range.nativeRange);if(startMoved||endMoved||nativeRangeDifferent){range.setEnd(endContainer,endOffset);range.setStart(startContainer,startOffset);}}
function detach(range){range.nativeRange.detach();range.detached=true;var i=rangeProperties.length;while(i--){range[rangeProperties[i]]=null;}}
var createBeforeAfterNodeSetter;WrappedRange=function(range){if(!range){throw module.createError("WrappedRange: Range must be specified");}
this.nativeRange=range;updateRangeProperties(this);};DomRange.createPrototypeRange(WrappedRange,updateNativeRange,detach);rangeProto=WrappedRange.prototype;rangeProto.selectNode=function(node){this.nativeRange.selectNode(node);updateRangeProperties(this);};rangeProto.cloneContents=function(){return this.nativeRange.cloneContents();};rangeProto.surroundContents=function(node){this.nativeRange.surroundContents(node);updateRangeProperties(this);};rangeProto.collapse=function(isStart){this.nativeRange.collapse(isStart);updateRangeProperties(this);};rangeProto.cloneRange=function(){return new WrappedRange(this.nativeRange.cloneRange());};rangeProto.refresh=function(){updateRangeProperties(this);};rangeProto.toString=function(){return this.nativeRange.toString();};var testTextNode=document.createTextNode("test");getBody(document).appendChild(testTextNode);var range=document.createRange();range.setStart(testTextNode,0);range.setEnd(testTextNode,0);try{range.setStart(testTextNode,1);rangeProto.setStart=function(node,offset){this.nativeRange.setStart(node,offset);updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){this.nativeRange.setEnd(node,offset);updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name){return function(node){this.nativeRange[name](node);updateRangeProperties(this);};};}catch(ex){rangeProto.setStart=function(node,offset){try{this.nativeRange.setStart(node,offset);}catch(ex){this.nativeRange.setEnd(node,offset);this.nativeRange.setStart(node,offset);}
updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){try{this.nativeRange.setEnd(node,offset);}catch(ex){this.nativeRange.setStart(node,offset);this.nativeRange.setEnd(node,offset);}
updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name,oppositeName){return function(node){try{this.nativeRange[name](node);}catch(ex){this.nativeRange[oppositeName](node);this.nativeRange[name](node);}
updateRangeProperties(this);};};}
rangeProto.setStartBefore=createBeforeAfterNodeSetter("setStartBefore","setEndBefore");rangeProto.setStartAfter=createBeforeAfterNodeSetter("setStartAfter","setEndAfter");rangeProto.setEndBefore=createBeforeAfterNodeSetter("setEndBefore","setStartBefore");rangeProto.setEndAfter=createBeforeAfterNodeSetter("setEndAfter","setStartAfter");rangeProto.selectNodeContents=function(node){this.setStartAndEnd(node,0,dom.getNodeLength(node));};range.selectNodeContents(testTextNode);range.setEnd(testTextNode,3);var range2=document.createRange();range2.selectNodeContents(testTextNode);range2.setEnd(testTextNode,4);range2.setStart(testTextNode,2);if(range.compareBoundaryPoints(range.START_TO_END,range2)==-1&&range.compareBoundaryPoints(range.END_TO_START,range2)==1){rangeProto.compareBoundaryPoints=function(type,range){range=range.nativeRange||range;if(type==range.START_TO_END){type=range.END_TO_START;}else if(type==range.END_TO_START){type=range.START_TO_END;}
return this.nativeRange.compareBoundaryPoints(type,range);};}else{rangeProto.compareBoundaryPoints=function(type,range){return this.nativeRange.compareBoundaryPoints(type,range.nativeRange||range);};}
var el=document.createElement("div");el.innerHTML="123";var textNode=el.firstChild;var body=getBody(document);body.appendChild(el);range.setStart(textNode,1);range.setEnd(textNode,2);range.deleteContents();if(textNode.data=="13"){rangeProto.deleteContents=function(){this.nativeRange.deleteContents();updateRangeProperties(this);};rangeProto.extractContents=function(){var frag=this.nativeRange.extractContents();updateRangeProperties(this);return frag;};}else{}
body.removeChild(el);body=null;if(util.isHostMethod(range,"createContextualFragment")){rangeProto.createContextualFragment=function(fragmentStr){return this.nativeRange.createContextualFragment(fragmentStr);};}
getBody(document).removeChild(testTextNode);range.detach();range2.detach();rangeProto.getName=function(){return"WrappedRange";};api.WrappedRange=WrappedRange;api.createNativeRange=function(doc){doc=getContentDocument(doc,module,"createNativeRange");return doc.createRange();};})();}
if(api.features.implementsTextRange){var getTextRangeContainerElement=function(textRange){var parentEl=textRange.parentElement();var range=textRange.duplicate();range.collapse(true);var startEl=range.parentElement();range=textRange.duplicate();range.collapse(false);var endEl=range.parentElement();var startEndContainer=(startEl==endEl)?startEl:dom.getCommonAncestor(startEl,endEl);return startEndContainer==parentEl?startEndContainer:dom.getCommonAncestor(parentEl,startEndContainer);};var textRangeIsCollapsed=function(textRange){return textRange.compareEndPoints("StartToEnd",textRange)==0;};var getTextRangeBoundaryPosition=function(textRange,wholeRangeContainerElement,isStart,isCollapsed,startInfo){var workingRange=textRange.duplicate();workingRange.collapse(isStart);var containerElement=workingRange.parentElement();if(!dom.isOrIsAncestorOf(wholeRangeContainerElement,containerElement)){containerElement=wholeRangeContainerElement;}
if(!containerElement.canHaveHTML){var pos=new DomPosition(containerElement.parentNode,dom.getNodeIndex(containerElement));return{boundaryPosition:pos,nodeInfo:{nodeIndex:pos.offset,containerElement:pos.node}};}
var workingNode=dom.getDocument(containerElement).createElement("span");if(workingNode.parentNode){workingNode.parentNode.removeChild(workingNode);}
var comparison,workingComparisonType=isStart?"StartToStart":"StartToEnd";var previousNode,nextNode,boundaryPosition,boundaryNode;var start=(startInfo&&startInfo.containerElement==containerElement)?startInfo.nodeIndex:0;var childNodeCount=containerElement.childNodes.length;var end=childNodeCount;var nodeIndex=end;while(true){if(nodeIndex==childNodeCount){containerElement.appendChild(workingNode);}else{containerElement.insertBefore(workingNode,containerElement.childNodes[nodeIndex]);}
workingRange.moveToElementText(workingNode);comparison=workingRange.compareEndPoints(workingComparisonType,textRange);if(comparison==0||start==end){break;}else if(comparison==-1){if(end==start+1){break;}else{start=nodeIndex;}}else{end=(end==start+1)?start:nodeIndex;}
nodeIndex=Math.floor((start+end)/2);containerElement.removeChild(workingNode);}
boundaryNode=workingNode.nextSibling;if(comparison==-1&&boundaryNode&&isCharacterDataNode(boundaryNode)){workingRange.setEndPoint(isStart?"EndToStart":"EndToEnd",textRange);var offset;if(/[\r\n]/.test(boundaryNode.data)){var tempRange=workingRange.duplicate();var rangeLength=tempRange.text.replace(/\r\n/g,"\r").length;offset=tempRange.moveStart("character",rangeLength);while((comparison=tempRange.compareEndPoints("StartToEnd",tempRange))==-1){offset++;tempRange.moveStart("character",1);}}else{offset=workingRange.text.length;}
boundaryPosition=new DomPosition(boundaryNode,offset);}else{previousNode=(isCollapsed||!isStart)&&workingNode.previousSibling;nextNode=(isCollapsed||isStart)&&workingNode.nextSibling;if(nextNode&&isCharacterDataNode(nextNode)){boundaryPosition=new DomPosition(nextNode,0);}else if(previousNode&&isCharacterDataNode(previousNode)){boundaryPosition=new DomPosition(previousNode,previousNode.data.length);}else{boundaryPosition=new DomPosition(containerElement,dom.getNodeIndex(workingNode));}}
workingNode.parentNode.removeChild(workingNode);return{boundaryPosition:boundaryPosition,nodeInfo:{nodeIndex:nodeIndex,containerElement:containerElement}};};var createBoundaryTextRange=function(boundaryPosition,isStart){var boundaryNode,boundaryParent,boundaryOffset=boundaryPosition.offset;var doc=dom.getDocument(boundaryPosition.node);var workingNode,childNodes,workingRange=getBody(doc).createTextRange();var nodeIsDataNode=isCharacterDataNode(boundaryPosition.node);if(nodeIsDataNode){boundaryNode=boundaryPosition.node;boundaryParent=boundaryNode.parentNode;}else{childNodes=boundaryPosition.node.childNodes;boundaryNode=(boundaryOffset<childNodes.length)?childNodes[boundaryOffset]:null;boundaryParent=boundaryPosition.node;}
workingNode=doc.createElement("span");workingNode.innerHTML="&#feff;";if(boundaryNode){boundaryParent.insertBefore(workingNode,boundaryNode);}else{boundaryParent.appendChild(workingNode);}
workingRange.moveToElementText(workingNode);workingRange.collapse(!isStart);boundaryParent.removeChild(workingNode);if(nodeIsDataNode){workingRange[isStart?"moveStart":"moveEnd"]("character",boundaryOffset);}
return workingRange;};WrappedTextRange=function(textRange){this.textRange=textRange;this.refresh();};WrappedTextRange.prototype=new DomRange(document);WrappedTextRange.prototype.refresh=function(){var start,end,startBoundary;var rangeContainerElement=getTextRangeContainerElement(this.textRange);if(textRangeIsCollapsed(this.textRange)){end=start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,true).boundaryPosition;}else{startBoundary=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,false);start=startBoundary.boundaryPosition;end=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,false,false,startBoundary.nodeInfo).boundaryPosition;}
this.setStart(start.node,start.offset);this.setEnd(end.node,end.offset);};WrappedTextRange.prototype.getName=function(){return"WrappedTextRange";};DomRange.copyComparisonConstants(WrappedTextRange);WrappedTextRange.rangeToTextRange=function(range){if(range.collapsed){return createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);}else{var startRange=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);var endRange=createBoundaryTextRange(new DomPosition(range.endContainer,range.endOffset),false);var textRange=getBody(DomRange.getRangeDocument(range)).createTextRange();textRange.setEndPoint("StartToStart",startRange);textRange.setEndPoint("EndToEnd",endRange);return textRange;}};api.WrappedTextRange=WrappedTextRange;if(!api.features.implementsDomRange||api.config.preferTextRange){var globalObj=(function(){return this;})();if(typeof globalObj.Range=="undefined"){globalObj.Range=WrappedTextRange;}
api.createNativeRange=function(doc){doc=getContentDocument(doc,module,"createNativeRange");return getBody(doc).createTextRange();};api.WrappedRange=WrappedTextRange;}}
api.createRange=function(doc){doc=getContentDocument(doc,module,"createRange");return new api.WrappedRange(api.createNativeRange(doc));};api.createRangyRange=function(doc){doc=getContentDocument(doc,module,"createRangyRange");return new DomRange(doc);};api.createIframeRange=function(iframeEl){module.deprecationNotice("createIframeRange()","createRange(iframeEl)");return api.createRange(iframeEl);};api.createIframeRangyRange=function(iframeEl){module.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)");return api.createRangyRange(iframeEl);};api.addCreateMissingNativeApiListener(function(win){var doc=win.document;if(typeof doc.createRange=="undefined"){doc.createRange=function(){return api.createRange(doc);};}
doc=win=null;});});rangy.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(api,module){api.config.checkSelectionRanges=true;var BOOLEAN="boolean";var NUMBER="number";var dom=api.dom;var util=api.util;var isHostMethod=util.isHostMethod;var DomRange=api.DomRange;var WrappedRange=api.WrappedRange;var DOMException=api.DOMException;var DomPosition=dom.DomPosition;var getNativeSelection;var selectionIsCollapsed;var features=api.features;var CONTROL="Control";var getDocument=dom.getDocument;var getBody=dom.getBody;var rangesEqual=DomRange.rangesEqual;function isDirectionBackward(dir){return(typeof dir=="string")?/^backward(s)?$/i.test(dir):!!dir;}
function getWindow(win,methodName){if(!win){return window;}else if(dom.isWindow(win)){return win;}else if(win instanceof WrappedSelection){return win.win;}else{var doc=dom.getContentDocument(win,module,methodName);return dom.getWindow(doc);}}
function getWinSelection(winParam){return getWindow(winParam,"getWinSelection").getSelection();}
function getDocSelection(winParam){return getWindow(winParam,"getDocSelection").document.selection;}
function winSelectionIsBackward(sel){var backward=false;if(sel.anchorNode){backward=(dom.comparePoints(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset)==1);}
return backward;}
var implementsWinGetSelection=isHostMethod(window,"getSelection"),implementsDocSelection=util.isHostObject(document,"selection");features.implementsWinGetSelection=implementsWinGetSelection;features.implementsDocSelection=implementsDocSelection;var useDocumentSelection=implementsDocSelection&&(!implementsWinGetSelection||api.config.preferTextRange);if(useDocumentSelection){getNativeSelection=getDocSelection;api.isSelectionValid=function(winParam){var doc=getWindow(winParam,"isSelectionValid").document,nativeSel=doc.selection;return(nativeSel.type!="None"||getDocument(nativeSel.createRange().parentElement())==doc);};}else if(implementsWinGetSelection){getNativeSelection=getWinSelection;api.isSelectionValid=function(){return true;};}else{module.fail("Neither document.selection or window.getSelection() detected.");}
api.getNativeSelection=getNativeSelection;var testSelection=getNativeSelection();var testRange=api.createNativeRange(document);var body=getBody(document);var selectionHasAnchorAndFocus=util.areHostProperties(testSelection,["anchorNode","focusNode","anchorOffset","focusOffset"]);features.selectionHasAnchorAndFocus=selectionHasAnchorAndFocus;var selectionHasExtend=isHostMethod(testSelection,"extend");features.selectionHasExtend=selectionHasExtend;var selectionHasRangeCount=(typeof testSelection.rangeCount==NUMBER);features.selectionHasRangeCount=selectionHasRangeCount;var selectionSupportsMultipleRanges=false;var collapsedNonEditableSelectionsSupported=true;var addRangeBackwardToNative=selectionHasExtend?function(nativeSelection,range){var doc=DomRange.getRangeDocument(range);var endRange=api.createRange(doc);endRange.collapseToPoint(range.endContainer,range.endOffset);nativeSelection.addRange(getNativeRange(endRange));nativeSelection.extend(range.startContainer,range.startOffset);}:null;if(util.areHostMethods(testSelection,["addRange","getRangeAt","removeAllRanges"])&&typeof testSelection.rangeCount==NUMBER&&features.implementsDomRange){(function(){var sel=window.getSelection();if(sel){var originalSelectionRangeCount=sel.rangeCount;var selectionHasMultipleRanges=(originalSelectionRangeCount>1);var originalSelectionRanges=[];var originalSelectionBackward=winSelectionIsBackward(sel);for(var i=0;i<originalSelectionRangeCount;++i){originalSelectionRanges[i]=sel.getRangeAt(i);}
var body=getBody(document);var testEl=body.appendChild(document.createElement("div"));testEl.contentEditable="false";var textNode=testEl.appendChild(document.createTextNode("\u00a0\u00a0\u00a0"));var r1=document.createRange();r1.setStart(textNode,1);r1.collapse(true);sel.addRange(r1);collapsedNonEditableSelectionsSupported=(sel.rangeCount==1);sel.removeAllRanges();if(!selectionHasMultipleRanges){var r2=r1.cloneRange();r1.setStart(textNode,0);r2.setEnd(textNode,3);r2.setStart(textNode,2);sel.addRange(r1);sel.addRange(r2);selectionSupportsMultipleRanges=(sel.rangeCount==2);r2.detach();}
body.removeChild(testEl);sel.removeAllRanges();r1.detach();for(i=0;i<originalSelectionRangeCount;++i){if(i==0&&originalSelectionBackward){if(addRangeBackwardToNative){addRangeBackwardToNative(sel,originalSelectionRanges[i]);}else{api.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because browser does not support Selection.extend");sel.addRange(originalSelectionRanges[i])}}else{sel.addRange(originalSelectionRanges[i])}}}})();}
features.selectionSupportsMultipleRanges=selectionSupportsMultipleRanges;features.collapsedNonEditableSelectionsSupported=collapsedNonEditableSelectionsSupported;var implementsControlRange=false,testControlRange;if(body&&isHostMethod(body,"createControlRange")){testControlRange=body.createControlRange();if(util.areHostProperties(testControlRange,["item","add"])){implementsControlRange=true;}}
features.implementsControlRange=implementsControlRange;if(selectionHasAnchorAndFocus){selectionIsCollapsed=function(sel){return sel.anchorNode===sel.focusNode&&sel.anchorOffset===sel.focusOffset;};}else{selectionIsCollapsed=function(sel){return sel.rangeCount?sel.getRangeAt(sel.rangeCount-1).collapsed:false;};}
function updateAnchorAndFocusFromRange(sel,range,backward){var anchorPrefix=backward?"end":"start",focusPrefix=backward?"start":"end";sel.anchorNode=range[anchorPrefix+"Container"];sel.anchorOffset=range[anchorPrefix+"Offset"];sel.focusNode=range[focusPrefix+"Container"];sel.focusOffset=range[focusPrefix+"Offset"];}
function updateAnchorAndFocusFromNativeSelection(sel){var nativeSel=sel.nativeSelection;sel.anchorNode=nativeSel.anchorNode;sel.anchorOffset=nativeSel.anchorOffset;sel.focusNode=nativeSel.focusNode;sel.focusOffset=nativeSel.focusOffset;}
function updateEmptySelection(sel){sel.anchorNode=sel.focusNode=null;sel.anchorOffset=sel.focusOffset=0;sel.rangeCount=0;sel.isCollapsed=true;sel._ranges.length=0;}
function getNativeRange(range){var nativeRange;if(range instanceof DomRange){nativeRange=api.createNativeRange(range.getDocument());nativeRange.setEnd(range.endContainer,range.endOffset);nativeRange.setStart(range.startContainer,range.startOffset);}else if(range instanceof WrappedRange){nativeRange=range.nativeRange;}else if(features.implementsDomRange&&(range instanceof dom.getWindow(range.startContainer).Range)){nativeRange=range;}
return nativeRange;}
function rangeContainsSingleElement(rangeNodes){if(!rangeNodes.length||rangeNodes[0].nodeType!=1){return false;}
for(var i=1,len=rangeNodes.length;i<len;++i){if(!dom.isAncestorOf(rangeNodes[0],rangeNodes[i])){return false;}}
return true;}
function getSingleElementFromRange(range){var nodes=range.getNodes();if(!rangeContainsSingleElement(nodes)){throw module.createError("getSingleElementFromRange: range "+range.inspect()+" did not consist of a single element");}
return nodes[0];}
function isTextRange(range){return!!range&&typeof range.text!="undefined";}
function updateFromTextRange(sel,range){var wrappedRange=new WrappedRange(range);sel._ranges=[wrappedRange];updateAnchorAndFocusFromRange(sel,wrappedRange,false);sel.rangeCount=1;sel.isCollapsed=wrappedRange.collapsed;}
function updateControlSelection(sel){sel._ranges.length=0;if(sel.docSelection.type=="None"){updateEmptySelection(sel);}else{var controlRange=sel.docSelection.createRange();if(isTextRange(controlRange)){updateFromTextRange(sel,controlRange);}else{sel.rangeCount=controlRange.length;var range,doc=getDocument(controlRange.item(0));for(var i=0;i<sel.rangeCount;++i){range=api.createRange(doc);range.selectNode(controlRange.item(i));sel._ranges.push(range);}
sel.isCollapsed=sel.rangeCount==1&&sel._ranges[0].collapsed;updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],false);}}}
function addRangeToControlSelection(sel,range){var controlRange=sel.docSelection.createRange();var rangeElement=getSingleElementFromRange(range);var doc=getDocument(controlRange.item(0));var newControlRange=getBody(doc).createControlRange();for(var i=0,len=controlRange.length;i<len;++i){newControlRange.add(controlRange.item(i));}
try{newControlRange.add(rangeElement);}catch(ex){throw module.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}
newControlRange.select();updateControlSelection(sel);}
var getSelectionRangeAt;if(isHostMethod(testSelection,"getRangeAt")){getSelectionRangeAt=function(sel,index){try{return sel.getRangeAt(index);}catch(ex){return null;}};}else if(selectionHasAnchorAndFocus){getSelectionRangeAt=function(sel){var doc=getDocument(sel.anchorNode);var range=api.createRange(doc);range.setStartAndEnd(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset);if(range.collapsed!==this.isCollapsed){range.setStartAndEnd(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset);}
return range;};}
function WrappedSelection(selection,docSelection,win){this.nativeSelection=selection;this.docSelection=docSelection;this._ranges=[];this.win=win;this.refresh();}
WrappedSelection.prototype=api.selectionPrototype;function deleteProperties(sel){sel.win=sel.anchorNode=sel.focusNode=sel._ranges=null;sel.rangeCount=sel.anchorOffset=sel.focusOffset=0;sel.detached=true;}
var cachedRangySelections=[];function actOnCachedSelection(win,action){var i=cachedRangySelections.length,cached,sel;while(i--){cached=cachedRangySelections[i];sel=cached.selection;if(action=="deleteAll"){deleteProperties(sel);}else if(cached.win==win){if(action=="delete"){cachedRangySelections.splice(i,1);return true;}else{return sel;}}}
if(action=="deleteAll"){cachedRangySelections.length=0;}
return null;}
var getSelection=function(win){if(win&&win instanceof WrappedSelection){win.refresh();return win;}
win=getWindow(win,"getNativeSelection");var sel=actOnCachedSelection(win);var nativeSel=getNativeSelection(win),docSel=implementsDocSelection?getDocSelection(win):null;if(sel){sel.nativeSelection=nativeSel;sel.docSelection=docSel;sel.refresh();}else{sel=new WrappedSelection(nativeSel,docSel,win);cachedRangySelections.push({win:win,selection:sel});}
return sel;};api.getSelection=getSelection;api.getIframeSelection=function(iframeEl){module.deprecationNotice("getIframeSelection()","getSelection(iframeEl)");return api.getSelection(dom.getIframeWindow(iframeEl));};var selProto=WrappedSelection.prototype;function createControlSelection(sel,ranges){var doc=getDocument(ranges[0].startContainer);var controlRange=getBody(doc).createControlRange();for(var i=0,el,len=ranges.length;i<len;++i){el=getSingleElementFromRange(ranges[i]);try{controlRange.add(el);}catch(ex){throw module.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");}}
controlRange.select();updateControlSelection(sel);}
if(!useDocumentSelection&&selectionHasAnchorAndFocus&&util.areHostMethods(testSelection,["removeAllRanges","addRange"])){selProto.removeAllRanges=function(){this.nativeSelection.removeAllRanges();updateEmptySelection(this);};var addRangeBackward=function(sel,range){addRangeBackwardToNative(sel.nativeSelection,range);sel.refresh();};if(selectionHasRangeCount){selProto.addRange=function(range,direction){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{if(isDirectionBackward(direction)&&selectionHasExtend){addRangeBackward(this,range);}else{var previousRangeCount;if(selectionSupportsMultipleRanges){previousRangeCount=this.rangeCount;}else{this.removeAllRanges();previousRangeCount=0;}
this.nativeSelection.addRange(getNativeRange(range).cloneRange());this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==previousRangeCount+1){if(api.config.checkSelectionRanges){var nativeRange=getSelectionRangeAt(this.nativeSelection,this.rangeCount-1);if(nativeRange&&!rangesEqual(nativeRange,range)){range=new WrappedRange(nativeRange);}}
this._ranges[this.rangeCount-1]=range;updateAnchorAndFocusFromRange(this,range,selectionIsBackward(this.nativeSelection));this.isCollapsed=selectionIsCollapsed(this);}else{this.refresh();}}}};}else{selProto.addRange=function(range,direction){if(isDirectionBackward(direction)&&selectionHasExtend){addRangeBackward(this,range);}else{this.nativeSelection.addRange(getNativeRange(range));this.refresh();}};}
selProto.setRanges=function(ranges){if(implementsControlRange&&ranges.length>1){createControlSelection(this,ranges);}else{this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){this.addRange(ranges[i]);}}};}else if(isHostMethod(testSelection,"empty")&&isHostMethod(testRange,"select")&&implementsControlRange&&useDocumentSelection){selProto.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var doc;if(this.anchorNode){doc=getDocument(this.anchorNode);}else if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();if(controlRange.length){doc=getDocument(controlRange.item(0));}}
if(doc){var textRange=getBody(doc).createTextRange();textRange.select();this.docSelection.empty();}}}catch(ex){}
updateEmptySelection(this);};selProto.addRange=function(range){if(this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{api.WrappedTextRange.rangeToTextRange(range).select();this._ranges[0]=range;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;updateAnchorAndFocusFromRange(this,range,false);}};selProto.setRanges=function(ranges){this.removeAllRanges();var rangeCount=ranges.length;if(rangeCount>1){createControlSelection(this,ranges);}else if(rangeCount){this.addRange(ranges[0]);}};}else{module.fail("No means of selecting a Range or TextRange was found");return false;}
selProto.getRangeAt=function(index){if(index<0||index>=this.rangeCount){throw new DOMException("INDEX_SIZE_ERR");}else{return this._ranges[index].cloneRange();}};var refreshSelection;if(useDocumentSelection){refreshSelection=function(sel){var range;if(api.isSelectionValid(sel.win)){range=sel.docSelection.createRange();}else{range=getBody(sel.win.document).createTextRange();range.collapse(true);}
if(sel.docSelection.type==CONTROL){updateControlSelection(sel);}else if(isTextRange(range)){updateFromTextRange(sel,range);}else{updateEmptySelection(sel);}};}else if(isHostMethod(testSelection,"getRangeAt")&&typeof testSelection.rangeCount==NUMBER){refreshSelection=function(sel){if(implementsControlRange&&implementsDocSelection&&sel.docSelection.type==CONTROL){updateControlSelection(sel);}else{sel._ranges.length=sel.rangeCount=sel.nativeSelection.rangeCount;if(sel.rangeCount){for(var i=0,len=sel.rangeCount;i<len;++i){sel._ranges[i]=new api.WrappedRange(sel.nativeSelection.getRangeAt(i));}
updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],selectionIsBackward(sel.nativeSelection));sel.isCollapsed=selectionIsCollapsed(sel);}else{updateEmptySelection(sel);}}};}else if(selectionHasAnchorAndFocus&&typeof testSelection.isCollapsed==BOOLEAN&&typeof testRange.collapsed==BOOLEAN&&features.implementsDomRange){refreshSelection=function(sel){var range,nativeSel=sel.nativeSelection;if(nativeSel.anchorNode){range=getSelectionRangeAt(nativeSel,0);sel._ranges=[range];sel.rangeCount=1;updateAnchorAndFocusFromNativeSelection(sel);sel.isCollapsed=selectionIsCollapsed(sel);}else{updateEmptySelection(sel);}};}else{module.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false;}
selProto.refresh=function(checkForChanges){var oldRanges=checkForChanges?this._ranges.slice(0):null;var oldAnchorNode=this.anchorNode,oldAnchorOffset=this.anchorOffset;refreshSelection(this);if(checkForChanges){var i=oldRanges.length;if(i!=this._ranges.length){return true;}
if(this.anchorNode!=oldAnchorNode||this.anchorOffset!=oldAnchorOffset){return true;}
while(i--){if(!rangesEqual(oldRanges[i],this._ranges[i])){return true;}}
return false;}};var removeRangeManually=function(sel,range){var ranges=sel.getAllRanges();sel.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){if(!rangesEqual(range,ranges[i])){sel.addRange(ranges[i]);}}
if(!sel.rangeCount){updateEmptySelection(sel);}};if(implementsControlRange){selProto.removeRange=function(range){if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var rangeElement=getSingleElementFromRange(range);var doc=getDocument(controlRange.item(0));var newControlRange=getBody(doc).createControlRange();var el,removed=false;for(var i=0,len=controlRange.length;i<len;++i){el=controlRange.item(i);if(el!==rangeElement||removed){newControlRange.add(controlRange.item(i));}else{removed=true;}}
newControlRange.select();updateControlSelection(this);}else{removeRangeManually(this,range);}};}else{selProto.removeRange=function(range){removeRangeManually(this,range);};}
var selectionIsBackward;if(!useDocumentSelection&&selectionHasAnchorAndFocus&&features.implementsDomRange){selectionIsBackward=winSelectionIsBackward;selProto.isBackward=function(){return selectionIsBackward(this);};}else{selectionIsBackward=selProto.isBackward=function(){return false;};}
selProto.isBackwards=selProto.isBackward;selProto.toString=function(){var rangeTexts=[];for(var i=0,len=this.rangeCount;i<len;++i){rangeTexts[i]=""+this._ranges[i];}
return rangeTexts.join("");};function assertNodeInSameDocument(sel,node){if(sel.win.document!=getDocument(node)){throw new DOMException("WRONG_DOCUMENT_ERR");}}
selProto.collapse=function(node,offset){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.collapseToPoint(node,offset);this.setSingleRange(range);this.isCollapsed=true;};selProto.collapseToStart=function(){if(this.rangeCount){var range=this._ranges[0];this.collapse(range.startContainer,range.startOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.collapseToEnd=function(){if(this.rangeCount){var range=this._ranges[this.rangeCount-1];this.collapse(range.endContainer,range.endOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.selectAllChildren=function(node){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.selectNodeContents(node);this.setSingleRange(range);};selProto.deleteFromDocument=function(){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var element;while(controlRange.length){element=controlRange.item(0);controlRange.remove(element);element.parentNode.removeChild(element);}
this.refresh();}else if(this.rangeCount){var ranges=this.getAllRanges();if(ranges.length){this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){ranges[i].deleteContents();}
this.addRange(ranges[len-1]);}}};selProto.eachRange=function(func,returnValue){for(var i=0,len=this._ranges.length;i<len;++i){if(func(this.getRangeAt(i))){return returnValue;}}};selProto.getAllRanges=function(){var ranges=[];this.eachRange(function(range){ranges.push(range);});return ranges;};selProto.setSingleRange=function(range,direction){this.removeAllRanges();this.addRange(range,direction);};selProto.callMethodOnEachRange=function(methodName,params){var results=[];this.eachRange(function(range){results.push(range[methodName].apply(range,params));});return results;};function createStartOrEndSetter(isStart){return function(node,offset){var range;if(this.rangeCount){range=this.getRangeAt(0);range["set"+(isStart?"Start":"End")](node,offset);}else{range=api.createRange(this.win.document);range.setStartAndEnd(node,offset);}
this.setSingleRange(range,this.isBackward());};}
selProto.setStart=createStartOrEndSetter(true);selProto.setEnd=createStartOrEndSetter(false);api.rangePrototype.select=function(direction){getSelection(this.getDocument()).setSingleRange(this,direction);};selProto.changeEachRange=function(func){var ranges=[];var backward=this.isBackward();this.eachRange(function(range){func(range);ranges.push(range);});this.removeAllRanges();if(backward&&ranges.length==1){this.addRange(ranges[0],"backward");}else{this.setRanges(ranges);}};selProto.containsNode=function(node,allowPartial){return this.eachRange(function(range){return range.containsNode(node,allowPartial);},true);};selProto.getBookmark=function(containerNode){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[containerNode])};};selProto.moveToBookmark=function(bookmark){var selRanges=[];for(var i=0,rangeBookmark,range;rangeBookmark=bookmark.rangeBookmarks[i++];){range=api.createRange(this.win);range.moveToBookmark(rangeBookmark);selRanges.push(range);}
if(bookmark.backward){this.setSingleRange(selRanges[0],"backward");}else{this.setRanges(selRanges);}};selProto.toHtml=function(){return this.callMethodOnEachRange("toHtml").join("");};function inspect(sel){var rangeInspects=[];var anchor=new DomPosition(sel.anchorNode,sel.anchorOffset);var focus=new DomPosition(sel.focusNode,sel.focusOffset);var name=(typeof sel.getName=="function")?sel.getName():"Selection";if(typeof sel.rangeCount!="undefined"){for(var i=0,len=sel.rangeCount;i<len;++i){rangeInspects[i]=DomRange.inspect(sel.getRangeAt(i));}}
return"["+name+"(Ranges: "+rangeInspects.join(", ")+")(anchor: "+anchor.inspect()+", focus: "+focus.inspect()+"]";}
selProto.getName=function(){return"WrappedSelection";};selProto.inspect=function(){return inspect(this);};selProto.detach=function(){actOnCachedSelection(this.win,"delete");deleteProperties(this);};WrappedSelection.detachAll=function(){actOnCachedSelection(null,"deleteAll");};WrappedSelection.inspect=inspect;WrappedSelection.isDirectionBackward=isDirectionBackward;api.Selection=WrappedSelection;api.selectionPrototype=selProto;api.addCreateMissingNativeApiListener(function(win){if(typeof win.getSelection=="undefined"){win.getSelection=function(){return getSelection(win);};}
win=null;});});;rangy.createModule("SaveRestore",["WrappedRange"],function(api,module){var dom=api.dom;var markerTextChar="\ufeff";function gEBI(id,doc){return(doc||document).getElementById(id);}
function insertRangeBoundaryMarker(range,atStart){var markerId="selectionBoundary_"+(+new Date())+"_"+(""+Math.random()).slice(2);var markerEl;var doc=dom.getDocument(range.startContainer);var boundaryRange=range.cloneRange();boundaryRange.collapse(atStart);markerEl=doc.createElement("span");markerEl.id=markerId;markerEl.style.lineHeight="0";markerEl.style.display="none";markerEl.className="rangySelectionBoundary";markerEl.appendChild(doc.createTextNode(markerTextChar));boundaryRange.insertNode(markerEl);boundaryRange.detach();return markerEl;}
function setRangeBoundary(doc,range,markerId,atStart){var markerEl=gEBI(markerId,doc);if(markerEl){range[atStart?"setStartBefore":"setEndBefore"](markerEl);markerEl.parentNode.removeChild(markerEl);}else{module.warn("Marker element has been removed. Cannot restore selection.");}}
function compareRanges(r1,r2){return r2.compareBoundaryPoints(r1.START_TO_START,r1);}
function saveRange(range,backward){var startEl,endEl,doc=api.DomRange.getRangeDocument(range),text=range.toString();if(range.collapsed){endEl=insertRangeBoundaryMarker(range,false);return{document:doc,markerId:endEl.id,collapsed:true};}else{endEl=insertRangeBoundaryMarker(range,false);startEl=insertRangeBoundaryMarker(range,true);return{document:doc,startMarkerId:startEl.id,endMarkerId:endEl.id,collapsed:false,backward:backward,toString:function(){return"original text: '"+text+"', new text: '"+range.toString()+"'";}};}}
function restoreRange(rangeInfo,normalize){var doc=rangeInfo.document;if(typeof normalize=="undefined"){normalize=true;}
var range=api.createRange(doc);if(rangeInfo.collapsed){var markerEl=gEBI(rangeInfo.markerId,doc);if(markerEl){markerEl.style.display="inline";var previousNode=markerEl.previousSibling;if(previousNode&&previousNode.nodeType==3){markerEl.parentNode.removeChild(markerEl);range.collapseToPoint(previousNode,previousNode.length);}else{range.collapseBefore(markerEl);markerEl.parentNode.removeChild(markerEl);}}else{module.warn("Marker element has been removed. Cannot restore selection.");}}else{setRangeBoundary(doc,range,rangeInfo.startMarkerId,true);setRangeBoundary(doc,range,rangeInfo.endMarkerId,false);}
if(normalize){range.normalizeBoundaries();}
return range;}
function saveRanges(ranges,backward){var rangeInfos=[],range,doc;ranges=ranges.slice(0);ranges.sort(compareRanges);for(var i=0,len=ranges.length;i<len;++i){rangeInfos[i]=saveRange(ranges[i],backward);}
for(i=len-1;i>=0;--i){range=ranges[i];doc=api.DomRange.getRangeDocument(range);if(range.collapsed){range.collapseAfter(gEBI(rangeInfos[i].markerId,doc));}else{range.setEndBefore(gEBI(rangeInfos[i].endMarkerId,doc));range.setStartAfter(gEBI(rangeInfos[i].startMarkerId,doc));}}
return rangeInfos;}
function saveSelection(win){if(!api.isSelectionValid(win)){module.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");return null;}
var sel=api.getSelection(win);var ranges=sel.getAllRanges();var backward=(ranges.length==1&&sel.isBackward());var rangeInfos=saveRanges(ranges,backward);if(backward){sel.setSingleRange(ranges[0],"backward");}else{sel.setRanges(ranges);}
return{win:win,rangeInfos:rangeInfos,restored:false};}
function restoreRanges(rangeInfos){var ranges=[];var rangeCount=rangeInfos.length;for(var i=rangeCount-1;i>=0;i--){ranges[i]=restoreRange(rangeInfos[i],true);}
return ranges;}
function restoreSelection(savedSelection,preserveDirection){if(!savedSelection.restored){var rangeInfos=savedSelection.rangeInfos;var sel=api.getSelection(savedSelection.win);var ranges=restoreRanges(rangeInfos),rangeCount=rangeInfos.length;if(rangeCount==1&&preserveDirection&&api.features.selectionHasExtend&&rangeInfos[0].backward){sel.removeAllRanges();sel.addRange(ranges[0],true);}else{sel.setRanges(ranges);}
savedSelection.restored=true;}}
function removeMarkerElement(doc,markerId){var markerEl=gEBI(markerId,doc);if(markerEl){markerEl.parentNode.removeChild(markerEl);}}
function removeMarkers(savedSelection){var rangeInfos=savedSelection.rangeInfos;for(var i=0,len=rangeInfos.length,rangeInfo;i<len;++i){rangeInfo=rangeInfos[i];if(rangeInfo.collapsed){removeMarkerElement(savedSelection.doc,rangeInfo.markerId);}else{removeMarkerElement(savedSelection.doc,rangeInfo.startMarkerId);removeMarkerElement(savedSelection.doc,rangeInfo.endMarkerId);}}}
api.util.extend(api,{saveRange:saveRange,restoreRange:restoreRange,saveRanges:saveRanges,restoreRanges:restoreRanges,saveSelection:saveSelection,restoreSelection:restoreSelection,removeMarkerElement:removeMarkerElement,removeMarkers:removeMarkers});});;var Base=function(){};Base.extend=function(_instance,_static){var extend=Base.prototype.extend;Base._prototyping=true;var proto=new this;extend.call(proto,_instance);proto.base=function(){};delete Base._prototyping;var constructor=proto.constructor;var klass=proto.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==klass){this._constructing=true;constructor.apply(this,arguments);delete this._constructing;}else if(arguments[0]!=null){return(arguments[0].extend||extend).call(arguments[0],proto);}}};klass.ancestor=this;klass.extend=this.extend;klass.forEach=this.forEach;klass.implement=this.implement;klass.prototype=proto;klass.toString=this.toString;klass.valueOf=function(type){return(type=="object")?klass:constructor.valueOf();};extend.call(klass,_static);if(typeof klass.init=="function")klass.init();return klass;};Base.prototype={extend:function(source,value){if(arguments.length>1){var ancestor=this[source];if(ancestor&&(typeof value=="function")&&(!ancestor.valueOf||ancestor.valueOf()!=value.valueOf())&&/\bbase\b/.test(value)){var method=value.valueOf();value=function(){var previous=this.base||Base.prototype.base;this.base=ancestor;var returnValue=method.apply(this,arguments);this.base=previous;return returnValue;};value.valueOf=function(type){return(type=="object")?value:method;};value.toString=Base.toString;}
this[source]=value;}else if(source){var extend=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){extend=this.extend||extend;}
var proto={toSource:null};var hidden=["constructor","toString","valueOf"];var i=Base._prototyping?0:1;while(key=hidden[i++]){if(source[key]!=proto[key]){extend.call(this,key,source[key]);}}
for(var key in source){if(!proto[key])extend.call(this,key,source[key]);}}
return this;}};Base=Base.extend({constructor:function(){this.extend(arguments[0]);}},{ancestor:Object,version:"1.1",forEach:function(object,block,context){for(var key in object){if(this.prototype[key]===undefined){block.call(context,object[key],key,object);}}},implement:function(){for(var i=0;i<arguments.length;i++){if(typeof arguments[i]=="function"){arguments[i](this.prototype);}else{this.prototype.extend(arguments[i]);}}
return this;},toString:function(){return String(this.valueOf());}});;wysihtml5.browser=(function(){var userAgent=navigator.userAgent,testElement=document.createElement("div"),isIE=userAgent.indexOf("MSIE")!==-1&&userAgent.indexOf("Opera")===-1,isGecko=userAgent.indexOf("Gecko")!==-1&&userAgent.indexOf("KHTML")===-1,isWebKit=userAgent.indexOf("AppleWebKit/")!==-1,isChrome=userAgent.indexOf("Chrome/")!==-1,isOpera=userAgent.indexOf("Opera/")!==-1;function iosVersion(userAgent){return+((/ipad|iphone|ipod/.test(userAgent)&&userAgent.match(/ os (\d+).+? like mac os x/))||[undefined,0])[1];}
function androidVersion(userAgent){return+(userAgent.match(/android (\d+)/)||[undefined,0])[1];}
return{USER_AGENT:userAgent,supported:function(){var userAgent=this.USER_AGENT.toLowerCase(),hasContentEditableSupport="contentEditable"in testElement,hasEditingApiSupport=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,hasQuerySelectorSupport=document.querySelector&&document.querySelectorAll,isIncompatibleMobileBrowser=(this.isIos()&&iosVersion(userAgent)<5)||(this.isAndroid()&&androidVersion(userAgent)<4)||userAgent.indexOf("opera mobi")!==-1||userAgent.indexOf("hpwos/")!==-1;return hasContentEditableSupport&&hasEditingApiSupport&&hasQuerySelectorSupport&&!isIncompatibleMobileBrowser;},isTouchDevice:function(){return this.supportsEvent("touchmove");},isIos:function(){return(/ipad|iphone|ipod/i).test(this.USER_AGENT);},isAndroid:function(){return this.USER_AGENT.indexOf("Android")!==-1;},supportsSandboxedIframes:function(){return isIE;},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document);},displaysCaretInEmptyContentEditableCorrectly:function(){return isIE;},hasCurrentStyleProperty:function(){return"currentStyle"in testElement;},hasHistoryIssue:function(){return isGecko&&navigator.platform.substr(0,3)==="Mac";},insertsLineBreaksOnReturn:function(){return isGecko;},supportsPlaceholderAttributeOn:function(element){return"placeholder"in element;},supportsEvent:function(eventName){return"on"+eventName in testElement||(function(){testElement.setAttribute("on"+eventName,"return;");return typeof(testElement["on"+eventName])==="function";})();},supportsEventsInIframeCorrectly:function(){return!isOpera;},supportsHTML5Tags:function(context){var element=context.createElement("div"),html5="<article>foo</article>";element.innerHTML=html5;return element.innerHTML.toLowerCase()===html5;},supportsCommand:(function(){var buggyCommands={"formatBlock":isIE,"insertUnorderedList":isIE||isWebKit,"insertOrderedList":isIE||isWebKit};var supported={"insertHTML":isGecko};return function(doc,command){var isBuggy=buggyCommands[command];if(!isBuggy){try{return doc.queryCommandSupported(command);}catch(e1){}
try{return doc.queryCommandEnabled(command);}catch(e2){return!!supported[command];}}
return false;};})(),doesAutoLinkingInContentEditable:function(){return isIE;},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect");},clearsContentEditableCorrectly:function(){return isGecko||isOpera||isWebKit;},supportsGetAttributeCorrectly:function(){var td=document.createElement("td");return td.getAttribute("rowspan")!="1";},canSelectImagesInContentEditable:function(){return isGecko||isIE||isOpera;},autoScrollsToCaret:function(){return!isWebKit;},autoClosesUnclosedTags:function(){var clonedTestElement=testElement.cloneNode(false),returnValue,innerHTML;clonedTestElement.innerHTML="<p><div></div>";innerHTML=clonedTestElement.innerHTML.toLowerCase();returnValue=innerHTML==="<p></p><div></div>"||innerHTML==="<p><div></div></p>";this.autoClosesUnclosedTags=function(){return returnValue;};return returnValue;},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf("[native code]")!==-1;},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection();},needsSpaceAfterLineBreak:function(){return isOpera;},supportsSpeechApiOn:function(input){var chromeVersion=userAgent.match(/Chrome\/(\d+)/)||[undefined,0];return chromeVersion[1]>=11&&("onwebkitspeechchange"in input||"speech"in input);},crashesWhenDefineProperty:function(property){return isIE&&(property==="XMLHttpRequest"||property==="XDomainRequest");},doesAsyncFocus:function(){return isIE;},hasProblemsSettingCaretAfterImg:function(){return isIE;},hasUndoInContextMenu:function(){return isGecko||isChrome||isOpera;},hasInsertNodeIssue:function(){return isOpera;},hasIframeFocusIssue:function(){return isIE;},createsNestedInvalidMarkupAfterPaste:function(){return isWebKit;},supportsMutationEvents:function(){return("MutationEvent"in window);}};})();;wysihtml5.lang.array=function(arr){return{contains:function(needle){if(Array.isArray(needle)){for(var i=needle.length;i--;){if(wysihtml5.lang.array(arr).indexOf(needle[i])!==-1){return true;}}
return false;}else{return wysihtml5.lang.array(arr).indexOf(needle)!==-1;}},indexOf:function(needle){if(arr.indexOf){return arr.indexOf(needle);}else{for(var i=0,length=arr.length;i<length;i++){if(arr[i]===needle){return i;}}
return-1;}},without:function(arrayToSubstract){arrayToSubstract=wysihtml5.lang.array(arrayToSubstract);var newArr=[],i=0,length=arr.length;for(;i<length;i++){if(!arrayToSubstract.contains(arr[i])){newArr.push(arr[i]);}}
return newArr;},get:function(){var i=0,length=arr.length,newArray=[];for(;i<length;i++){newArray.push(arr[i]);}
return newArray;},map:function(callback,thisArg){if(Array.prototype.map){return arr.map(callback,thisArg);}else{var len=arr.length>>>0,A=new Array(len),i=0;for(;i<len;i++){A[i]=callback.call(thisArg,arr[i],i,arr);}
return A;}},unique:function(){var vals=[],max=arr.length,idx=0;while(idx<max){if(!wysihtml5.lang.array(vals).contains(arr[idx])){vals.push(arr[idx]);}
idx++;}
return vals;}};};;wysihtml5.lang.Dispatcher=Base.extend({on:function(eventName,handler){this.events=this.events||{};this.events[eventName]=this.events[eventName]||[];this.events[eventName].push(handler);return this;},off:function(eventName,handler){this.events=this.events||{};var i=0,handlers,newHandlers;if(eventName){handlers=this.events[eventName]||[],newHandlers=[];for(;i<handlers.length;i++){if(handlers[i]!==handler&&handler){newHandlers.push(handlers[i]);}}
this.events[eventName]=newHandlers;}else{this.events={};}
return this;},fire:function(eventName,payload){this.events=this.events||{};var handlers=this.events[eventName]||[],i=0;for(;i<handlers.length;i++){handlers[i].call(this,payload);}
return this;},observe:function(){return this.on.apply(this,arguments);},stopObserving:function(){return this.off.apply(this,arguments);}});;wysihtml5.lang.object=function(obj){return{merge:function(otherObj){for(var i in otherObj){obj[i]=otherObj[i];}
return this;},get:function(){return obj;},clone:function(){var newObj={},i;for(i in obj){newObj[i]=obj[i];}
return newObj;},isArray:function(){return Object.prototype.toString.call(obj)==="[object Array]";}};};;(function(){var WHITE_SPACE_START=/^\s+/,WHITE_SPACE_END=/\s+$/,ENTITY_REG_EXP=/[&<>"]/g,ENTITY_MAP={'&':'&amp;','<':'&lt;','>':'&gt;','"':"&quot;"};wysihtml5.lang.string=function(str){str=String(str);return{trim:function(){return str.replace(WHITE_SPACE_START,"").replace(WHITE_SPACE_END,"");},interpolate:function(vars){for(var i in vars){str=this.replace("#{"+i+"}").by(vars[i]);}
return str;},replace:function(search){return{by:function(replace){return str.split(search).join(replace);}};},escapeHTML:function(){return str.replace(ENTITY_REG_EXP,function(c){return ENTITY_MAP[c];});}};};})();;(function(wysihtml5){var
IGNORE_URLS_IN=wysihtml5.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),URL_REG_EXP=/((https?:\/\/|www\.)[^\s<]{3,})/gi,TRAILING_CHAR_REG_EXP=/([^\w\/\-](,?))$/i,MAX_DISPLAY_LENGTH=100,BRACKETS={")":"(","]":"[","}":"{"};function autoLink(element,ignoreInClasses){if(_hasParentThatShouldBeIgnored(element,ignoreInClasses)){return element;}
if(element===element.ownerDocument.documentElement){element=element.ownerDocument.body;}
return _parseNode(element,ignoreInClasses);}
function _convertUrlsToLinks(str){return str.replace(URL_REG_EXP,function(match,url){var punctuation=(url.match(TRAILING_CHAR_REG_EXP)||[])[1]||"",opening=BRACKETS[punctuation];url=url.replace(TRAILING_CHAR_REG_EXP,"");if(url.split(opening).length>url.split(punctuation).length){url=url+punctuation;punctuation="";}
var realUrl=url,displayUrl=url;if(url.length>MAX_DISPLAY_LENGTH){displayUrl=displayUrl.substr(0,MAX_DISPLAY_LENGTH)+"...";}
if(realUrl.substr(0,4)==="www."){realUrl="http://"+realUrl;}
return'<a href="'+realUrl+'">'+displayUrl+'</a>'+punctuation;});}
function _getTempElement(context){var tempElement=context._wysihtml5_tempElement;if(!tempElement){tempElement=context._wysihtml5_tempElement=context.createElement("div");}
return tempElement;}
function _wrapMatchesInNode(textNode){var parentNode=textNode.parentNode,nodeValue=wysihtml5.lang.string(textNode.data).escapeHTML(),tempElement=_getTempElement(parentNode.ownerDocument);tempElement.innerHTML="<span></span>"+_convertUrlsToLinks(nodeValue);tempElement.removeChild(tempElement.firstChild);while(tempElement.firstChild){parentNode.insertBefore(tempElement.firstChild,textNode);}
parentNode.removeChild(textNode);}
function _hasParentThatShouldBeIgnored(node,ignoreInClasses){var nodeName;while(node.parentNode){node=node.parentNode;nodeName=node.nodeName;if(node.className&&wysihtml5.lang.array(node.className.split(' ')).contains(ignoreInClasses)){return true;}
if(IGNORE_URLS_IN.contains(nodeName)){return true;}else if(nodeName==="body"){return false;}}
return false;}
function _parseNode(element,ignoreInClasses){if(IGNORE_URLS_IN.contains(element.nodeName)){return;}
if(element.className&&wysihtml5.lang.array(element.className.split(' ')).contains(ignoreInClasses)){return;}
if(element.nodeType===wysihtml5.TEXT_NODE&&element.data.match(URL_REG_EXP)){_wrapMatchesInNode(element);return;}
var childNodes=wysihtml5.lang.array(element.childNodes).get(),childNodesLength=childNodes.length,i=0;for(;i<childNodesLength;i++){_parseNode(childNodes[i],ignoreInClasses);}
return element;}
wysihtml5.dom.autoLink=autoLink;wysihtml5.dom.autoLink.URL_REG_EXP=URL_REG_EXP;})(wysihtml5);;(function(wysihtml5){var api=wysihtml5.dom;api.addClass=function(element,className){var classList=element.classList;if(classList){return classList.add(className);}
if(api.hasClass(element,className)){return;}
element.className+=" "+className;};api.removeClass=function(element,className){var classList=element.classList;if(classList){return classList.remove(className);}
element.className=element.className.replace(new RegExp("(^|\\s+)"+className+"(\\s+|$)")," ");};api.hasClass=function(element,className){var classList=element.classList;if(classList){return classList.contains(className);}
var elementClassName=element.className;return(elementClassName.length>0&&(elementClassName==className||new RegExp("(^|\\s)"+className+"(\\s|$)").test(elementClassName)));};})(wysihtml5);;wysihtml5.dom.contains=(function(){var documentElement=document.documentElement;if(documentElement.contains){return function(container,element){if(element.nodeType!==wysihtml5.ELEMENT_NODE){element=element.parentNode;}
return container!==element&&container.contains(element);};}else if(documentElement.compareDocumentPosition){return function(container,element){return!!(container.compareDocumentPosition(element)&16);};}})();;wysihtml5.dom.convertToList=(function(){function _createListItem(doc,list){var listItem=doc.createElement("li");list.appendChild(listItem);return listItem;}
function _createList(doc,type){return doc.createElement(type);}
function convertToList(element,listType,uneditableClass){if(element.nodeName==="UL"||element.nodeName==="OL"||element.nodeName==="MENU"){return element;}
var doc=element.ownerDocument,list=_createList(doc,listType),lineBreaks=element.querySelectorAll("br"),lineBreaksLength=lineBreaks.length,childNodes,childNodesLength,childNode,lineBreak,parentNode,isBlockElement,isLineBreak,currentListItem,i;for(i=0;i<lineBreaksLength;i++){lineBreak=lineBreaks[i];while((parentNode=lineBreak.parentNode)&&parentNode!==element&&parentNode.lastChild===lineBreak){if(wysihtml5.dom.getStyle("display").from(parentNode)==="block"){parentNode.removeChild(lineBreak);break;}
wysihtml5.dom.insert(lineBreak).after(lineBreak.parentNode);}}
childNodes=wysihtml5.lang.array(element.childNodes).get();childNodesLength=childNodes.length;for(i=0;i<childNodesLength;i++){currentListItem=currentListItem||_createListItem(doc,list);childNode=childNodes[i];isBlockElement=wysihtml5.dom.getStyle("display").from(childNode)==="block";isLineBreak=childNode.nodeName==="BR";if(isBlockElement&&(!uneditableClass||!wysihtml5.dom.hasClass(childNode,uneditableClass))){currentListItem=currentListItem.firstChild?_createListItem(doc,list):currentListItem;currentListItem.appendChild(childNode);currentListItem=null;continue;}
if(isLineBreak){currentListItem=currentListItem.firstChild?null:currentListItem;continue;}
currentListItem.appendChild(childNode);}
if(childNodes.length===0){_createListItem(doc,list);}
element.parentNode.replaceChild(list,element);return list;}
return convertToList;})();;wysihtml5.dom.copyAttributes=function(attributesToCopy){return{from:function(elementToCopyFrom){return{to:function(elementToCopyTo){var attribute,i=0,length=attributesToCopy.length;for(;i<length;i++){attribute=attributesToCopy[i];if(typeof(elementToCopyFrom[attribute])!=="undefined"&&elementToCopyFrom[attribute]!==""){elementToCopyTo[attribute]=elementToCopyFrom[attribute];}}
return{andTo:arguments.callee};}};}};};;(function(dom){var BOX_SIZING_PROPERTIES=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"];var shouldIgnoreBoxSizingBorderBox=function(element){if(hasBoxSizingBorderBox(element)){return parseInt(dom.getStyle("width").from(element),10)<element.offsetWidth;}
return false;};var hasBoxSizingBorderBox=function(element){var i=0,length=BOX_SIZING_PROPERTIES.length;for(;i<length;i++){if(dom.getStyle(BOX_SIZING_PROPERTIES[i]).from(element)==="border-box"){return BOX_SIZING_PROPERTIES[i];}}};dom.copyStyles=function(stylesToCopy){return{from:function(element){if(shouldIgnoreBoxSizingBorderBox(element)){stylesToCopy=wysihtml5.lang.array(stylesToCopy).without(BOX_SIZING_PROPERTIES);}
var cssText="",length=stylesToCopy.length,i=0,property;for(;i<length;i++){property=stylesToCopy[i];cssText+=property+":"+dom.getStyle(property).from(element)+";";}
return{to:function(element){dom.setStyles(cssText).on(element);return{andTo:arguments.callee};}};}};};})(wysihtml5.dom);;(function(wysihtml5){wysihtml5.dom.delegate=function(container,selector,eventName,handler){return wysihtml5.dom.observe(container,eventName,function(event){var target=event.target,match=wysihtml5.lang.array(container.querySelectorAll(selector));while(target&&target!==container){if(match.contains(target)){handler.call(target,event);break;}
target=target.parentNode;}});};})(wysihtml5);;(function(wysihtml5){wysihtml5.dom.domNode=function(node){var defaultNodeTypes=[wysihtml5.ELEMENT_NODE,wysihtml5.TEXT_NODE];var _isBlankText=function(node){return node.nodeType===wysihtml5.TEXT_NODE&&(/^\s*$/g).test(node.data);};return{prev:function(options){var prevNode=node.previousSibling,types=(options&&options.nodeTypes)?options.nodeTypes:defaultNodeTypes;if(!prevNode){return null;}
if((!wysihtml5.lang.array(types).contains(prevNode.nodeType))||(options&&options.ignoreBlankTexts&&_isBlankText(prevNode))){return wysihtml5.dom.domNode(prevNode).prev(options);}
return prevNode;},next:function(options){var nextNode=node.nextSibling,types=(options&&options.nodeTypes)?options.nodeTypes:defaultNodeTypes;if(!nextNode){return null;}
if((!wysihtml5.lang.array(types).contains(nextNode.nodeType))||(options&&options.ignoreBlankTexts&&_isBlankText(nextNode))){return wysihtml5.dom.domNode(nextNode).next(options);}
return nextNode;}};};})(wysihtml5);;wysihtml5.dom.getAsDom=(function(){var _innerHTMLShiv=function(html,context){var tempElement=context.createElement("div");tempElement.style.display="none";context.body.appendChild(tempElement);try{tempElement.innerHTML=html;}catch(e){}
context.body.removeChild(tempElement);return tempElement;};var _ensureHTML5Compatibility=function(context){if(context._wysihtml5_supportsHTML5Tags){return;}
for(var i=0,length=HTML5_ELEMENTS.length;i<length;i++){context.createElement(HTML5_ELEMENTS[i]);}
context._wysihtml5_supportsHTML5Tags=true;};var HTML5_ELEMENTS=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(html,context){context=context||document;var tempElement;if(typeof(html)==="object"&&html.nodeType){tempElement=context.createElement("div");tempElement.appendChild(html);}else if(wysihtml5.browser.supportsHTML5Tags(context)){tempElement=context.createElement("div");tempElement.innerHTML=html;}else{_ensureHTML5Compatibility(context);tempElement=_innerHTMLShiv(html,context);}
return tempElement;};})();;wysihtml5.dom.getParentElement=(function(){function _isSameNodeName(nodeName,desiredNodeNames){if(!desiredNodeNames||!desiredNodeNames.length){return true;}
if(typeof(desiredNodeNames)==="string"){return nodeName===desiredNodeNames;}else{return wysihtml5.lang.array(desiredNodeNames).contains(nodeName);}}
function _isElement(node){return node.nodeType===wysihtml5.ELEMENT_NODE;}
function _hasClassName(element,className,classRegExp){var classNames=(element.className||"").match(classRegExp)||[];if(!className){return!!classNames.length;}
return classNames[classNames.length-1]===className;}
function _hasStyle(element,cssStyle,styleRegExp){var styles=(element.getAttribute('style')||"").match(styleRegExp)||[];if(!cssStyle){return!!styles.length;}
return styles[styles.length-1]===cssStyle;}
return function(node,matchingSet,levels,container){var findByStyle=(matchingSet.cssStyle||matchingSet.styleRegExp),findByClass=(matchingSet.className||matchingSet.classRegExp);levels=levels||50;while(levels--&&node&&node.nodeName!=="BODY"&&(!container||node!==container)){if(_isElement(node)&&_isSameNodeName(node.nodeName,matchingSet.nodeName)&&(!findByStyle||_hasStyle(node,matchingSet.cssStyle,matchingSet.styleRegExp))&&(!findByClass||_hasClassName(node,matchingSet.className,matchingSet.classRegExp))){return node;}
node=node.parentNode;}
return null;};})();;wysihtml5.dom.getStyle=(function(){var stylePropertyMapping={"float":("styleFloat"in document.createElement("div").style)?"styleFloat":"cssFloat"},REG_EXP_CAMELIZE=/\-[a-z]/g;function camelize(str){return str.replace(REG_EXP_CAMELIZE,function(match){return match.charAt(1).toUpperCase();});}
return function(property){return{from:function(element){if(element.nodeType!==wysihtml5.ELEMENT_NODE){return;}
var doc=element.ownerDocument,camelizedProperty=stylePropertyMapping[property]||camelize(property),style=element.style,currentStyle=element.currentStyle,styleValue=style[camelizedProperty];if(styleValue){return styleValue;}
if(currentStyle){try{return currentStyle[camelizedProperty];}catch(e){}}
var win=doc.defaultView||doc.parentWindow,needsOverflowReset=(property==="height"||property==="width")&&element.nodeName==="TEXTAREA",originalOverflow,returnValue;if(win.getComputedStyle){if(needsOverflowReset){originalOverflow=style.overflow;style.overflow="hidden";}
returnValue=win.getComputedStyle(element,null).getPropertyValue(property);if(needsOverflowReset){style.overflow=originalOverflow||"";}
return returnValue;}}};};})();;wysihtml5.dom.getTextNodes=function(node){var all=[];for(node=node.firstChild;node;node=node.nextSibling){if(node.nodeType==3){all.push(node);}else{all=all.concat(wysihtml5.dom.getTextNodes(node));}}
return all;};;wysihtml5.dom.hasElementWithTagName=(function(){var LIVE_CACHE={},DOCUMENT_IDENTIFIER=1;function _getDocumentIdentifier(doc){return doc._wysihtml5_identifier||(doc._wysihtml5_identifier=DOCUMENT_IDENTIFIER++);}
return function(doc,tagName){var key=_getDocumentIdentifier(doc)+":"+tagName,cacheEntry=LIVE_CACHE[key];if(!cacheEntry){cacheEntry=LIVE_CACHE[key]=doc.getElementsByTagName(tagName);}
return cacheEntry.length>0;};})();;(function(wysihtml5){var LIVE_CACHE={},DOCUMENT_IDENTIFIER=1;function _getDocumentIdentifier(doc){return doc._wysihtml5_identifier||(doc._wysihtml5_identifier=DOCUMENT_IDENTIFIER++);}
wysihtml5.dom.hasElementWithClassName=function(doc,className){if(!wysihtml5.browser.supportsNativeGetElementsByClassName()){return!!doc.querySelector("."+className);}
var key=_getDocumentIdentifier(doc)+":"+className,cacheEntry=LIVE_CACHE[key];if(!cacheEntry){cacheEntry=LIVE_CACHE[key]=doc.getElementsByClassName(className);}
return cacheEntry.length>0;};})(wysihtml5);;wysihtml5.dom.insert=function(elementToInsert){return{after:function(element){element.parentNode.insertBefore(elementToInsert,element.nextSibling);},before:function(element){element.parentNode.insertBefore(elementToInsert,element);},into:function(element){element.appendChild(elementToInsert);}};};;wysihtml5.dom.insertCSS=function(rules){rules=rules.join("\n");return{into:function(doc){var styleElement=doc.createElement("style");styleElement.type="text/css";if(styleElement.styleSheet){styleElement.styleSheet.cssText=rules;}else{styleElement.appendChild(doc.createTextNode(rules));}
var link=doc.querySelector("head link");if(link){link.parentNode.insertBefore(styleElement,link);return;}else{var head=doc.querySelector("head");if(head){head.appendChild(styleElement);}}}};};;(function(wysihtml5){wysihtml5.dom.lineBreaks=function(node){function _isLineBreak(n){return n.nodeName==="BR";}
function _isLineBreakOrBlockElement(element){if(_isLineBreak(element)){return true;}
if(wysihtml5.dom.getStyle("display").from(element)==="block"){return true;}
return false;}
return{add:function(options){var doc=node.ownerDocument,nextSibling=wysihtml5.dom.domNode(node).next({ignoreBlankTexts:true}),previousSibling=wysihtml5.dom.domNode(node).prev({ignoreBlankTexts:true});if(nextSibling&&!_isLineBreakOrBlockElement(nextSibling)){wysihtml5.dom.insert(doc.createElement("br")).after(node);}
if(previousSibling&&!_isLineBreakOrBlockElement(previousSibling)){wysihtml5.dom.insert(doc.createElement("br")).before(node);}},remove:function(options){var nextSibling=wysihtml5.dom.domNode(node).next({ignoreBlankTexts:true}),previousSibling=wysihtml5.dom.domNode(node).prev({ignoreBlankTexts:true});if(nextSibling&&_isLineBreak(nextSibling)){nextSibling.parentNode.removeChild(nextSibling);}
if(previousSibling&&_isLineBreak(previousSibling)){previousSibling.parentNode.removeChild(previousSibling);}}};};})(wysihtml5);;wysihtml5.dom.observe=function(element,eventNames,handler){eventNames=typeof(eventNames)==="string"?[eventNames]:eventNames;var handlerWrapper,eventName,i=0,length=eventNames.length;for(;i<length;i++){eventName=eventNames[i];if(element.addEventListener){element.addEventListener(eventName,handler,false);}else{handlerWrapper=function(event){if(!("target"in event)){event.target=event.srcElement;}
event.preventDefault=event.preventDefault||function(){this.returnValue=false;};event.stopPropagation=event.stopPropagation||function(){this.cancelBubble=true;};handler.call(element,event);};element.attachEvent("on"+eventName,handlerWrapper);}}
return{stop:function(){var eventName,i=0,length=eventNames.length;for(;i<length;i++){eventName=eventNames[i];if(element.removeEventListener){element.removeEventListener(eventName,handler,false);}else{element.detachEvent("on"+eventName,handlerWrapper);}}}};};;wysihtml5.dom.parse=(function(){var NODE_TYPE_MAPPING={"1":_handleElement,"3":_handleText},DEFAULT_NODE_NAME="span",WHITE_SPACE_REG_EXP=/\s+/,defaultRules={tags:{},classes:{}},currentRules={},uneditableClass=false;function parse(elementOrHtml,config){wysihtml5.lang.object(currentRules).merge(defaultRules).merge(config.rules).get();var context=config.context||elementOrHtml.ownerDocument||document,fragment=context.createDocumentFragment(),isString=typeof(elementOrHtml)==="string",element,newNode,firstChild;if(config.uneditableClass){uneditableClass=config.uneditableClass;}
if(isString){element=wysihtml5.dom.getAsDom(elementOrHtml,context);}else{element=elementOrHtml;}
while(element.firstChild){firstChild=element.firstChild;newNode=_convert(firstChild,config.cleanUp);element.removeChild(firstChild);if(newNode){fragment.appendChild(newNode);}}
element.innerHTML="";element.appendChild(fragment);return isString?wysihtml5.quirks.getCorrectInnerHTML(element):element;}
function _convert(oldNode,cleanUp){var oldNodeType=oldNode.nodeType,oldChilds=oldNode.childNodes,oldChildsLength=oldChilds.length,method=NODE_TYPE_MAPPING[oldNodeType],i=0,fragment,newNode,newChild;if(uneditableClass&&oldNodeType===1&&wysihtml5.dom.hasClass(oldNode,uneditableClass)){return oldNode;}
newNode=method&&method(oldNode);if(!newNode){if(newNode===false){fragment=oldNode.ownerDocument.createDocumentFragment();for(i=oldChildsLength;i--;){newChild=_convert(oldChilds[i],cleanUp);if(newChild){fragment.insertBefore(newChild,fragment.firstChild);}}
if(wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(oldNode.nodeName.toLowerCase())&&oldNode.parentNode.lastChild!==oldNode){if(!oldNode.nextSibling||oldNode.nextSibling.nodeType!==3||!(/^\s/).test(oldNode.nextSibling.nodeValue)){fragment.appendChild(oldNode.ownerDocument.createTextNode(" "));}}
if(fragment.normalize){fragment.normalize();}
return fragment;}else{return null;}}
for(i=0;i<oldChildsLength;i++){newChild=_convert(oldChilds[i],cleanUp);if(newChild){newNode.appendChild(newChild);}}
if(cleanUp&&newNode.nodeName.toLowerCase()===DEFAULT_NODE_NAME&&(!newNode.childNodes.length||((/^\s*$/gi).test(newNode.innerHTML)&&oldNode.className!=="_wysihtml5-temp-placeholder"&&oldNode.className!=="rangySelectionBoundary")||!newNode.attributes.length)){fragment=newNode.ownerDocument.createDocumentFragment();while(newNode.firstChild){fragment.appendChild(newNode.firstChild);}
if(fragment.normalize){fragment.normalize();}
return fragment;}
if(newNode.normalize){newNode.normalize();}
return newNode;}
function _handleElement(oldNode){var rule,newNode,tagRules=currentRules.tags,nodeName=oldNode.nodeName.toLowerCase(),scopeName=oldNode.scopeName;if(oldNode._wysihtml5){return null;}
oldNode._wysihtml5=1;if(oldNode.className==="wysihtml5-temp"){return null;}
if(scopeName&&scopeName!="HTML"){nodeName=scopeName+":"+nodeName;}
if("outerHTML"in oldNode){if(!wysihtml5.browser.autoClosesUnclosedTags()&&oldNode.nodeName==="P"&&oldNode.outerHTML.slice(-4).toLowerCase()!=="</p>"){nodeName="div";}}
if(nodeName in tagRules){rule=tagRules[nodeName];if(!rule||rule.remove){return null;}else if(rule.unwrap){return false;}
rule=typeof(rule)==="string"?{rename_tag:rule}:rule;}else if(oldNode.firstChild){rule={rename_tag:DEFAULT_NODE_NAME};}else{return null;}
newNode=oldNode.ownerDocument.createElement(rule.rename_tag||nodeName);_handleAttributes(oldNode,newNode,rule);_handleStyles(oldNode,newNode,rule);if(rule.one_of_type&&!_testTypes(oldNode,currentRules,rule.one_of_type)){return(rule.remove_action&&rule.remove_action=="unwrap")?false:null;}
oldNode=null;if(newNode.normalize){newNode.normalize();}
return newNode;}
function _testTypes(oldNode,rules,types){var definition,type;if(oldNode.nodeName==="SPAN"&&(oldNode.className==="_wysihtml5-temp-placeholder"||oldNode.className==="rangySelectionBoundary")){return true;}
for(type in types){if(types.hasOwnProperty(type)&&rules.type_definitions&&rules.type_definitions[type]){definition=rules.type_definitions[type];if(_testType(oldNode,definition)){return true;}}}
return false;}
function array_contains(a,obj){var i=a.length;while(i--){if(a[i]===obj){return true;}}
return false;}
function _testType(oldNode,definition){var nodeClasses=oldNode.getAttribute("class"),nodeStyles=oldNode.getAttribute("style"),classesLength,s,s_corrected,a,attr,currentClass,styleProp;if(definition.methods){for(var m in definition.methods){if(definition.methods.hasOwnProperty(m)&&typeCeckMethods[m]){if(typeCeckMethods[m](oldNode)){return true;}}}}
if(nodeClasses&&definition.classes){nodeClasses=nodeClasses.replace(/^\s+/g,'').replace(/\s+$/g,'').split(WHITE_SPACE_REG_EXP);classesLength=nodeClasses.length;for(var i=0;i<classesLength;i++){if(definition.classes[nodeClasses[i]]){return true;}}}
if(nodeStyles&&definition.styles){nodeStyles=nodeStyles.split(';');for(s in definition.styles){if(definition.styles.hasOwnProperty(s)){for(var sp=nodeStyles.length;sp--;){styleProp=nodeStyles[sp].split(':');if(styleProp[0].replace(/\s/g,'').toLowerCase()===s){if(definition.styles[s]===true||definition.styles[s]===1||wysihtml5.lang.array(definition.styles[s]).contains(styleProp[1].replace(/\s/g,'').toLowerCase())){return true;}}}}}}
if(definition.attrs){for(a in definition.attrs){if(definition.attrs.hasOwnProperty(a)){attr=_getAttribute(oldNode,a);if(typeof(attr)==="string"){if(attr.search(definition.attrs[a])>-1){return true;}}}}}
return false;}
function _handleStyles(oldNode,newNode,rule){var s;if(rule&&rule.keep_styles){for(s in rule.keep_styles){if(rule.keep_styles.hasOwnProperty(s)){if(s=="float"){if(oldNode.style.styleFloat){newNode.style.styleFloat=oldNode.style.styleFloat;}
if(oldNode.style.cssFloat){newNode.style.cssFloat=oldNode.style.cssFloat;}}else if(oldNode.style[s]){newNode.style[s]=oldNode.style[s];}}}}}
function _handleAttributes(oldNode,newNode,rule){var attributes={},setClass=rule.set_class,addClass=rule.add_class,addStyle=rule.add_style,setAttributes=rule.set_attributes,checkAttributes=rule.check_attributes,allowedClasses=currentRules.classes,i=0,classes=[],styles=[],newClasses=[],oldClasses=[],classesLength,newClassesLength,currentClass,newClass,attributeName,newAttributeValue,method;if(setAttributes){attributes=wysihtml5.lang.object(setAttributes).clone();}
if(checkAttributes){for(attributeName in checkAttributes){method=attributeCheckMethods[checkAttributes[attributeName]];if(!method){continue;}
oldAttribute=_getAttribute(oldNode,attributeName);if(oldAttribute||(attributeName==="alt"&&oldNode.nodeName=="IMG")){newAttributeValue=method(oldAttribute);if(typeof(newAttributeValue)==="string"){attributes[attributeName]=newAttributeValue;}}}}
if(setClass){classes.push(setClass);}
if(addClass){for(attributeName in addClass){method=addClassMethods[addClass[attributeName]];if(!method){continue;}
newClass=method(_getAttribute(oldNode,attributeName));if(typeof(newClass)==="string"){classes.push(newClass);}}}
if(addStyle){for(attributeName in addStyle){method=addStyleMethods[addStyle[attributeName]];if(!method){continue;}
newStyle=method(_getAttribute(oldNode,attributeName));if(typeof(newStyle)==="string"){styles.push(newStyle);}}}
if(typeof(allowedClasses)==="string"&&allowedClasses==="any"&&oldNode.getAttribute("class")){attributes["class"]=oldNode.getAttribute("class");}else{allowedClasses["_wysihtml5-temp-placeholder"]=1;allowedClasses["_rangySelectionBoundary"]=1;oldClasses=oldNode.getAttribute("class");if(oldClasses){classes=classes.concat(oldClasses.split(WHITE_SPACE_REG_EXP));}
classesLength=classes.length;for(;i<classesLength;i++){currentClass=classes[i];if(allowedClasses[currentClass]){newClasses.push(currentClass);}}
if(newClasses.length){attributes["class"]=wysihtml5.lang.array(newClasses).unique().join(" ");}}
if(styles.length){attributes["style"]=wysihtml5.lang.array(styles).unique().join(" ");}
for(attributeName in attributes){try{newNode.setAttribute(attributeName,attributes[attributeName]);}catch(e){}}
if(attributes.src){if(typeof(attributes.width)!=="undefined"){newNode.setAttribute("width",attributes.width);}
if(typeof(attributes.height)!=="undefined"){newNode.setAttribute("height",attributes.height);}}}
var HAS_GET_ATTRIBUTE_BUG=!wysihtml5.browser.supportsGetAttributeCorrectly();function _getAttribute(node,attributeName){attributeName=attributeName.toLowerCase();var nodeName=node.nodeName;if(nodeName=="IMG"&&attributeName=="src"&&_isLoadedImage(node)===true){return node.src;}else if(HAS_GET_ATTRIBUTE_BUG&&"outerHTML"in node){var outerHTML=node.outerHTML.toLowerCase(),hasAttribute=outerHTML.indexOf(" "+attributeName+"=")!=-1;return hasAttribute?node.getAttribute(attributeName):null;}else{return node.getAttribute(attributeName);}}
function _isLoadedImage(node){try{return node.complete&&!node.mozMatchesSelector(":-moz-broken");}catch(e){if(node.complete&&node.readyState==="complete"){return true;}}}
var INVISIBLE_SPACE_REG_EXP=/\uFEFF/g;function _handleText(oldNode){var nextSibling=oldNode.nextSibling;if(nextSibling&&nextSibling.nodeType===wysihtml5.TEXT_NODE){nextSibling.data=oldNode.data.replace(INVISIBLE_SPACE_REG_EXP,"")+nextSibling.data.replace(INVISIBLE_SPACE_REG_EXP,"");}else{var data=oldNode.data.replace(INVISIBLE_SPACE_REG_EXP,"");return oldNode.ownerDocument.createTextNode(data);}}
var attributeCheckMethods={url:(function(){var REG_EXP=/^https?:\/\//i;return function(attributeValue){if(!attributeValue||!attributeValue.match(REG_EXP)){return null;}
return attributeValue.replace(REG_EXP,function(match){return match.toLowerCase();});};})(),src:(function(){var REG_EXP=/^(\/|https?:\/\/)/i;return function(attributeValue){if(!attributeValue||!attributeValue.match(REG_EXP)){return null;}
return attributeValue.replace(REG_EXP,function(match){return match.toLowerCase();});};})(),href:(function(){var REG_EXP=/^(#|\/|https?:\/\/|mailto:)/i;return function(attributeValue){if(!attributeValue||!attributeValue.match(REG_EXP)){return null;}
return attributeValue.replace(REG_EXP,function(match){return match.toLowerCase();});};})(),alt:(function(){var REG_EXP=/[^ a-z0-9_\-]/gi;return function(attributeValue){if(!attributeValue){return"";}
return attributeValue.replace(REG_EXP,"");};})(),numbers:(function(){var REG_EXP=/\D/g;return function(attributeValue){attributeValue=(attributeValue||"").replace(REG_EXP,"");return attributeValue||null;};})(),any:(function(){return function(attributeValue){return attributeValue;};})()};var addStyleMethods={align_text:(function(){var mapping={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(attributeValue){return mapping[String(attributeValue).toLowerCase()];};})(),};var addClassMethods={align_img:(function(){var mapping={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(attributeValue){return mapping[String(attributeValue).toLowerCase()];};})(),align_text:(function(){var mapping={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(attributeValue){return mapping[String(attributeValue).toLowerCase()];};})(),clear_br:(function(){var mapping={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(attributeValue){return mapping[String(attributeValue).toLowerCase()];};})(),size_font:(function(){var mapping={"1":"wysiwyg-font-size-xx-small","2":"wysiwyg-font-size-small","3":"wysiwyg-font-size-medium","4":"wysiwyg-font-size-large","5":"wysiwyg-font-size-x-large","6":"wysiwyg-font-size-xx-large","7":"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(attributeValue){return mapping[String(attributeValue).charAt(0)];};})()};var typeCeckMethods={has_visible_contet:(function(){var txt,isVisible=false,visibleElements=['img','video','picture','br','script','noscript','style','table','iframe','object','embed','audio','svg','input','button','select','textarea','canvas'];return function(el){txt=(el.innerText||el.textContent).replace(/\s/g,'');if(txt&&txt.length>0){return true;}
for(var i=visibleElements.length;i--;){if(el.querySelector(visibleElements[i])){return true;}}
if(el.offsetWidth&&el.offsetWidth>0&&el.offsetHeight&&el.offsetHeight>0){return true;}
return false;};})()};return parse;})();;wysihtml5.dom.removeEmptyTextNodes=function(node){var childNode,childNodes=wysihtml5.lang.array(node.childNodes).get(),childNodesLength=childNodes.length,i=0;for(;i<childNodesLength;i++){childNode=childNodes[i];if(childNode.nodeType===wysihtml5.TEXT_NODE&&childNode.data===""){childNode.parentNode.removeChild(childNode);}}};;wysihtml5.dom.renameElement=function(element,newNodeName){var newElement=element.ownerDocument.createElement(newNodeName),firstChild;while(firstChild=element.firstChild){newElement.appendChild(firstChild);}
wysihtml5.dom.copyAttributes(["align","className"]).from(element).to(newElement);element.parentNode.replaceChild(newElement,element);return newElement;};;wysihtml5.dom.replaceWithChildNodes=function(node){if(!node.parentNode){return;}
if(!node.firstChild){node.parentNode.removeChild(node);return;}
var fragment=node.ownerDocument.createDocumentFragment();while(node.firstChild){fragment.appendChild(node.firstChild);}
node.parentNode.replaceChild(fragment,node);node=fragment=null;};;(function(dom){function _isBlockElement(node){return dom.getStyle("display").from(node)==="block";}
function _isLineBreak(node){return node.nodeName==="BR";}
function _appendLineBreak(element){var lineBreak=element.ownerDocument.createElement("br");element.appendChild(lineBreak);}
function resolveList(list,useLineBreaks){if(!list.nodeName.match(/^(MENU|UL|OL)$/)){return;}
var doc=list.ownerDocument,fragment=doc.createDocumentFragment(),previousSibling=wysihtml5.dom.domNode(list).prev({ignoreBlankTexts:true}),firstChild,lastChild,isLastChild,shouldAppendLineBreak,paragraph,listItem;if(useLineBreaks){if(previousSibling&&!_isBlockElement(previousSibling)&&!_isLineBreak(previousSibling)){_appendLineBreak(fragment);}
while(listItem=(list.firstElementChild||list.firstChild)){lastChild=listItem.lastChild;while(firstChild=listItem.firstChild){isLastChild=firstChild===lastChild;shouldAppendLineBreak=isLastChild&&!_isBlockElement(firstChild)&&!_isLineBreak(firstChild);fragment.appendChild(firstChild);if(shouldAppendLineBreak){_appendLineBreak(fragment);}}
listItem.parentNode.removeChild(listItem);}}else{while(listItem=(list.firstElementChild||list.firstChild)){if(listItem.querySelector&&listItem.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6")){while(firstChild=listItem.firstChild){fragment.appendChild(firstChild);}}else{paragraph=doc.createElement("p");while(firstChild=listItem.firstChild){paragraph.appendChild(firstChild);}
fragment.appendChild(paragraph);}
listItem.parentNode.removeChild(listItem);}}
list.parentNode.replaceChild(fragment,list);}
dom.resolveList=resolveList;})(wysihtml5.dom);;(function(wysihtml5){var
doc=document,windowProperties=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],windowProperties2=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],documentProperties=["referrer","write","open","close"];wysihtml5.dom.Sandbox=Base.extend({constructor:function(readyCallback,config){this.callback=readyCallback||wysihtml5.EMPTY_FUNCTION;this.config=wysihtml5.lang.object({}).merge(config).get();this.editableArea=this._createIframe();},insertInto:function(element){if(typeof(element)==="string"){element=doc.getElementById(element);}
element.appendChild(this.editableArea);},getIframe:function(){return this.editableArea;},getWindow:function(){this._readyError();},getDocument:function(){this._readyError();},destroy:function(){var iframe=this.getIframe();iframe.parentNode.removeChild(iframe);},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet");},_createIframe:function(){var that=this,iframe=doc.createElement("iframe");iframe.className="wysihtml5-sandbox";wysihtml5.dom.setAttributes({"security":"restricted","allowtransparency":"true","frameborder":0,"width":0,"height":0,"marginwidth":0,"marginheight":0}).on(iframe);if(wysihtml5.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){iframe.src="javascript:'<html></html>'";}
iframe.onload=function(){iframe.onreadystatechange=iframe.onload=null;that._onLoadIframe(iframe);};iframe.onreadystatechange=function(){if(/loaded|complete/.test(iframe.readyState)){iframe.onreadystatechange=iframe.onload=null;that._onLoadIframe(iframe);}};return iframe;},_onLoadIframe:function(iframe){if(!wysihtml5.dom.contains(doc.documentElement,iframe)){return;}
var that=this,iframeWindow=iframe.contentWindow,iframeDocument=iframe.contentWindow.document,charset=doc.characterSet||doc.charset||"utf-8",sandboxHtml=this._getHtml({charset:charset,stylesheets:this.config.stylesheets});iframeDocument.open("text/html","replace");iframeDocument.write(sandboxHtml);iframeDocument.close();this.getWindow=function(){return iframe.contentWindow;};this.getDocument=function(){return iframe.contentWindow.document;};iframeWindow.onerror=function(errorMessage,fileName,lineNumber){throw new Error("wysihtml5.Sandbox: "+errorMessage,fileName,lineNumber);};if(!wysihtml5.browser.supportsSandboxedIframes()){var i,length;for(i=0,length=windowProperties.length;i<length;i++){this._unset(iframeWindow,windowProperties[i]);}
for(i=0,length=windowProperties2.length;i<length;i++){this._unset(iframeWindow,windowProperties2[i],wysihtml5.EMPTY_FUNCTION);}
for(i=0,length=documentProperties.length;i<length;i++){this._unset(iframeDocument,documentProperties[i]);}
this._unset(iframeDocument,"cookie","",true);}
this.loaded=true;setTimeout(function(){that.callback(that);},0);},_getHtml:function(templateVars){var stylesheets=templateVars.stylesheets,html="",i=0,length;stylesheets=typeof(stylesheets)==="string"?[stylesheets]:stylesheets;if(stylesheets){length=stylesheets.length;for(;i<length;i++){html+='<link rel="stylesheet" href="'+stylesheets[i]+'">';}}
templateVars.stylesheets=html;return wysihtml5.lang.string('<!DOCTYPE html><html><head>'
+'<meta charset="#{charset}">#{stylesheets}</head>'
+'<body></body></html>').interpolate(templateVars);},_unset:function(object,property,value,setter){try{object[property]=value;}catch(e){}
try{object.__defineGetter__(property,function(){return value;});}catch(e){}
if(setter){try{object.__defineSetter__(property,function(){});}catch(e){}}
if(!wysihtml5.browser.crashesWhenDefineProperty(property)){try{var config={get:function(){return value;}};if(setter){config.set=function(){};}
Object.defineProperty(object,property,config);}catch(e){}}}});})(wysihtml5);;(function(wysihtml5){var doc=document;wysihtml5.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element;},getWindow:function(){return this.element.ownerDocument.defaultView;},getDocument:function(){return this.element.ownerDocument;},constructor:function(readyCallback,config,contentEditable){this.callback=readyCallback||wysihtml5.EMPTY_FUNCTION;this.config=wysihtml5.lang.object({}).merge(config).get();if(contentEditable){this.element=this._bindElement(contentEditable);}else{this.element=this._createElement();}},_createElement:function(){var element=doc.createElement("div");element.className="wysihtml5-sandbox";this._loadElement(element);return element;},_bindElement:function(contentEditable){contentEditable.className=(contentEditable.className&&contentEditable.className!='')?contentEditable.className+" wysihtml5-sandbox":"wysihtml5-sandbox";this._loadElement(contentEditable,true);return contentEditable;},_loadElement:function(element,contentExists){var that=this;if(!contentExists){var sandboxHtml=this._getHtml();element.innerHTML=sandboxHtml;}
this.getWindow=function(){return element.ownerDocument.defaultView;};this.getDocument=function(){return element.ownerDocument;};this.loaded=true;setTimeout(function(){that.callback(that);},0);},_getHtml:function(templateVars){return'';}});})(wysihtml5);;(function(){var mapping={"className":"class"};wysihtml5.dom.setAttributes=function(attributes){return{on:function(element){for(var i in attributes){element.setAttribute(mapping[i]||i,attributes[i]);}}};};})();;wysihtml5.dom.setStyles=function(styles){return{on:function(element){var style=element.style;if(typeof(styles)==="string"){style.cssText+=";"+styles;return;}
for(var i in styles){if(i==="float"){style.cssFloat=styles[i];style.styleFloat=styles[i];}else{style[i]=styles[i];}}}};};;(function(dom){dom.simulatePlaceholder=function(editor,view,placeholderText){var CLASS_NAME="placeholder",unset=function(){if(view.hasPlaceholderSet()){view.clear();}
view.placeholderSet=false;dom.removeClass(view.element,CLASS_NAME);},set=function(){if(view.isEmpty()){view.placeholderSet=true;view.setValue(placeholderText);dom.addClass(view.element,CLASS_NAME);}};editor.on("set_placeholder",set).on("unset_placeholder",unset).on("focus:composer",unset).on("paste:composer",unset).on("blur:composer",set);set();};})(wysihtml5.dom);;(function(dom){var documentElement=document.documentElement;if("textContent"in documentElement){dom.setTextContent=function(element,text){element.textContent=text;};dom.getTextContent=function(element){return element.textContent;};}else if("innerText"in documentElement){dom.setTextContent=function(element,text){element.innerText=text;};dom.getTextContent=function(element){return element.innerText;};}else{dom.setTextContent=function(element,text){element.nodeValue=text;};dom.getTextContent=function(element){return element.nodeValue;};}})(wysihtml5.dom);;wysihtml5.dom.getAttribute=function(node,attributeName){var HAS_GET_ATTRIBUTE_BUG=!wysihtml5.browser.supportsGetAttributeCorrectly();attributeName=attributeName.toLowerCase();var nodeName=node.nodeName;if(nodeName=="IMG"&&attributeName=="src"&&_isLoadedImage(node)===true){return node.src;}else if(HAS_GET_ATTRIBUTE_BUG&&"outerHTML"in node){var outerHTML=node.outerHTML.toLowerCase(),hasAttribute=outerHTML.indexOf(" "+attributeName+"=")!=-1;return hasAttribute?node.getAttribute(attributeName):null;}else{return node.getAttribute(attributeName);}};;(function(wysihtml5){var api=wysihtml5.dom;var MapCell=function(cell){this.el=cell;this.isColspan=false;this.isRowspan=false;this.firstCol=true;this.lastCol=true;this.firstRow=true;this.lastRow=true;this.isReal=true;this.spanCollection=[];this.modified=false;};var TableModifyerByCell=function(cell,table){if(cell){this.cell=cell;this.table=api.getParentElement(cell,{nodeName:["TABLE"]});}else if(table){this.table=table;this.cell=this.table.querySelectorAll('th, td')[0];}};function queryInList(list,query){var ret=[],q;for(var e=0,len=list.length;e<len;e++){q=list[e].querySelectorAll(query);if(q){for(var i=q.length;i--;ret.unshift(q[i]));}}
return ret;}
function removeElement(el){el.parentNode.removeChild(el);}
function insertAfter(referenceNode,newNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);}
function nextNode(node,tag){var element=node.nextSibling;while(element.nodeType!=1){element=element.nextSibling;if(!tag||tag==element.tagName.toLowerCase()){return element;}}
return null;}
TableModifyerByCell.prototype={addSpannedCellToMap:function(cell,map,r,c,cspan,rspan){var spanCollect=[],rmax=r+((rspan)?parseInt(rspan,10)-1:0),cmax=c+((cspan)?parseInt(cspan,10)-1:0);for(var rr=r;rr<=rmax;rr++){if(typeof map[rr]=="undefined"){map[rr]=[];}
for(var cc=c;cc<=cmax;cc++){map[rr][cc]=new MapCell(cell);map[rr][cc].isColspan=(cspan&&parseInt(cspan,10)>1);map[rr][cc].isRowspan=(rspan&&parseInt(rspan,10)>1);map[rr][cc].firstCol=cc==c;map[rr][cc].lastCol=cc==cmax;map[rr][cc].firstRow=rr==r;map[rr][cc].lastRow=rr==rmax;map[rr][cc].isReal=cc==c&&rr==r;map[rr][cc].spanCollection=spanCollect;spanCollect.push(map[rr][cc]);}}},setCellAsModified:function(cell){cell.modified=true;if(cell.spanCollection.length>0){for(var s=0,smax=cell.spanCollection.length;s<smax;s++){cell.spanCollection[s].modified=true;}}},setTableMap:function(){var map=[];var tableRows=this.getTableRows(),ridx,row,cells,cidx,cell,c,cspan,rspan;for(ridx=0;ridx<tableRows.length;ridx++){row=tableRows[ridx];cells=this.getRowCells(row);c=0;if(typeof map[ridx]=="undefined"){map[ridx]=[];}
for(cidx=0;cidx<cells.length;cidx++){cell=cells[cidx];while(typeof map[ridx][c]!="undefined"){c++;}
cspan=api.getAttribute(cell,'colspan');rspan=api.getAttribute(cell,'rowspan');if(cspan||rspan){this.addSpannedCellToMap(cell,map,ridx,c,cspan,rspan);c=c+((cspan)?parseInt(cspan,10):1);}else{map[ridx][c]=new MapCell(cell);c++;}}}
this.map=map;return map;},getRowCells:function(row){var inlineTables=this.table.querySelectorAll('table'),inlineCells=(inlineTables)?queryInList(inlineTables,'th, td'):[],allCells=row.querySelectorAll('th, td'),tableCells=(inlineCells.length>0)?wysihtml5.lang.array(allCells).without(inlineCells):allCells;return tableCells;},getTableRows:function(){var inlineTables=this.table.querySelectorAll('table'),inlineRows=(inlineTables)?queryInList(inlineTables,'tr'):[],allRows=this.table.querySelectorAll('tr'),tableRows=(inlineRows.length>0)?wysihtml5.lang.array(allRows).without(inlineRows):allRows;return tableRows;},getMapIndex:function(cell){var r_length=this.map.length,c_length=(this.map&&this.map[0])?this.map[0].length:0;for(var r_idx=0;r_idx<r_length;r_idx++){for(var c_idx=0;c_idx<c_length;c_idx++){if(this.map[r_idx][c_idx].el===cell){return{'row':r_idx,'col':c_idx};}}}
return false;},getElementAtIndex:function(idx){this.setTableMap();if(this.map[idx.row]&&this.map[idx.row][idx.col]&&this.map[idx.row][idx.col].el){return this.map[idx.row][idx.col].el;}
return null;},getMapElsTo:function(to_cell){var els=[];this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(to_cell);if(this.idx_start.row>this.idx_end.row||(this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)){var temp_idx=this.idx_start;this.idx_start=this.idx_end;this.idx_end=temp_idx;}
if(this.idx_start.col>this.idx_end.col){var temp_cidx=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=temp_cidx;}
if(this.idx_start!=null&&this.idx_end!=null){for(var row=this.idx_start.row,maxr=this.idx_end.row;row<=maxr;row++){for(var col=this.idx_start.col,maxc=this.idx_end.col;col<=maxc;col++){els.push(this.map[row][col].el);}}}
return els;},orderSelectionEnds:function(secondcell){this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(secondcell);if(this.idx_start.row>this.idx_end.row||(this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)){var temp_idx=this.idx_start;this.idx_start=this.idx_end;this.idx_end=temp_idx;}
if(this.idx_start.col>this.idx_end.col){var temp_cidx=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=temp_cidx;}
return{"start":this.map[this.idx_start.row][this.idx_start.col].el,"end":this.map[this.idx_end.row][this.idx_end.col].el};},createCells:function(tag,nr,attrs){var doc=this.table.ownerDocument,frag=doc.createDocumentFragment(),cell;for(var i=0;i<nr;i++){cell=doc.createElement(tag);if(attrs){for(var attr in attrs){if(attrs.hasOwnProperty(attr)){cell.setAttribute(attr,attrs[attr]);}}}
cell.appendChild(document.createTextNode("\u00a0"));frag.appendChild(cell);}
return frag;},correctColIndexForUnreals:function(col,row){var r=this.map[row],corrIdx=-1;for(var i=0,max=col;i<col;i++){if(r[i].isReal){corrIdx++;}}
return corrIdx;},getLastNewCellOnRow:function(row,rowLimit){var cells=this.getRowCells(row),cell,idx;for(var cidx=0,cmax=cells.length;cidx<cmax;cidx++){cell=cells[cidx];idx=this.getMapIndex(cell);if(idx===false||(typeof rowLimit!="undefined"&&idx.row!=rowLimit)){return cell;}}
return null;},removeEmptyTable:function(){var cells=this.table.querySelectorAll('td, th');if(!cells||cells.length==0){removeElement(this.table);return true;}else{return false;}},splitRowToCells:function(cell){if(cell.isColspan){var colspan=parseInt(api.getAttribute(cell.el,'colspan')||1,10),cType=cell.el.tagName.toLowerCase();if(colspan>1){var newCells=this.createCells(cType,colspan-1);insertAfter(cell.el,newCells);}
cell.el.removeAttribute('colspan');}},getRealRowEl:function(force,idx){var r=null,c=null;idx=idx||this.idx;for(var cidx=0,cmax=this.map[idx.row].length;cidx<cmax;cidx++){c=this.map[idx.row][cidx];if(c.isReal){r=api.getParentElement(c.el,{nodeName:["TR"]});if(r){return r;}}}
if(r===null&&force){r=api.getParentElement(this.map[idx.row][idx.col].el,{nodeName:["TR"]})||null;}
return r;},injectRowAt:function(row,col,colspan,cType,c){var r=this.getRealRowEl(false,{'row':row,'col':col}),new_cells=this.createCells(cType,colspan);if(r){var n_cidx=this.correctColIndexForUnreals(col,row);if(n_cidx>=0){insertAfter(this.getRowCells(r)[n_cidx],new_cells);}else{r.insertBefore(new_cells,r.firstChild);}}else{var rr=this.table.ownerDocument.createElement('tr');rr.appendChild(new_cells);insertAfter(api.getParentElement(c.el,{nodeName:["TR"]}),rr);}},canMerge:function(to){this.to=to;this.setTableMap();this.idx_start=this.getMapIndex(this.cell);this.idx_end=this.getMapIndex(this.to);if(this.idx_start.row>this.idx_end.row||(this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)){var temp_idx=this.idx_start;this.idx_start=this.idx_end;this.idx_end=temp_idx;}
if(this.idx_start.col>this.idx_end.col){var temp_cidx=this.idx_start.col;this.idx_start.col=this.idx_end.col;this.idx_end.col=temp_cidx;}
for(var row=this.idx_start.row,maxr=this.idx_end.row;row<=maxr;row++){for(var col=this.idx_start.col,maxc=this.idx_end.col;col<=maxc;col++){if(this.map[row][col].isColspan||this.map[row][col].isRowspan){return false;}}}
return true;},decreaseCellSpan:function(cell,span){var nr=parseInt(api.getAttribute(cell.el,span),10)-1;if(nr>=1){cell.el.setAttribute(span,nr);}else{cell.el.removeAttribute(span);if(span=='colspan'){cell.isColspan=false;}
if(span=='rowspan'){cell.isRowspan=false;}
cell.firstCol=true;cell.lastCol=true;cell.firstRow=true;cell.lastRow=true;cell.isReal=true;}},removeSurplusLines:function(){var row,cell,ridx,rmax,cidx,cmax,allRowspan;this.setTableMap();if(this.map){ridx=0;rmax=this.map.length;for(;ridx<rmax;ridx++){row=this.map[ridx];allRowspan=true;cidx=0;cmax=row.length;for(;cidx<cmax;cidx++){cell=row[cidx];if(!(api.getAttribute(cell.el,"rowspan")&&parseInt(api.getAttribute(cell.el,"rowspan"),10)>1&&cell.firstRow!==true)){allRowspan=false;break;}}
if(allRowspan){cidx=0;for(;cidx<cmax;cidx++){this.decreaseCellSpan(row[cidx],'rowspan');}}}
var tableRows=this.getTableRows();ridx=0;rmax=tableRows.length;for(;ridx<rmax;ridx++){row=tableRows[ridx];if(row.childNodes.length==0&&(/^\s*$/.test(row.textContent||row.innerText))){removeElement(row);}}}},fillMissingCells:function(){var r_max=0,c_max=0,prevcell=null;this.setTableMap();if(this.map){r_max=this.map.length;for(var ridx=0;ridx<r_max;ridx++){if(this.map[ridx].length>c_max){c_max=this.map[ridx].length;}}
for(var row=0;row<r_max;row++){for(var col=0;col<c_max;col++){if(this.map[row]&&!this.map[row][col]){if(col>0){this.map[row][col]=new MapCell(this.createCells('td',1));prevcell=this.map[row][col-1];if(prevcell&&prevcell.el&&prevcell.el.parent){insertAfter(this.map[row][col-1].el,this.map[row][col].el);}}}}}}},rectify:function(){if(!this.removeEmptyTable()){this.removeSurplusLines();this.fillMissingCells();return true;}else{return false;}},unmerge:function(){if(this.rectify()){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx){var thisCell=this.map[this.idx.row][this.idx.col],colspan=(api.getAttribute(thisCell.el,"colspan"))?parseInt(api.getAttribute(thisCell.el,"colspan"),10):1,cType=thisCell.el.tagName.toLowerCase();if(thisCell.isRowspan){var rowspan=parseInt(api.getAttribute(thisCell.el,"rowspan"),10);if(rowspan>1){for(var nr=1,maxr=rowspan-1;nr<=maxr;nr++){this.injectRowAt(this.idx.row+nr,this.idx.col,colspan,cType,thisCell);}}
thisCell.el.removeAttribute('rowspan');}
this.splitRowToCells(thisCell);}}},merge:function(to){if(this.rectify()){if(this.canMerge(to)){var rowspan=this.idx_end.row-this.idx_start.row+1,colspan=this.idx_end.col-this.idx_start.col+1;for(var row=this.idx_start.row,maxr=this.idx_end.row;row<=maxr;row++){for(var col=this.idx_start.col,maxc=this.idx_end.col;col<=maxc;col++){if(row==this.idx_start.row&&col==this.idx_start.col){if(rowspan>1){this.map[row][col].el.setAttribute('rowspan',rowspan);}
if(colspan>1){this.map[row][col].el.setAttribute('colspan',colspan);}}else{if(!(/^\s*<br\/?>\s*$/.test(this.map[row][col].el.innerHTML.toLowerCase()))){this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=' '+this.map[row][col].el.innerHTML;}
removeElement(this.map[row][col].el);}}}
this.rectify();}else{if(window.console){console.log('Do not know how to merge allready merged cells.');}}}},collapseCellToNextRow:function(cell){var cellIdx=this.getMapIndex(cell.el),newRowIdx=cellIdx.row+1,newIdx={'row':newRowIdx,'col':cellIdx.col};if(newRowIdx<this.map.length){var row=this.getRealRowEl(false,newIdx);if(row!==null){var n_cidx=this.correctColIndexForUnreals(newIdx.col,newIdx.row);if(n_cidx>=0){insertAfter(this.getRowCells(row)[n_cidx],cell.el);}else{var lastCell=this.getLastNewCellOnRow(row,newRowIdx);if(lastCell!==null){insertAfter(lastCell,cell.el);}else{row.insertBefore(cell.el,row.firstChild);}}
if(parseInt(api.getAttribute(cell.el,'rowspan'),10)>2){cell.el.setAttribute('rowspan',parseInt(api.getAttribute(cell.el,'rowspan'),10)-1);}else{cell.el.removeAttribute('rowspan');}}}},removeRowCell:function(cell){if(cell.isReal){if(cell.isRowspan){this.collapseCellToNextRow(cell);}else{removeElement(cell.el);}}else{if(parseInt(api.getAttribute(cell.el,'rowspan'),10)>2){cell.el.setAttribute('rowspan',parseInt(api.getAttribute(cell.el,'rowspan'),10)-1);}else{cell.el.removeAttribute('rowspan');}}},getRowElementsByCell:function(){var cells=[];this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx!==false){var modRow=this.map[this.idx.row];for(var cidx=0,cmax=modRow.length;cidx<cmax;cidx++){if(modRow[cidx].isReal){cells.push(modRow[cidx].el);}}}
return cells;},getColumnElementsByCell:function(){var cells=[];this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx!==false){for(var ridx=0,rmax=this.map.length;ridx<rmax;ridx++){if(this.map[ridx][this.idx.col]&&this.map[ridx][this.idx.col].isReal){cells.push(this.map[ridx][this.idx.col].el);}}}
return cells;},removeRow:function(){var oldRow=api.getParentElement(this.cell,{nodeName:["TR"]});if(oldRow){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx!==false){var modRow=this.map[this.idx.row];for(var cidx=0,cmax=modRow.length;cidx<cmax;cidx++){if(!modRow[cidx].modified){this.setCellAsModified(modRow[cidx]);this.removeRowCell(modRow[cidx]);}}}
removeElement(oldRow);}},removeColCell:function(cell){if(cell.isColspan){if(parseInt(api.getAttribute(cell.el,'colspan'),10)>2){cell.el.setAttribute('colspan',parseInt(api.getAttribute(cell.el,'colspan'),10)-1);}else{cell.el.removeAttribute('colspan');}}else if(cell.isReal){removeElement(cell.el);}},removeColumn:function(){this.setTableMap();this.idx=this.getMapIndex(this.cell);if(this.idx!==false){for(var ridx=0,rmax=this.map.length;ridx<rmax;ridx++){if(!this.map[ridx][this.idx.col].modified){this.setCellAsModified(this.map[ridx][this.idx.col]);this.removeColCell(this.map[ridx][this.idx.col]);}}}},remove:function(what){if(this.rectify()){switch(what){case'row':this.removeRow();break;case'column':this.removeColumn();break;}
this.rectify();}},addRow:function(where){var doc=this.table.ownerDocument;this.setTableMap();this.idx=this.getMapIndex(this.cell);if(where=="below"&&api.getAttribute(this.cell,'rowspan')){this.idx.row=this.idx.row+parseInt(api.getAttribute(this.cell,'rowspan'),10)-1;}
if(this.idx!==false){var modRow=this.map[this.idx.row],newRow=doc.createElement('tr');for(var ridx=0,rmax=modRow.length;ridx<rmax;ridx++){if(!modRow[ridx].modified){this.setCellAsModified(modRow[ridx]);this.addRowCell(modRow[ridx],newRow,where);}}
switch(where){case'below':insertAfter(this.getRealRowEl(true),newRow);break;case'above':var cr=api.getParentElement(this.map[this.idx.row][this.idx.col].el,{nodeName:["TR"]});if(cr){cr.parentNode.insertBefore(newRow,cr);}
break;}}},addRowCell:function(cell,row,where){var colSpanAttr=(cell.isColspan)?{"colspan":api.getAttribute(cell.el,'colspan')}:null;if(cell.isReal){if(where!='above'&&cell.isRowspan){cell.el.setAttribute('rowspan',parseInt(api.getAttribute(cell.el,'rowspan'),10)+1);}else{row.appendChild(this.createCells('td',1,colSpanAttr));}}else{if(where!='above'&&cell.isRowspan&&cell.lastRow){row.appendChild(this.createCells('td',1,colSpanAttr));}else if(c.isRowspan){cell.el.attr('rowspan',parseInt(api.getAttribute(cell.el,'rowspan'),10)+1);}}},add:function(where){if(this.rectify()){if(where=='below'||where=='above'){this.addRow(where);}
if(where=='before'||where=='after'){this.addColumn(where);}}},addColCell:function(cell,ridx,where){var doAdd,cType=cell.el.tagName.toLowerCase();switch(where){case"before":doAdd=(!cell.isColspan||cell.firstCol);break;case"after":doAdd=(!cell.isColspan||cell.lastCol||(cell.isColspan&&c.el==this.cell));break;}
if(doAdd){switch(where){case"before":cell.el.parentNode.insertBefore(this.createCells(cType,1),cell.el);break;case"after":insertAfter(cell.el,this.createCells(cType,1));break;}
if(cell.isRowspan){this.handleCellAddWithRowspan(cell,ridx+1,where);}}else{cell.el.setAttribute('colspan',parseInt(api.getAttribute(cell.el,'colspan'),10)+1);}},addColumn:function(where){var row,modCell;this.setTableMap();this.idx=this.getMapIndex(this.cell);if(where=="after"&&api.getAttribute(this.cell,'colspan')){this.idx.col=this.idx.col+parseInt(api.getAttribute(this.cell,'colspan'),10)-1;}
if(this.idx!==false){for(var ridx=0,rmax=this.map.length;ridx<rmax;ridx++){row=this.map[ridx];if(row[this.idx.col]){modCell=row[this.idx.col];if(!modCell.modified){this.setCellAsModified(modCell);this.addColCell(modCell,ridx,where);}}}}},handleCellAddWithRowspan:function(cell,ridx,where){var addRowsNr=parseInt(api.getAttribute(this.cell,'rowspan'),10)-1,crow=api.getParentElement(cell.el,{nodeName:["TR"]}),cType=cell.el.tagName.toLowerCase(),cidx,temp_r_cells,doc=this.table.ownerDocument,nrow;for(var i=0;i<addRowsNr;i++){cidx=this.correctColIndexForUnreals(this.idx.col,(ridx+i));crow=nextNode(crow,'tr');if(crow){if(cidx>0){switch(where){case"before":temp_r_cells=this.getRowCells(crow);if(cidx>0&&this.map[ridx+i][this.idx.col].el!=temp_r_cells[cidx]&&cidx==temp_r_cells.length-1){insertAfter(temp_r_cells[cidx],this.createCells(cType,1));}else{temp_r_cells[cidx].parentNode.insertBefore(this.createCells(cType,1),temp_r_cells[cidx]);}
break;case"after":insertAfter(this.getRowCells(crow)[cidx],this.createCells(cType,1));break;}}else{crow.insertBefore(this.createCells(cType,1),crow.firstChild);}}else{nrow=doc.createElement('tr');nrow.appendChild(this.createCells(cType,1));this.table.appendChild(nrow);}}}};api.table={getCellsBetween:function(cell1,cell2){var c1=new TableModifyerByCell(cell1);return c1.getMapElsTo(cell2);},addCells:function(cell,where){var c=new TableModifyerByCell(cell);c.add(where);},removeCells:function(cell,what){var c=new TableModifyerByCell(cell);c.remove(what);},mergeCellsBetween:function(cell1,cell2){var c1=new TableModifyerByCell(cell1);c1.merge(cell2);},unmergeCell:function(cell){var c=new TableModifyerByCell(cell);c.unmerge();},orderSelectionEnds:function(cell,cell2){var c=new TableModifyerByCell(cell);return c.orderSelectionEnds(cell2);},indexOf:function(cell){var c=new TableModifyerByCell(cell);c.setTableMap();return c.getMapIndex(cell);},findCell:function(table,idx){var c=new TableModifyerByCell(null,table);return c.getElementAtIndex(idx);},findRowByCell:function(cell){var c=new TableModifyerByCell(cell);return c.getRowElementsByCell();},findColumnByCell:function(cell){var c=new TableModifyerByCell(cell);return c.getColumnElementsByCell();},canMerge:function(cell1,cell2){var c=new TableModifyerByCell(cell1);return c.canMerge(cell2);}};})(wysihtml5);;wysihtml5.dom.query=function(elements,query){var ret=[],q;if(elements.nodeType){elements=[elements];}
for(var e=0,len=elements.length;e<len;e++){q=elements[e].querySelectorAll(query);if(q){for(var i=q.length;i--;ret.unshift(q[i]));}}
return ret;};;wysihtml5.dom.compareDocumentPosition=(function(){var documentElement=document.documentElement;if(documentElement.compareDocumentPosition){return function(container,element){return container.compareDocumentPosition(element);};}else{return function(container,element){var thisOwner,otherOwner;if(container.nodeType===9)
thisOwner=container;else
thisOwner=container.ownerDocument;if(element.nodeType===9)
otherOwner=element;else
otherOwner=element.ownerDocument;if(container===element)return 0;if(container===element.ownerDocument)return 4+16;if(container.ownerDocument===element)return 2+8;if(thisOwner!==otherOwner)return 1;if(container.nodeType===2&&container.childNodes&&wysihtml5.lang.array(container.childNodes).indexOf(element)!==-1)
return 4+16;if(element.nodeType===2&&element.childNodes&&wysihtml5.lang.array(element.childNodes).indexOf(container)!==-1)
return 2+8;var point=container;var parents=[];var previous=null;while(point){if(point==element)return 2+8;parents.push(point);point=point.parentNode;}
point=element;previous=null;while(point){if(point==container)return 4+16;var location_index=wysihtml5.lang.array(parents).indexOf(point);if(location_index!==-1){var smallest_common_ancestor=parents[location_index];var this_index=wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf(parents[location_index-1]);var other_index=wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf(previous);if(this_index>other_index){return 2;}
else{return 4;}}
previous=point;point=point.parentNode;}
return 1;};}})();;wysihtml5.dom.unwrap=function(node){if(node.parentNode){while(node.lastChild){wysihtml5.dom.insert(node.lastChild).after(node);}
node.parentNode.removeChild(node);}};;wysihtml5.quirks.cleanPastedHTML=(function(){var defaultRules={"a u":wysihtml5.dom.replaceWithChildNodes};function cleanPastedHTML(elementOrHtml,rules,context){rules=rules||defaultRules;context=context||elementOrHtml.ownerDocument||document;var element,isString=typeof(elementOrHtml)==="string",method,matches,matchesLength,i,j=0,n;if(isString){element=wysihtml5.dom.getAsDom(elementOrHtml,context);}else{element=elementOrHtml;}
for(i in rules){matches=element.querySelectorAll(i);method=rules[i];matchesLength=matches.length;for(;j<matchesLength;j++){method(matches[j]);}}
var txtnodes=wysihtml5.dom.getTextNodes(element);for(n=txtnodes.length;n--;){txtnodes[n].nodeValue=txtnodes[n].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");}
matches=elementOrHtml=rules=null;return isString?element.innerHTML:element;}
return cleanPastedHTML;})();;wysihtml5.quirks.ensureProperClearing=(function(){var clearIfNecessary=function(){var element=this;setTimeout(function(){var innerHTML=element.innerHTML.toLowerCase();if(innerHTML=="<p>&nbsp;</p>"||innerHTML=="<p>&nbsp;</p><p>&nbsp;</p>"){element.innerHTML="";}},0);};return function(composer){wysihtml5.dom.observe(composer.element,["cut","keydown"],clearIfNecessary);};})();;(function(wysihtml5){var TILDE_ESCAPED="%7E";wysihtml5.quirks.getCorrectInnerHTML=function(element){var innerHTML=element.innerHTML;if(innerHTML.indexOf(TILDE_ESCAPED)===-1){return innerHTML;}
var elementsWithTilde=element.querySelectorAll("[href*='~'], [src*='~']"),url,urlToSearch,length,i;for(i=0,length=elementsWithTilde.length;i<length;i++){url=elementsWithTilde[i].href||elementsWithTilde[i].src;urlToSearch=wysihtml5.lang.string(url).replace("~").by(TILDE_ESCAPED);innerHTML=wysihtml5.lang.string(innerHTML).replace(urlToSearch).by(url);}
return innerHTML;};})(wysihtml5);;(function(wysihtml5){var CLASS_NAME="wysihtml5-quirks-redraw";wysihtml5.quirks.redraw=function(element){wysihtml5.dom.addClass(element,CLASS_NAME);wysihtml5.dom.removeClass(element,CLASS_NAME);try{var doc=element.ownerDocument;doc.execCommand("italic",false,null);doc.execCommand("italic",false,null);}catch(e){}};})(wysihtml5);;wysihtml5.quirks.tableCellsSelection=function(editable,editor){var dom=wysihtml5.dom,select={table:null,start:null,end:null,cells:null,select:selectCells},selection_class="wysiwyg-tmp-selected-cell",moveHandler=null,upHandler=null;function init(){dom.observe(editable,"mousedown",function(event){var target=wysihtml5.dom.getParentElement(event.target,{nodeName:["TD","TH"]});if(target){handleSelectionMousedown(target);}});return select;}
function handleSelectionMousedown(target){select.start=target;select.end=target;select.cells=[target];select.table=dom.getParentElement(select.start,{nodeName:["TABLE"]});if(select.table){removeCellSelections();dom.addClass(target,selection_class);moveHandler=dom.observe(editable,"mousemove",handleMouseMove);upHandler=dom.observe(editable,"mouseup",handleMouseUp);editor.fire("tableselectstart").fire("tableselectstart:composer");}}
function removeCellSelections(){if(editable){var selectedCells=editable.querySelectorAll('.'+selection_class);if(selectedCells.length>0){for(var i=0;i<selectedCells.length;i++){dom.removeClass(selectedCells[i],selection_class);}}}}
function addSelections(cells){for(var i=0;i<cells.length;i++){dom.addClass(cells[i],selection_class);}}
function handleMouseMove(event){var curTable=null,cell=dom.getParentElement(event.target,{nodeName:["TD","TH"]}),oldEnd;if(cell&&select.table&&select.start){curTable=dom.getParentElement(cell,{nodeName:["TABLE"]});if(curTable&&curTable===select.table){removeCellSelections();oldEnd=select.end;select.end=cell;select.cells=dom.table.getCellsBetween(select.start,cell);if(select.cells.length>1){editor.composer.selection.deselect();}
addSelections(select.cells);if(select.end!==oldEnd){editor.fire("tableselectchange").fire("tableselectchange:composer");}}}}
function handleMouseUp(event){moveHandler.stop();upHandler.stop();editor.fire("tableselect").fire("tableselect:composer");setTimeout(function(){bindSideclick();},0);}
function bindSideclick(){var sideClickHandler=dom.observe(editable.ownerDocument,"click",function(event){sideClickHandler.stop();if(dom.getParentElement(event.target,{nodeName:["TABLE"]})!=select.table){removeCellSelections();select.table=null;select.start=null;select.end=null;editor.fire("tableunselect").fire("tableunselect:composer");}});}
function selectCells(start,end){select.start=start;select.end=end;select.table=dom.getParentElement(select.start,{nodeName:["TABLE"]});selectedCells=dom.table.getCellsBetween(select.start,select.end);addSelections(selectedCells);bindSideclick();editor.fire("tableselect").fire("tableselect:composer");}
return init();};;(function(wysihtml5){var RGBA_REGEX=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,RGB_REGEX=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,HEX6_REGEX=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,HEX3_REGEX=/^#([0-9a-f])([0-9a-f])([0-9a-f])/i;var param_REGX=function(p){return new RegExp("(^|\\s|;)"+p+"\\s*:\\s*[^;$]+","gi");};wysihtml5.quirks.styleParser={parseColor:function(stylesStr,paramName){var paramRegex=param_REGX(paramName),params=stylesStr.match(paramRegex),radix=10,str,colorMatch;if(params){for(var i=params.length;i--;){params[i]=wysihtml5.lang.string(params[i].split(':')[1]).trim();}
str=params[params.length-1];if(RGBA_REGEX.test(str)){colorMatch=str.match(RGBA_REGEX);}else if(RGB_REGEX.test(str)){colorMatch=str.match(RGB_REGEX);}else if(HEX6_REGEX.test(str)){colorMatch=str.match(HEX6_REGEX);radix=16;}else if(HEX3_REGEX.test(str)){colorMatch=str.match(HEX3_REGEX);colorMatch.shift();colorMatch.push(1);return wysihtml5.lang.array(colorMatch).map(function(d,idx){return(idx<3)?(parseInt(d,16)*16)+parseInt(d,16):parseFloat(d);});}
if(colorMatch){colorMatch.shift();if(!colorMatch[3]){colorMatch.push(1);}
return wysihtml5.lang.array(colorMatch).map(function(d,idx){return(idx<3)?parseInt(d,radix):parseFloat(d);});}}
return false;},unparseColor:function(val,props){if(props){if(props=="hex"){return(val[0].toString(16).toUpperCase())+(val[1].toString(16).toUpperCase())+(val[2].toString(16).toUpperCase());}else if(props=="hash"){return"#"+(val[0].toString(16).toUpperCase())+(val[1].toString(16).toUpperCase())+(val[2].toString(16).toUpperCase());}else if(props=="rgb"){return"rgb("+val[0]+","+val[1]+","+val[2]+")";}else if(props=="rgba"){return"rgba("+val[0]+","+val[1]+","+val[2]+","+val[3]+")";}else if(props=="csv"){return val[0]+","+val[1]+","+val[2]+","+val[3];}}
if(val[3]&&val[3]!==1){return"rgba("+val[0]+","+val[1]+","+val[2]+","+val[3]+")";}else{return"rgb("+val[0]+","+val[1]+","+val[2]+")";}},parseFontSize:function(stylesStr){var params=stylesStr.match(param_REGX('font-size'));if(params){return wysihtml5.lang.string(params[params.length-1].split(':')[1]).trim();}
return false;}};})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom;function _getCumulativeOffsetTop(element){var top=0;if(element.parentNode){do{top+=element.offsetTop||0;element=element.offsetParent;}while(element);}
return top;}
function getDepth(ancestor,descendant){var ret=0;while(descendant!==ancestor){ret++;descendant=descendant.parentNode;if(!descendant)
throw new Error("not a descendant of ancestor!");}
return ret;}
function expandRangeToSurround(range){if(range.canSurroundContents())return;var common=range.commonAncestorContainer,start_depth=getDepth(common,range.startContainer),end_depth=getDepth(common,range.endContainer);while(!range.canSurroundContents()){if(start_depth>end_depth){range.setStartBefore(range.startContainer);start_depth=getDepth(common,range.startContainer);}
else{range.setEndAfter(range.endContainer);end_depth=getDepth(common,range.endContainer);}}}
wysihtml5.Selection=Base.extend({constructor:function(editor,contain,unselectableClass){window.rangy.init();this.editor=editor;this.composer=editor.composer;this.doc=this.composer.doc;this.contain=contain;this.unselectableClass=unselectableClass||false;},getBookmark:function(){var range=this.getRange();if(range)expandRangeToSurround(range);return range&&range.cloneRange();},setBookmark:function(bookmark){if(!bookmark){return;}
this.setSelection(bookmark);},setBefore:function(node){var range=rangy.createRange(this.doc);range.setStartBefore(node);range.setEndBefore(node);return this.setSelection(range);},setAfter:function(node){var range=rangy.createRange(this.doc);range.setStartAfter(node);range.setEndAfter(node);return this.setSelection(range);},selectNode:function(node,avoidInvisibleSpace){var range=rangy.createRange(this.doc),isElement=node.nodeType===wysihtml5.ELEMENT_NODE,canHaveHTML="canHaveHTML"in node?node.canHaveHTML:(node.nodeName!=="IMG"),content=isElement?node.innerHTML:node.data,isEmpty=(content===""||content===wysihtml5.INVISIBLE_SPACE),displayStyle=dom.getStyle("display").from(node),isBlockElement=(displayStyle==="block"||displayStyle==="list-item");if(isEmpty&&isElement&&canHaveHTML&&!avoidInvisibleSpace){try{node.innerHTML=wysihtml5.INVISIBLE_SPACE;}catch(e){}}
if(canHaveHTML){range.selectNodeContents(node);}else{range.selectNode(node);}
if(canHaveHTML&&isEmpty&&isElement){range.collapse(isBlockElement);}else if(canHaveHTML&&isEmpty){range.setStartAfter(node);range.setEndAfter(node);}
this.setSelection(range);},getSelectedNode:function(controlRange){var selection,range;if(controlRange&&this.doc.selection&&this.doc.selection.type==="Control"){range=this.doc.selection.createRange();if(range&&range.length){return range.item(0);}}
selection=this.getSelection(this.doc);if(selection.focusNode===selection.anchorNode){return selection.focusNode;}else{range=this.getRange(this.doc);return range?range.commonAncestorContainer:this.doc.body;}},getSelectedOwnNodes:function(controlRange){var selection,ranges=this.getOwnRanges(),ownNodes=[];for(var i=0,maxi=ranges.length;i<maxi;i++){ownNodes.push(ranges[i].commonAncestorContainer||this.doc.body);}
return ownNodes;},findNodesInSelection:function(nodeTypes){var ranges=this.getOwnRanges(),nodes=[],curNodes;for(var i=0,maxi=ranges.length;i<maxi;i++){curNodes=ranges[i].getNodes([1],function(node){return wysihtml5.lang.array(nodeTypes).contains(node.nodeName);});nodes=nodes.concat(curNodes);}
return nodes;},containsUneditable:function(){var uneditables=this.getOwnUneditables(),selection=this.getSelection();for(var i=0,maxi=uneditables.length;i<maxi;i++){if(selection.containsNode(uneditables[i])){return true;}}
return false;},deleteContents:function(){var ranges=this.getOwnRanges();for(var i=ranges.length;i--;){ranges[i].deleteContents();}
this.setSelection(ranges[0]);},getPreviousNode:function(node,ignoreEmpty){if(!node){var selection=this.getSelection();node=selection.anchorNode;}
if(node===this.contain){return false;}
var ret=node.previousSibling,parent;if(ret===this.contain){return false;}
if(ret&&ret.nodeType!==3&&ret.nodeType!==1){ret=this.getPreviousNode(ret,ignoreEmpty);}else if(ret&&ret.nodeType===3&&(/^\s*$/).test(ret.textContent)){ret=this.getPreviousNode(ret,ignoreEmpty);}else if(ignoreEmpty&&ret&&ret.nodeType===1&&!wysihtml5.lang.array(["BR","HR","IMG"]).contains(ret.nodeName)&&(/^[\s]*$/).test(ret.innerHTML)){ret=this.getPreviousNode(ret,ignoreEmpty);}else if(!ret&&node!==this.contain){parent=node.parentNode;if(parent!==this.contain){ret=this.getPreviousNode(parent,ignoreEmpty);}}
return(ret!==this.contain)?ret:false;},getSelectionParentsByTag:function(tagName){var nodes=this.getSelectedOwnNodes(),curEl,parents=[];for(var i=0,maxi=nodes.length;i<maxi;i++){curEl=(nodes[i].nodeName&&nodes[i].nodeName==='LI')?nodes[i]:wysihtml5.dom.getParentElement(nodes[i],{nodeName:['LI']},false,this.contain);if(curEl){parents.push(curEl);}}
return(parents.length)?parents:null;},getRangeToNodeEnd:function(){if(this.isCollapsed()){var range=this.getRange(),sNode=range.startContainer,pos=range.startOffset,lastR=rangy.createRange(this.doc);lastR.selectNodeContents(sNode);lastR.setStart(sNode,pos);return lastR;}},caretIsLastInSelection:function(){var r=rangy.createRange(this.doc),s=this.getSelection(),endc=this.getRangeToNodeEnd().cloneContents(),endtxt=endc.textContent;return(/^\s*$/).test(endtxt);},caretIsFirstInSelection:function(){var r=rangy.createRange(this.doc),s=this.getSelection();r.selectNodeContents(this.getRange().commonAncestorContainer);r.collapse(true);return(this.isCollapsed()&&(r.startContainer===s.anchorNode||r.endContainer===s.anchorNode)&&r.startOffset===s.anchorOffset);},caretIsInTheBeginnig:function(ofNode){var selection=this.getSelection(),node=selection.anchorNode,offset=selection.anchorOffset;if(ofNode){return(offset===0&&(node.nodeName&&node.nodeName===ofNode.toUpperCase()||wysihtml5.dom.getParentElement(node.parentNode,{nodeName:ofNode},1)));}else{return(offset===0&&!this.getPreviousNode(node,true));}},caretIsBeforeUneditable:function(){var selection=this.getSelection(),node=selection.anchorNode,offset=selection.anchorOffset;if(offset===0){var prevNode=this.getPreviousNode(node,true);if(prevNode){var uneditables=this.getOwnUneditables();for(var i=0,maxi=uneditables.length;i<maxi;i++){if(prevNode===uneditables[i]){return uneditables[i];}}}}
return false;},executeAndRestoreRangy:function(method,restoreScrollPosition){var win=this.doc.defaultView||this.doc.parentWindow,sel=rangy.saveSelection(win);if(!sel){method();}else{try{method();}catch(e){setTimeout(function(){throw e;},0);}}
rangy.restoreSelection(sel);},executeAndRestore:function(method,restoreScrollPosition){var body=this.doc.body,oldScrollTop=restoreScrollPosition&&body.scrollTop,oldScrollLeft=restoreScrollPosition&&body.scrollLeft,className="_wysihtml5-temp-placeholder",placeholderHtml='<span class="'+className+'">'+wysihtml5.INVISIBLE_SPACE+'</span>',range=this.getRange(true),caretPlaceholder,newCaretPlaceholder,nextSibling,prevSibling,node,node2,range2,newRange;if(!range){method(body,body);return;}
if(!range.collapsed){range2=range.cloneRange();node2=range2.createContextualFragment(placeholderHtml);range2.collapse(false);range2.insertNode(node2);range2.detach();}
node=range.createContextualFragment(placeholderHtml);range.insertNode(node);if(node2){caretPlaceholder=this.contain.querySelectorAll("."+className);range.setStartBefore(caretPlaceholder[0]);range.setEndAfter(caretPlaceholder[caretPlaceholder.length-1]);}
this.setSelection(range);try{method(range.startContainer,range.endContainer);}catch(e){setTimeout(function(){throw e;},0);}
caretPlaceholder=this.contain.querySelectorAll("."+className);if(caretPlaceholder&&caretPlaceholder.length){newRange=rangy.createRange(this.doc);nextSibling=caretPlaceholder[0].nextSibling;if(caretPlaceholder.length>1){prevSibling=caretPlaceholder[caretPlaceholder.length-1].previousSibling;}
if(prevSibling&&nextSibling){newRange.setStartBefore(nextSibling);newRange.setEndAfter(prevSibling);}else{newCaretPlaceholder=this.doc.createTextNode(wysihtml5.INVISIBLE_SPACE);dom.insert(newCaretPlaceholder).after(caretPlaceholder[0]);newRange.setStartBefore(newCaretPlaceholder);newRange.setEndAfter(newCaretPlaceholder);}
this.setSelection(newRange);for(var i=caretPlaceholder.length;i--;){caretPlaceholder[i].parentNode.removeChild(caretPlaceholder[i]);}}else{this.contain.focus();}
if(restoreScrollPosition){body.scrollTop=oldScrollTop;body.scrollLeft=oldScrollLeft;}
try{caretPlaceholder.parentNode.removeChild(caretPlaceholder);}catch(e2){}},set:function(node,offset){var newRange=rangy.createRange(this.doc);newRange.setStart(node,offset||0);this.setSelection(newRange);},insertHTML:function(html){var range=rangy.createRange(this.doc),node=range.createContextualFragment(html),lastChild=node.lastChild;this.insertNode(node);if(lastChild){this.setAfter(lastChild);}},insertNode:function(node){var range=this.getRange();if(range){range.insertNode(node);}},surround:function(nodeOptions){var ranges=this.getOwnRanges(),node,nodes=[];if(ranges.length==0){return nodes;}
for(var i=ranges.length;i--;){node=this.doc.createElement(nodeOptions.nodeName);nodes.push(node);if(nodeOptions.className){node.className=nodeOptions.className;}
if(nodeOptions.cssStyle){node.setAttribute('style',nodeOptions.cssStyle);}
try{ranges[i].surroundContents(node);this.selectNode(node);}catch(e){node.appendChild(ranges[i].extractContents());ranges[i].insertNode(node);}}
return nodes;},deblockAndSurround:function(nodeOptions){var tempElement=this.doc.createElement('div'),range=rangy.createRange(this.doc),tempDivElements,tempElements,firstChild;tempElement.className=nodeOptions.className;this.composer.commands.exec("formatBlock",nodeOptions.nodeName,nodeOptions.className);tempDivElements=this.contain.querySelectorAll("."+nodeOptions.className);if(tempDivElements[0]){tempDivElements[0].parentNode.insertBefore(tempElement,tempDivElements[0]);range.setStartBefore(tempDivElements[0]);range.setEndAfter(tempDivElements[tempDivElements.length-1]);tempElements=range.extractContents();while(tempElements.firstChild){firstChild=tempElements.firstChild;if(firstChild.nodeType==1&&wysihtml5.dom.hasClass(firstChild,nodeOptions.className)){while(firstChild.firstChild){tempElement.appendChild(firstChild.firstChild);}
if(firstChild.nodeName!=="BR"){tempElement.appendChild(this.doc.createElement('br'));}
tempElements.removeChild(firstChild);}else{tempElement.appendChild(firstChild);}}}else{tempElement=null;}
return tempElement;},scrollIntoView:function(){var doc=this.doc,tolerance=5,hasScrollBars=doc.documentElement.scrollHeight>doc.documentElement.offsetHeight,tempElement=doc._wysihtml5ScrollIntoViewElement=doc._wysihtml5ScrollIntoViewElement||(function(){var element=doc.createElement("span");element.innerHTML=wysihtml5.INVISIBLE_SPACE;return element;})(),offsetTop;if(hasScrollBars){this.insertNode(tempElement);offsetTop=_getCumulativeOffsetTop(tempElement);tempElement.parentNode.removeChild(tempElement);if(offsetTop>=(doc.body.scrollTop+doc.documentElement.offsetHeight-tolerance)){doc.body.scrollTop=offsetTop;}}},selectLine:function(){if(wysihtml5.browser.supportsSelectionModify()){this._selectLine_W3C();}else if(this.doc.selection){this._selectLine_MSIE();}},_selectLine_W3C:function(){var win=this.doc.defaultView,selection=win.getSelection();selection.modify("move","left","lineboundary");selection.modify("extend","right","lineboundary");},_selectLine_MSIE:function(){var range=this.doc.selection.createRange(),rangeTop=range.boundingTop,scrollWidth=this.doc.body.scrollWidth,rangeBottom,rangeEnd,measureNode,i,j;if(!range.moveToPoint){return;}
if(rangeTop===0){measureNode=this.doc.createElement("span");this.insertNode(measureNode);rangeTop=measureNode.offsetTop;measureNode.parentNode.removeChild(measureNode);}
rangeTop+=1;for(i=-10;i<scrollWidth;i+=2){try{range.moveToPoint(i,rangeTop);break;}catch(e1){}}
rangeBottom=rangeTop;rangeEnd=this.doc.selection.createRange();for(j=scrollWidth;j>=0;j--){try{rangeEnd.moveToPoint(j,rangeBottom);break;}catch(e2){}}
range.setEndPoint("EndToEnd",rangeEnd);range.select();},getText:function(){var selection=this.getSelection();return selection?selection.toString():"";},getNodes:function(nodeType,filter){var range=this.getRange();if(range){return range.getNodes([nodeType],filter);}else{return[];}},fixRangeOverflow:function(range){if(this.contain&&this.contain.firstChild&&range){var containment=range.compareNode(this.contain);if(containment!==2){if(containment===1){range.setStartBefore(this.contain.firstChild);}
if(containment===0){range.setEndAfter(this.contain.lastChild);}
if(containment===3){range.setStartBefore(this.contain.firstChild);range.setEndAfter(this.contain.lastChild);}}else if(this._detectInlineRangeProblems(range)){var previousElementSibling=range.endContainer.previousElementSibling;if(previousElementSibling){range.setEnd(previousElementSibling,this._endOffsetForNode(previousElementSibling));}}}},_endOffsetForNode:function(node){var range=document.createRange()
range.selectNodeContents(node)
return range.endOffset;},_detectInlineRangeProblems:function(range){position=dom.compareDocumentPosition(range.startContainer,range.endContainer);return(range.endOffset==0&&position&4);},getRange:function(dontFix){var selection=this.getSelection(),range=selection&&selection.rangeCount&&selection.getRangeAt(0);if(dontFix!==true){this.fixRangeOverflow(range);}
return range;},getOwnUneditables:function(){var allUneditables=dom.query(this.contain,'.'+this.unselectableClass),deepUneditables=dom.query(allUneditables,'.'+this.unselectableClass);return wysihtml5.lang.array(allUneditables).without(deepUneditables);},getOwnRanges:function(){var ranges=[],r=this.getRange(),tmpRanges;if(r){ranges.push(r);}
if(this.unselectableClass&&this.contain&&r){var uneditables=this.getOwnUneditables(),tmpRange;if(uneditables.length>0){for(var i=0,imax=uneditables.length;i<imax;i++){tmpRanges=[];for(var j=0,jmax=ranges.length;j<jmax;j++){if(ranges[j]){switch(ranges[j].compareNode(uneditables[i])){case 2:break;case 3:tmpRange=ranges[j].cloneRange();tmpRange.setEndBefore(uneditables[i]);tmpRanges.push(tmpRange);tmpRange=ranges[j].cloneRange();tmpRange.setStartAfter(uneditables[i]);tmpRanges.push(tmpRange);break;default:tmpRanges.push(ranges[j]);}}
ranges=tmpRanges;}}}}
return ranges;},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow);},setSelection:function(range){var win=this.doc.defaultView||this.doc.parentWindow,selection=rangy.getSelection(win);return selection.setSingleRange(range);},createRange:function(){return rangy.createRange(this.doc);},isCollapsed:function(){return this.getSelection().isCollapsed;},isEndToEndInNode:function(nodeNames){var range=this.getRange(),parentElement=range.commonAncestorContainer,startNode=range.startContainer,endNode=range.endContainer;if(parentElement.nodeType===wysihtml5.TEXT_NODE){parentElement=parentElement.parentNode;}
if(startNode.nodeType===wysihtml5.TEXT_NODE&&!(/^\s*$/).test(startNode.data.substr(range.startOffset))){return false;}
if(endNode.nodeType===wysihtml5.TEXT_NODE&&!(/^\s*$/).test(endNode.data.substr(range.endOffset))){return false;}
while(startNode&&startNode!==parentElement){if(startNode.nodeType!==wysihtml5.TEXT_NODE&&!wysihtml5.dom.contains(parentElement,startNode)){return false;}
if(wysihtml5.dom.domNode(startNode).prev({ignoreBlankTexts:true})){return false;}
startNode=startNode.parentNode;}
while(endNode&&endNode!==parentElement){if(endNode.nodeType!==wysihtml5.TEXT_NODE&&!wysihtml5.dom.contains(parentElement,endNode)){return false;}
if(wysihtml5.dom.domNode(endNode).next({ignoreBlankTexts:true})){return false;}
endNode=endNode.parentNode;}
return(wysihtml5.lang.array(nodeNames).contains(parentElement.nodeName))?parentElement:false;},deselect:function(){var sel=this.getSelection();sel&&sel.removeAllRanges();}});})(wysihtml5);;(function(wysihtml5,rangy){var defaultTagName="span";var REG_EXP_WHITE_SPACE=/\s+/g;function hasClass(el,cssClass,regExp){if(!el.className){return false;}
var matchingClassNames=el.className.match(regExp)||[];return matchingClassNames[matchingClassNames.length-1]===cssClass;}
function hasStyleAttr(el,regExp){if(!el.getAttribute||!el.getAttribute('style')){return false;}
var matchingStyles=el.getAttribute('style').match(regExp);return(el.getAttribute('style').match(regExp))?true:false;}
function addStyle(el,cssStyle,regExp){if(el.getAttribute('style')){removeStyle(el,regExp);if(el.getAttribute('style')&&!(/^\s*$/).test(el.getAttribute('style'))){el.setAttribute('style',cssStyle+";"+el.getAttribute('style'));}else{el.setAttribute('style',cssStyle);}}else{el.setAttribute('style',cssStyle);}}
function addClass(el,cssClass,regExp){if(el.className){removeClass(el,regExp);el.className+=" "+cssClass;}else{el.className=cssClass;}}
function removeClass(el,regExp){if(el.className){el.className=el.className.replace(regExp,"");}}
function removeStyle(el,regExp){var s,s2=[];if(el.getAttribute('style')){s=el.getAttribute('style').split(';');for(var i=s.length;i--;){if(!s[i].match(regExp)&&!(/^\s*$/).test(s[i])){s2.push(s[i]);}}
if(s2.length){el.setAttribute('style',s2.join(';'));}else{el.removeAttribute('style');}}}
function getMatchingStyleRegexp(el,style){var regexes=[],sSplit=style.split(';'),elStyle=el.getAttribute('style');if(elStyle){elStyle=elStyle.replace(/\s/gi,'').toLowerCase();regexes.push(new RegExp("(^|\\s|;)"+style.replace(/\s/gi,'').replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(var i=sSplit.length;i-->0;){if(!(/^\s*$/).test(sSplit[i])){regexes.push(new RegExp("(^|\\s|;)"+sSplit[i].replace(/\s/gi,'').replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));}}
for(var j=0,jmax=regexes.length;j<jmax;j++){if(elStyle.match(regexes[j])){return regexes[j];}}}
return false;}
function removeOrChangeStyle(el,style,regExp){var exactRegex=getMatchingStyleRegexp(el,style);if(exactRegex){removeStyle(el,exactRegex);return"remove";}else{addStyle(el,style,regExp);return"change";}}
function hasSameClasses(el1,el2){return el1.className.replace(REG_EXP_WHITE_SPACE," ")==el2.className.replace(REG_EXP_WHITE_SPACE," ");}
function replaceWithOwnChildren(el){var parent=el.parentNode;while(el.firstChild){parent.insertBefore(el.firstChild,el);}
if(parent.normalize){parent.normalize();}
parent.removeChild(el);}
function elementsHaveSameNonClassAttributes(el1,el2){if(el1.attributes.length!=el2.attributes.length){return false;}
for(var i=0,len=el1.attributes.length,attr1,attr2,name;i<len;++i){attr1=el1.attributes[i];name=attr1.name;if(name!="class"){attr2=el2.attributes.getNamedItem(name);if(attr1.specified!=attr2.specified){return false;}
if(attr1.specified&&attr1.nodeValue!==attr2.nodeValue){return false;}}}
return true;}
function isSplitPoint(node,offset){if(rangy.dom.isCharacterDataNode(node)){if(offset==0){return!!node.previousSibling;}else if(offset==node.length){return!!node.nextSibling;}else{return true;}}
return offset>0&&offset<node.childNodes.length;}
function splitNodeAt(node,descendantNode,descendantOffset,container){var newNode;if(rangy.dom.isCharacterDataNode(descendantNode)){if(descendantOffset==0){descendantOffset=rangy.dom.getNodeIndex(descendantNode);descendantNode=descendantNode.parentNode;}else if(descendantOffset==descendantNode.length){descendantOffset=rangy.dom.getNodeIndex(descendantNode)+1;descendantNode=descendantNode.parentNode;}else{newNode=rangy.dom.splitDataNode(descendantNode,descendantOffset);}}
if(!newNode){if(!container||descendantNode!==container){newNode=descendantNode.cloneNode(false);if(newNode.id){newNode.removeAttribute("id");}
var child;while((child=descendantNode.childNodes[descendantOffset])){newNode.appendChild(child);}
rangy.dom.insertAfter(newNode,descendantNode);}}
return(descendantNode==node)?newNode:splitNodeAt(node,newNode.parentNode,rangy.dom.getNodeIndex(newNode),container);}
function Merge(firstNode){this.isElementMerge=(firstNode.nodeType==wysihtml5.ELEMENT_NODE);this.firstTextNode=this.isElementMerge?firstNode.lastChild:firstNode;this.textNodes=[this.firstTextNode];}
Merge.prototype={doMerge:function(){var textBits=[],textNode,parent,text;for(var i=0,len=this.textNodes.length;i<len;++i){textNode=this.textNodes[i];parent=textNode.parentNode;textBits[i]=textNode.data;if(i){parent.removeChild(textNode);if(!parent.hasChildNodes()){parent.parentNode.removeChild(parent);}}}
this.firstTextNode.data=text=textBits.join("");return text;},getLength:function(){var i=this.textNodes.length,len=0;while(i--){len+=this.textNodes[i].length;}
return len;},toString:function(){var textBits=[];for(var i=0,len=this.textNodes.length;i<len;++i){textBits[i]="'"+this.textNodes[i].data+"'";}
return"[Merge("+textBits.join(",")+")]";}};function HTMLApplier(tagNames,cssClass,similarClassRegExp,normalize,cssStyle,similarStyleRegExp,container){this.tagNames=tagNames||[defaultTagName];this.cssClass=cssClass||((cssClass===false)?false:"");this.similarClassRegExp=similarClassRegExp;this.cssStyle=cssStyle||"";this.similarStyleRegExp=similarStyleRegExp;this.normalize=normalize;this.applyToAnyTagName=false;this.container=container;}
HTMLApplier.prototype={getAncestorWithClass:function(node){var cssClassMatch;while(node){cssClassMatch=this.cssClass?hasClass(node,this.cssClass,this.similarClassRegExp):(this.cssStyle!=="")?false:true;if(node.nodeType==wysihtml5.ELEMENT_NODE&&node.getAttribute("contenteditable")!="false"&&rangy.dom.arrayContains(this.tagNames,node.tagName.toLowerCase())&&cssClassMatch){return node;}
node=node.parentNode;}
return false;},getAncestorWithStyle:function(node){var cssStyleMatch;while(node){cssStyleMatch=this.cssStyle?hasStyleAttr(node,this.similarStyleRegExp):false;if(node.nodeType==wysihtml5.ELEMENT_NODE&&node.getAttribute("contenteditable")!="false"&&rangy.dom.arrayContains(this.tagNames,node.tagName.toLowerCase())&&cssStyleMatch){return node;}
node=node.parentNode;}
return false;},postApply:function(textNodes,range){var firstNode=textNodes[0],lastNode=textNodes[textNodes.length-1];var merges=[],currentMerge;var rangeStartNode=firstNode,rangeEndNode=lastNode;var rangeStartOffset=0,rangeEndOffset=lastNode.length;var textNode,precedingTextNode;for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];precedingTextNode=null;if(textNode&&textNode.parentNode){precedingTextNode=this.getAdjacentMergeableTextNode(textNode.parentNode,false);}
if(precedingTextNode){if(!currentMerge){currentMerge=new Merge(precedingTextNode);merges.push(currentMerge);}
currentMerge.textNodes.push(textNode);if(textNode===firstNode){rangeStartNode=currentMerge.firstTextNode;rangeStartOffset=rangeStartNode.length;}
if(textNode===lastNode){rangeEndNode=currentMerge.firstTextNode;rangeEndOffset=currentMerge.getLength();}}else{currentMerge=null;}}
if(lastNode&&lastNode.parentNode){var nextTextNode=this.getAdjacentMergeableTextNode(lastNode.parentNode,true);if(nextTextNode){if(!currentMerge){currentMerge=new Merge(lastNode);merges.push(currentMerge);}
currentMerge.textNodes.push(nextTextNode);}}
if(merges.length){for(i=0,len=merges.length;i<len;++i){merges[i].doMerge();}
range.setStart(rangeStartNode,rangeStartOffset);range.setEnd(rangeEndNode,rangeEndOffset);}},getAdjacentMergeableTextNode:function(node,forward){var isTextNode=(node.nodeType==wysihtml5.TEXT_NODE);var el=isTextNode?node.parentNode:node;var adjacentNode;var propName=forward?"nextSibling":"previousSibling";if(isTextNode){adjacentNode=node[propName];if(adjacentNode&&adjacentNode.nodeType==wysihtml5.TEXT_NODE){return adjacentNode;}}else{adjacentNode=el[propName];if(adjacentNode&&this.areElementsMergeable(node,adjacentNode)){return adjacentNode[forward?"firstChild":"lastChild"];}}
return null;},areElementsMergeable:function(el1,el2){return rangy.dom.arrayContains(this.tagNames,(el1.tagName||"").toLowerCase())&&rangy.dom.arrayContains(this.tagNames,(el2.tagName||"").toLowerCase())&&hasSameClasses(el1,el2)&&elementsHaveSameNonClassAttributes(el1,el2);},createContainer:function(doc){var el=doc.createElement(this.tagNames[0]);if(this.cssClass){el.className=this.cssClass;}
if(this.cssStyle){el.setAttribute('style',this.cssStyle);}
return el;},applyToTextNode:function(textNode){var parent=textNode.parentNode;if(parent.childNodes.length==1&&rangy.dom.arrayContains(this.tagNames,parent.tagName.toLowerCase())){if(this.cssClass){addClass(parent,this.cssClass,this.similarClassRegExp);}
if(this.cssStyle){addStyle(parent,this.cssStyle,this.similarStyleRegExp);}}else{var el=this.createContainer(rangy.dom.getDocument(textNode));textNode.parentNode.insertBefore(el,textNode);el.appendChild(textNode);}},isRemovable:function(el){return rangy.dom.arrayContains(this.tagNames,el.tagName.toLowerCase())&&wysihtml5.lang.string(el.className).trim()===""&&(!el.getAttribute('style')||wysihtml5.lang.string(el.getAttribute('style')).trim()==="");},undoToTextNode:function(textNode,range,ancestorWithClass,ancestorWithStyle){var styleMode=(ancestorWithClass)?false:true,ancestor=ancestorWithClass||ancestorWithStyle,styleChanged=false;if(!range.containsNode(ancestor)){var ancestorRange=range.cloneRange();ancestorRange.selectNode(ancestor);if(ancestorRange.isPointInRange(range.endContainer,range.endOffset)&&isSplitPoint(range.endContainer,range.endOffset)){splitNodeAt(ancestor,range.endContainer,range.endOffset,this.container);range.setEndAfter(ancestor);}
if(ancestorRange.isPointInRange(range.startContainer,range.startOffset)&&isSplitPoint(range.startContainer,range.startOffset)){ancestor=splitNodeAt(ancestor,range.startContainer,range.startOffset,this.container);}}
if(!styleMode&&this.similarClassRegExp){removeClass(ancestor,this.similarClassRegExp);}
if(styleMode&&this.similarStyleRegExp){styleChanged=(removeOrChangeStyle(ancestor,this.cssStyle,this.similarStyleRegExp)==="change");}
if(this.isRemovable(ancestor)&&!styleChanged){replaceWithOwnChildren(ancestor);}},applyToRange:function(range){var textNodes;for(var ri=range.length;ri--;){textNodes=range[ri].getNodes([wysihtml5.TEXT_NODE]);if(!textNodes.length){try{var node=this.createContainer(range[ri].endContainer.ownerDocument);range[ri].surroundContents(node);this.selectNode(range[ri],node);return;}catch(e){}}
range[ri].splitBoundaries();textNodes=range[ri].getNodes([wysihtml5.TEXT_NODE]);if(textNodes.length){var textNode;for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];if(!this.getAncestorWithClass(textNode)){this.applyToTextNode(textNode);}
if(!this.getAncestorWithStyle(textNode)){this.applyToTextNode(textNode);}}
range[ri].setStart(textNodes[0],0);textNode=textNodes[textNodes.length-1];range[ri].setEnd(textNode,textNode.length);if(this.normalize){this.postApply(textNodes,range[ri]);}}}},undoToRange:function(range){var textNodes,textNode,ancestorWithClass,ancestorWithStyle;for(var ri=range.length;ri--;){textNodes=range[ri].getNodes([wysihtml5.TEXT_NODE]);if(textNodes.length){range[ri].splitBoundaries();textNodes=range[ri].getNodes([wysihtml5.TEXT_NODE]);}else{var doc=range[ri].endContainer.ownerDocument,node=doc.createTextNode(wysihtml5.INVISIBLE_SPACE);range[ri].insertNode(node);range[ri].selectNode(node);textNodes=[node];}
for(var i=0,len=textNodes.length;i<len;++i){if(range[ri].isValid()){textNode=textNodes[i];ancestorWithClass=this.getAncestorWithClass(textNode);ancestorWithStyle=this.getAncestorWithStyle(textNode);if(ancestorWithClass){this.undoToTextNode(textNode,range[ri],ancestorWithClass);}else if(ancestorWithStyle){this.undoToTextNode(textNode,range[ri],false,ancestorWithStyle);}}}
if(len==1){this.selectNode(range[ri],textNodes[0]);}else{range[ri].setStart(textNodes[0],0);textNode=textNodes[textNodes.length-1];range[ri].setEnd(textNode,textNode.length);if(this.normalize){this.postApply(textNodes,range[ri]);}}}},selectNode:function(range,node){var isElement=node.nodeType===wysihtml5.ELEMENT_NODE,canHaveHTML="canHaveHTML"in node?node.canHaveHTML:true,content=isElement?node.innerHTML:node.data,isEmpty=(content===""||content===wysihtml5.INVISIBLE_SPACE);if(isEmpty&&isElement&&canHaveHTML){try{node.innerHTML=wysihtml5.INVISIBLE_SPACE;}catch(e){}}
range.selectNodeContents(node);if(isEmpty&&isElement){range.collapse(false);}else if(isEmpty){range.setStartAfter(node);range.setEndAfter(node);}},getTextSelectedByRange:function(textNode,range){var textRange=range.cloneRange();textRange.selectNodeContents(textNode);var intersectionRange=textRange.intersection(range);var text=intersectionRange?intersectionRange.toString():"";textRange.detach();return text;},isAppliedToRange:function(range){var ancestors=[],ancestor,styleAncestor,textNodes;for(var ri=range.length;ri--;){textNodes=range[ri].getNodes([wysihtml5.TEXT_NODE]);if(!textNodes.length){ancestor=this.getAncestorWithClass(range[ri].startContainer);if(!ancestor){ancestor=this.getAncestorWithStyle(range[ri].startContainer);}
return ancestor?[ancestor]:false;}
for(var i=0,len=textNodes.length,selectedText;i<len;++i){selectedText=this.getTextSelectedByRange(textNodes[i],range[ri]);ancestor=this.getAncestorWithClass(textNodes[i]);if(!ancestor){ancestor=this.getAncestorWithStyle(textNodes[i]);}
if(ancestor&&selectedText!=""){ancestors.push(ancestor);}}}
return(ancestors.length)?ancestors:false;},toggleRange:function(range){if(this.isAppliedToRange(range)){this.undoToRange(range);}else{this.applyToRange(range);}}};wysihtml5.selection.HTMLApplier=HTMLApplier;})(wysihtml5,rangy);;wysihtml5.Commands=Base.extend({constructor:function(editor){this.editor=editor;this.composer=editor.composer;this.doc=this.composer.doc;},support:function(command){return wysihtml5.browser.supportsCommand(this.doc,command);},exec:function(command,value){var obj=wysihtml5.commands[command],args=wysihtml5.lang.array(arguments).get(),method=obj&&obj.exec,result=null;this.editor.fire("beforecommand:composer");if(method){args.unshift(this.composer);result=method.apply(obj,args);}else{try{result=this.doc.execCommand(command,false,value);}catch(e){}}
this.editor.fire("aftercommand:composer");return result;},state:function(command,commandValue){var obj=wysihtml5.commands[command],args=wysihtml5.lang.array(arguments).get(),method=obj&&obj.state;if(method){args.unshift(this.composer);return method.apply(obj,args);}else{try{return this.doc.queryCommandState(command);}catch(e){return false;}}},stateValue:function(command){var obj=wysihtml5.commands[command],args=wysihtml5.lang.array(arguments).get(),method=obj&&obj.stateValue;if(method){args.unshift(this.composer);return method.apply(obj,args);}else{return false;}}});;wysihtml5.commands.bold={exec:function(composer,command){wysihtml5.commands.formatInline.execWithToggle(composer,command,"b");},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"b");}};;(function(wysihtml5){var undef,NODE_NAME="A",dom=wysihtml5.dom;function _format(composer,attributes){var doc=composer.doc,tempClass="_wysihtml5-temp-"+(+new Date()),tempClassRegExp=/non-matching-class/g,i=0,length,anchors,anchor,hasElementChild,isEmpty,elementToSetCaretAfter,textContent,whiteSpace,j;wysihtml5.commands.formatInline.exec(composer,undef,NODE_NAME,tempClass,tempClassRegExp,undef,undef,true,true);anchors=doc.querySelectorAll(NODE_NAME+"."+tempClass);length=anchors.length;for(;i<length;i++){anchor=anchors[i];anchor.removeAttribute("class");for(j in attributes){if(j!=="text"){anchor.setAttribute(j,attributes[j]);}}}
elementToSetCaretAfter=anchor;if(length===1){textContent=dom.getTextContent(anchor);hasElementChild=!!anchor.querySelector("*");isEmpty=textContent===""||textContent===wysihtml5.INVISIBLE_SPACE;if(!hasElementChild&&isEmpty){dom.setTextContent(anchor,attributes.text||anchor.href);whiteSpace=doc.createTextNode(" ");composer.selection.setAfter(anchor);dom.insert(whiteSpace).after(anchor);elementToSetCaretAfter=whiteSpace;}}
composer.selection.setAfter(elementToSetCaretAfter);}
function _changeLinks(composer,anchors,attributes){var oldAttrs;for(var a=anchors.length;a--;){oldAttrs=anchors[a].attributes;for(var oa=oldAttrs.length;oa--;){anchors[a].removeAttribute(oldAttrs.item(oa).name);}
for(var j in attributes){if(attributes.hasOwnProperty(j)){anchors[a].setAttribute(j,attributes[j]);}}}}
wysihtml5.commands.createLink={exec:function(composer,command,value){var anchors=this.state(composer,command);if(anchors){composer.selection.executeAndRestore(function(){_changeLinks(composer,anchors,value);});}else{value=typeof(value)==="object"?value:{href:value};_format(composer,value);}},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"A");}};})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom;function _removeFormat(composer,anchors){var length=anchors.length,i=0,anchor,codeElement,textContent;for(;i<length;i++){anchor=anchors[i];codeElement=dom.getParentElement(anchor,{nodeName:"code"});textContent=dom.getTextContent(anchor);if(textContent.match(dom.autoLink.URL_REG_EXP)&&!codeElement){codeElement=dom.renameElement(anchor,"code");}else{dom.replaceWithChildNodes(anchor);}}}
wysihtml5.commands.removeLink={exec:function(composer,command){var anchors=this.state(composer,command);if(anchors){composer.selection.executeAndRestore(function(){_removeFormat(composer,anchors);});}},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"A");}};})(wysihtml5);;(function(wysihtml5){var REG_EXP=/wysiwyg-font-size-[0-9a-z\-]+/g;wysihtml5.commands.fontSize={exec:function(composer,command,size){wysihtml5.commands.formatInline.execWithToggle(composer,command,"span","wysiwyg-font-size-"+size,REG_EXP);},state:function(composer,command,size){return wysihtml5.commands.formatInline.state(composer,command,"span","wysiwyg-font-size-"+size,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var REG_EXP=/(\s|^)font-size\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.fontSizeStyle={exec:function(composer,command,size){size=(typeof(size)=="object")?size.size:size;if(!(/^\s*$/).test(size)){wysihtml5.commands.formatInline.execWithToggle(composer,command,"span",false,false,"font-size:"+size,REG_EXP);}},state:function(composer,command,size){return wysihtml5.commands.formatInline.state(composer,command,"span",false,false,"font-size",REG_EXP);},stateValue:function(composer,command){var st=this.state(composer,command),styleStr,fontsizeMatches,val=false;if(st&&wysihtml5.lang.object(st).isArray()){st=st[0];}
if(st){styleStr=st.getAttribute('style');if(styleStr){return wysihtml5.quirks.styleParser.parseFontSize(styleStr);}}
return false;}};})(wysihtml5);;(function(wysihtml5){var REG_EXP=/wysiwyg-color-[0-9a-z]+/g;wysihtml5.commands.foreColor={exec:function(composer,command,color){wysihtml5.commands.formatInline.execWithToggle(composer,command,"span","wysiwyg-color-"+color,REG_EXP);},state:function(composer,command,color){return wysihtml5.commands.formatInline.state(composer,command,"span","wysiwyg-color-"+color,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var REG_EXP=/(\s|^)color\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.foreColorStyle={exec:function(composer,command,color){var colorVals=wysihtml5.quirks.styleParser.parseColor((typeof(color)=="object")?"color:"+color.color:"color:"+color,"color"),colString;if(colorVals){colString="color: rgb("+colorVals[0]+','+colorVals[1]+','+colorVals[2]+');';if(colorVals[3]!==1){colString+="color: rgba("+colorVals[0]+','+colorVals[1]+','+colorVals[2]+','+colorVals[3]+');';}
wysihtml5.commands.formatInline.execWithToggle(composer,command,"span",false,false,colString,REG_EXP);}},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"span",false,false,"color",REG_EXP);},stateValue:function(composer,command,props){var st=this.state(composer,command),colorStr;if(st&&wysihtml5.lang.object(st).isArray()){st=st[0];}
if(st){colorStr=st.getAttribute('style');if(colorStr){if(colorStr){val=wysihtml5.quirks.styleParser.parseColor(colorStr,"color");return wysihtml5.quirks.styleParser.unparseColor(val,props);}}}
return false;}};})(wysihtml5);;(function(wysihtml5){var REG_EXP=/(\s|^)background-color\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.bgColorStyle={exec:function(composer,command,color){var colorVals=wysihtml5.quirks.styleParser.parseColor((typeof(color)=="object")?"background-color:"+color.color:"background-color:"+color,"background-color"),colString;if(colorVals){colString="background-color: rgb("+colorVals[0]+','+colorVals[1]+','+colorVals[2]+');';if(colorVals[3]!==1){colString+="background-color: rgba("+colorVals[0]+','+colorVals[1]+','+colorVals[2]+','+colorVals[3]+');';}
wysihtml5.commands.formatInline.execWithToggle(composer,command,"span",false,false,colString,REG_EXP);}},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"span",false,false,"background-color",REG_EXP);},stateValue:function(composer,command,props){var st=this.state(composer,command),colorStr,val=false;if(st&&wysihtml5.lang.object(st).isArray()){st=st[0];}
if(st){colorStr=st.getAttribute('style');if(colorStr){val=wysihtml5.quirks.styleParser.parseColor(colorStr,"background-color");return wysihtml5.quirks.styleParser.unparseColor(val,props);}}
return false;}};})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,BLOCK_ELEMENTS_GROUP=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];function _addClass(element,className,classRegExp){if(element.className){_removeClass(element,classRegExp);element.className=wysihtml5.lang.string(element.className+" "+className).trim();}else{element.className=className;}}
function _addStyle(element,cssStyle,styleRegExp){_removeStyle(element,styleRegExp);if(element.getAttribute('style')){element.setAttribute('style',wysihtml5.lang.string(element.getAttribute('style')+" "+cssStyle).trim());}else{element.setAttribute('style',cssStyle);}}
function _removeClass(element,classRegExp){var ret=classRegExp.test(element.className);element.className=element.className.replace(classRegExp,"");if(wysihtml5.lang.string(element.className).trim()==''){element.removeAttribute('class');}
return ret;}
function _removeStyle(element,styleRegExp){var ret=styleRegExp.test(element.getAttribute('style'));element.setAttribute('style',(element.getAttribute('style')||"").replace(styleRegExp,""));if(wysihtml5.lang.string(element.getAttribute('style')||"").trim()==''){element.removeAttribute('style');}
return ret;}
function _removeLastChildIfLineBreak(node){var lastChild=node.lastChild;if(lastChild&&_isLineBreak(lastChild)){lastChild.parentNode.removeChild(lastChild);}}
function _isLineBreak(node){return node.nodeName==="BR";}
function _execCommand(doc,composer,command,nodeName,className){var ranges=composer.selection.getOwnRanges();for(var i=ranges.length;i--;){composer.selection.getSelection().removeAllRanges();composer.selection.setSelection(ranges[i]);if(className){var eventListener=dom.observe(doc,"DOMNodeInserted",function(event){var target=event.target,displayStyle;if(target.nodeType!==wysihtml5.ELEMENT_NODE){return;}
displayStyle=dom.getStyle("display").from(target);if(displayStyle.substr(0,6)!=="inline"){target.className+=" "+className;}});}
doc.execCommand(command,false,nodeName);if(eventListener){eventListener.stop();}}}
function _selectionWrap(composer,options){if(composer.selection.isCollapsed()){composer.selection.selectLine();}
var surroundedNodes=composer.selection.surround(options);for(var i=0,imax=surroundedNodes.length;i<imax;i++){wysihtml5.dom.lineBreaks(surroundedNodes[i]).remove();_removeLastChildIfLineBreak(surroundedNodes[i]);}}
function _hasClasses(element){return!!wysihtml5.lang.string(element.className).trim();}
function _hasStyles(element){return!!wysihtml5.lang.string(element.getAttribute('style')||'').trim();}
wysihtml5.commands.formatBlock={exec:function(composer,command,nodeName,className,classRegExp,cssStyle,styleRegExp){var doc=composer.doc,blockElements=this.state(composer,command,nodeName,className,classRegExp,cssStyle,styleRegExp),useLineBreaks=composer.config.useLineBreaks,defaultNodeName=useLineBreaks?"DIV":"P",selectedNodes,classRemoveAction,blockRenameFound,styleRemoveAction;nodeName=typeof(nodeName)==="string"?nodeName.toUpperCase():nodeName;if(blockElements.length){composer.selection.executeAndRestoreRangy(function(){for(var b=blockElements.length;b--;){if(classRegExp){classRemoveAction=_removeClass(blockElements[b],classRegExp);}
if(styleRegExp){styleRemoveAction=_removeStyle(blockElements[b],styleRegExp);}
if((styleRemoveAction||classRemoveAction)&&nodeName===null&&blockElements[b].nodeName!=defaultNodeName){return;}
var hasClasses=_hasClasses(blockElements[b]),hasStyles=_hasStyles(blockElements[b]);if(!hasClasses&&!hasStyles&&(useLineBreaks||nodeName==="P")){wysihtml5.dom.lineBreaks(blockElements[b]).add();dom.replaceWithChildNodes(blockElements[b]);}else{dom.renameElement(blockElements[b],nodeName==="P"?"DIV":defaultNodeName);}}});return;}
if(nodeName===null||wysihtml5.lang.array(BLOCK_ELEMENTS_GROUP).contains(nodeName)){selectedNodes=composer.selection.findNodesInSelection(BLOCK_ELEMENTS_GROUP).concat(composer.selection.getSelectedOwnNodes());composer.selection.executeAndRestoreRangy(function(){for(var n=selectedNodes.length;n--;){blockElement=dom.getParentElement(selectedNodes[n],{nodeName:BLOCK_ELEMENTS_GROUP});if(blockElement==composer.element){blockElement=null;}
if(blockElement){if(nodeName){blockElement=dom.renameElement(blockElement,nodeName);}
if(className){_addClass(blockElement,className,classRegExp);}
if(cssStyle){_addStyle(blockElement,cssStyle,styleRegExp);}
blockRenameFound=true;}}});if(blockRenameFound){return;}}
_selectionWrap(composer,{"nodeName":(nodeName||defaultNodeName),"className":className||null,"cssStyle":cssStyle||null});},state:function(composer,command,nodeName,className,classRegExp,cssStyle,styleRegExp){var nodes=composer.selection.getSelectedOwnNodes(),parents=[],parent;nodeName=typeof(nodeName)==="string"?nodeName.toUpperCase():nodeName;for(var i=0,maxi=nodes.length;i<maxi;i++){parent=dom.getParentElement(nodes[i],{nodeName:nodeName,className:className,classRegExp:classRegExp,cssStyle:cssStyle,styleRegExp:styleRegExp});if(parent&&wysihtml5.lang.array(parents).indexOf(parent)==-1){parents.push(parent);}}
if(parents.length==0){return false;}
return parents;}};})(wysihtml5);;wysihtml5.commands.formatCode={exec:function(composer,command,classname){var pre=this.state(composer),code,range,selectedNodes;if(pre){composer.selection.executeAndRestore(function(){code=pre.querySelector("code");wysihtml5.dom.replaceWithChildNodes(pre);if(code){wysihtml5.dom.replaceWithChildNodes(code);}});}else{range=composer.selection.getRange();selectedNodes=range.extractContents();pre=composer.doc.createElement("pre");code=composer.doc.createElement("code");if(classname){code.className=classname;}
pre.appendChild(code);code.appendChild(selectedNodes);range.insertNode(pre);composer.selection.selectNode(pre);}},state:function(composer){var selectedNode=composer.selection.getSelectedNode();if(selectedNode&&selectedNode.nodeName&&selectedNode.nodeName=="PRE"&&selectedNode.firstChild&&selectedNode.firstChild.nodeName&&selectedNode.firstChild.nodeName=="CODE"){return selectedNode;}else{return wysihtml5.dom.getParentElement(selectedNode,{nodeName:"CODE"})&&wysihtml5.dom.getParentElement(selectedNode,{nodeName:"PRE"});}}};;(function(wysihtml5){var
ALIAS_MAPPING={"strong":"b","em":"i","b":"strong","i":"em"},htmlApplier={};function _getTagNames(tagName){var alias=ALIAS_MAPPING[tagName];return alias?[tagName.toLowerCase(),alias.toLowerCase()]:[tagName.toLowerCase()];}
function _getApplier(tagName,className,classRegExp,cssStyle,styleRegExp,container){var identifier=tagName;if(className){identifier+=":"+className;}
if(cssStyle){identifier+=":"+cssStyle;}
if(!htmlApplier[identifier]){htmlApplier[identifier]=new wysihtml5.selection.HTMLApplier(_getTagNames(tagName),className,classRegExp,true,cssStyle,styleRegExp,container);}
return htmlApplier[identifier];}
wysihtml5.commands.formatInline={exec:function(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp,dontRestoreSelect,noCleanup){var range=composer.selection.createRange();ownRanges=composer.selection.getOwnRanges();if(!ownRanges||ownRanges.length==0){return false;}
composer.selection.getSelection().removeAllRanges();_getApplier(tagName,className,classRegExp,cssStyle,styleRegExp,composer.element).toggleRange(ownRanges);if(!dontRestoreSelect){range.setStart(ownRanges[0].startContainer,ownRanges[0].startOffset);range.setEnd(ownRanges[ownRanges.length-1].endContainer,ownRanges[ownRanges.length-1].endOffset);composer.selection.setSelection(range);composer.selection.executeAndRestore(function(){if(!noCleanup){composer.cleanUp();}},true,true);}else if(!noCleanup){composer.cleanUp();}},execWithToggle:function(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp){var that=this;if(this.state(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp)&&composer.selection.isCollapsed()&&!composer.selection.caretIsLastInSelection()&&!composer.selection.caretIsFirstInSelection()){var state_element=that.state(composer,command,tagName,className,classRegExp)[0];composer.selection.executeAndRestoreRangy(function(){var parent=state_element.parentNode;composer.selection.selectNode(state_element,true);wysihtml5.commands.formatInline.exec(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp,true,true);});}else{if(this.state(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp)&&!composer.selection.isCollapsed()){composer.selection.executeAndRestoreRangy(function(){wysihtml5.commands.formatInline.exec(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp,true,true);});}else{wysihtml5.commands.formatInline.exec(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp);}}},state:function(composer,command,tagName,className,classRegExp,cssStyle,styleRegExp){var doc=composer.doc,aliasTagName=ALIAS_MAPPING[tagName]||tagName,ownRanges;if(!wysihtml5.dom.hasElementWithTagName(doc,tagName)&&!wysihtml5.dom.hasElementWithTagName(doc,aliasTagName)){return false;}
if(className&&!wysihtml5.dom.hasElementWithClassName(doc,className)){return false;}
ownRanges=composer.selection.getOwnRanges();if(!ownRanges||ownRanges.length===0){return false;}
return _getApplier(tagName,className,classRegExp,cssStyle,styleRegExp,composer.element).isAppliedToRange(ownRanges);}};})(wysihtml5);;(function(wysihtml5){wysihtml5.commands.insertBlockQuote={exec:function(composer,command){var state=this.state(composer,command),endToEndParent=composer.selection.isEndToEndInNode(['H1','H2','H3','H4','H5','H6','P']),prevNode,nextNode;composer.selection.executeAndRestore(function(){if(state){if(composer.config.useLineBreaks){wysihtml5.dom.lineBreaks(state).add();}
wysihtml5.dom.unwrap(state);}else{if(composer.selection.isCollapsed()){composer.selection.selectLine();}
if(endToEndParent){var qouteEl=endToEndParent.ownerDocument.createElement('blockquote');wysihtml5.dom.insert(qouteEl).after(endToEndParent);qouteEl.appendChild(endToEndParent);}else{composer.selection.surround({nodeName:"blockquote"});}}});},state:function(composer,command){var selectedNode=composer.selection.getSelectedNode(),node=wysihtml5.dom.getParentElement(selectedNode,{nodeName:"BLOCKQUOTE"},false,composer.element);return(node)?node:false;}};})(wysihtml5);;wysihtml5.commands.insertHTML={exec:function(composer,command,html){if(composer.commands.support(command)){composer.doc.execCommand(command,false,html);}else{composer.selection.insertHTML(html);}},state:function(){return false;}};;(function(wysihtml5){var NODE_NAME="IMG";wysihtml5.commands.insertImage={exec:function(composer,command,value){value=typeof(value)==="object"?value:{src:value};var doc=composer.doc,image=this.state(composer),textNode,parent;if(image){composer.selection.setBefore(image);parent=image.parentNode;parent.removeChild(image);wysihtml5.dom.removeEmptyTextNodes(parent);if(parent.nodeName==="A"&&!parent.firstChild){composer.selection.setAfter(parent);parent.parentNode.removeChild(parent);}
wysihtml5.quirks.redraw(composer.element);return;}
image=doc.createElement(NODE_NAME);for(var i in value){image.setAttribute(i==="className"?"class":i,value[i]);}
composer.selection.insertNode(image);if(wysihtml5.browser.hasProblemsSettingCaretAfterImg()){textNode=doc.createTextNode(wysihtml5.INVISIBLE_SPACE);composer.selection.insertNode(textNode);composer.selection.setAfter(textNode);}else{composer.selection.setAfter(image);}},state:function(composer){var doc=composer.doc,selectedNode,text,imagesInSelection;if(!wysihtml5.dom.hasElementWithTagName(doc,NODE_NAME)){return false;}
selectedNode=composer.selection.getSelectedNode();if(!selectedNode){return false;}
if(selectedNode.nodeName===NODE_NAME){return selectedNode;}
if(selectedNode.nodeType!==wysihtml5.ELEMENT_NODE){return false;}
text=composer.selection.getText();text=wysihtml5.lang.string(text).trim();if(text){return false;}
imagesInSelection=composer.selection.getNodes(wysihtml5.ELEMENT_NODE,function(node){return node.nodeName==="IMG";});if(imagesInSelection.length!==1){return false;}
return imagesInSelection[0];}};})(wysihtml5);;(function(wysihtml5){var LINE_BREAK="<br>"+(wysihtml5.browser.needsSpaceAfterLineBreak()?" ":"");wysihtml5.commands.insertLineBreak={exec:function(composer,command){if(composer.commands.support(command)){composer.doc.execCommand(command,false,null);if(!wysihtml5.browser.autoScrollsToCaret()){composer.selection.scrollIntoView();}}else{composer.commands.exec("insertHTML",LINE_BREAK);}},state:function(){return false;}};})(wysihtml5);;wysihtml5.commands.insertOrderedList={exec:function(composer,command){wysihtml5.commands.insertList.exec(composer,command,"OL");},state:function(composer,command){return wysihtml5.commands.insertList.state(composer,command,"OL");}};;wysihtml5.commands.insertUnorderedList={exec:function(composer,command){wysihtml5.commands.insertList.exec(composer,command,"UL");},state:function(composer,command){return wysihtml5.commands.insertList.state(composer,command,"UL");}};;wysihtml5.commands.insertList=(function(){var isNode=function(node,name){if(node&&node.nodeName){if(typeof name==='string'){name=[name];}
for(var n=name.length;n--;){if(node.nodeName===name[n]){return true;}}}
return false;};var findListEl=function(node,nodeName,composer){var ret={el:null,other:false};if(node){var parentLi=wysihtml5.dom.getParentElement(node,{nodeName:"LI"});otherNodeName=(nodeName==="UL")?"OL":"UL";if(isNode(node,nodeName)){ret.el=node;}else if(isNode(node,otherNodeName)){ret={el:node,other:true};}else if(parentLi){if(isNode(parentLi.parentNode,nodeName)){ret.el=parentLi.parentNode;}else if(isNode(parentLi.parentNode,otherNodeName)){ret={el:parentLi.parentNode,other:true};}}}
if(ret.el&&!composer.element.contains(ret.el)){ret.el=null;}
return ret;};var handleSameTypeList=function(el,nodeName,composer){var otherNodeName=(nodeName==="UL")?"OL":"UL",otherLists,innerLists;composer.selection.executeAndRestore(function(){var otherLists=getListsInSelection(otherNodeName,composer);if(otherLists.length){for(var l=otherLists.length;l--;){wysihtml5.dom.renameElement(otherLists[l],nodeName.toLowerCase());}}else{innerLists=getListsInSelection(['OL','UL'],composer);for(var i=innerLists.length;i--;){wysihtml5.dom.resolveList(innerLists[i],composer.config.useLineBreaks);}
wysihtml5.dom.resolveList(el,composer.config.useLineBreaks);}});};var handleOtherTypeList=function(el,nodeName,composer){var otherNodeName=(nodeName==="UL")?"OL":"UL";composer.selection.executeAndRestore(function(){var renameLists=[el].concat(getListsInSelection(otherNodeName,composer));for(var l=renameLists.length;l--;){wysihtml5.dom.renameElement(renameLists[l],nodeName.toLowerCase());}});};var getListsInSelection=function(nodeName,composer){var ranges=composer.selection.getOwnRanges(),renameLists=[];for(var r=ranges.length;r--;){renameLists=renameLists.concat(ranges[r].getNodes([1],function(node){return isNode(node,nodeName);}));}
return renameLists;};var createListFallback=function(nodeName,composer){composer.selection.executeAndRestoreRangy(function(){var tempClassName="_wysihtml5-temp-"+new Date().getTime(),tempElement=composer.selection.deblockAndSurround({"nodeName":"div","className":tempClassName}),isEmpty,list;var INVISIBLE_SPACE_REG_EXP=/\uFEFF/g;tempElement.innerHTML=tempElement.innerHTML.replace(INVISIBLE_SPACE_REG_EXP,"");if(tempElement){isEmpty=wysihtml5.lang.array(["","<br>",wysihtml5.INVISIBLE_SPACE]).contains(tempElement.innerHTML);list=wysihtml5.dom.convertToList(tempElement,nodeName.toLowerCase(),composer.parent.config.uneditableContainerClassname);if(isEmpty){composer.selection.selectNode(list.querySelector("li"),true);}}});};return{exec:function(composer,command,nodeName){var doc=composer.doc,cmd=(nodeName==="OL")?"insertorderedlist":"insertunorderedlist",selectedNode=composer.selection.getSelectedNode(),list=findListEl(selectedNode,nodeName,composer);if(!list.el)Â {if(composer.commands.support(cmd)){doc.execCommand(cmd,false,null);}else{createListFallback(nodeName,composer);}}else if(list.other){handleOtherTypeList(list.el,nodeName,composer);}else{handleSameTypeList(list.el,nodeName,composer);}},state:function(composer,command,nodeName){var selectedNode=composer.selection.getSelectedNode(),list=findListEl(selectedNode,nodeName,composer);return(list.el&&!list.other)?list.el:false;}};})();;wysihtml5.commands.italic={exec:function(composer,command){wysihtml5.commands.formatInline.execWithToggle(composer,command,"i");},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"i");}};;(function(wysihtml5){var CLASS_NAME="wysiwyg-text-align-center",REG_EXP=/wysiwyg-text-align-[0-9a-z]+/g;wysihtml5.commands.justifyCenter={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,CLASS_NAME,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,CLASS_NAME,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var CLASS_NAME="wysiwyg-text-align-left",REG_EXP=/wysiwyg-text-align-[0-9a-z]+/g;wysihtml5.commands.justifyLeft={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,CLASS_NAME,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,CLASS_NAME,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var CLASS_NAME="wysiwyg-text-align-right",REG_EXP=/wysiwyg-text-align-[0-9a-z]+/g;wysihtml5.commands.justifyRight={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,CLASS_NAME,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,CLASS_NAME,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var CLASS_NAME="wysiwyg-text-align-justify",REG_EXP=/wysiwyg-text-align-[0-9a-z]+/g;wysihtml5.commands.justifyFull={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,CLASS_NAME,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,CLASS_NAME,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var STYLE_STR="text-align: right;",REG_EXP=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.alignRightStyle={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var STYLE_STR="text-align: left;",REG_EXP=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.alignLeftStyle={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);}};})(wysihtml5);;(function(wysihtml5){var STYLE_STR="text-align: center;",REG_EXP=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;wysihtml5.commands.alignCenterStyle={exec:function(composer,command){return wysihtml5.commands.formatBlock.exec(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);},state:function(composer,command){return wysihtml5.commands.formatBlock.state(composer,"formatBlock",null,null,null,STYLE_STR,REG_EXP);}};})(wysihtml5);;wysihtml5.commands.redo={exec:function(composer){return composer.undoManager.redo();},state:function(composer){return false;}};;wysihtml5.commands.underline={exec:function(composer,command){wysihtml5.commands.formatInline.execWithToggle(composer,command,"u");},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"u");}};;wysihtml5.commands.undo={exec:function(composer){return composer.undoManager.undo();},state:function(composer){return false;}};;wysihtml5.commands.createTable={exec:function(composer,command,value){var col,row,html;if(value&&value.cols&&value.rows&&parseInt(value.cols,10)>0&&parseInt(value.rows,10)>0){if(value.tableStyle){html="<table style=\""+value.tableStyle+"\">";}else{html="<table>";}
html+="<tbody>";for(row=0;row<value.rows;row++){html+='<tr>';for(col=0;col<value.cols;col++){html+="<td>&nbsp;</td>";}
html+='</tr>';}
html+="</tbody></table>";composer.commands.exec("insertHTML",html);}},state:function(composer,command){return false;}};;wysihtml5.commands.mergeTableCells={exec:function(composer,command){if(composer.tableSelection&&composer.tableSelection.start&&composer.tableSelection.end){if(this.state(composer,command)){wysihtml5.dom.table.unmergeCell(composer.tableSelection.start);}else{wysihtml5.dom.table.mergeCellsBetween(composer.tableSelection.start,composer.tableSelection.end);}}},state:function(composer,command){if(composer.tableSelection){var start=composer.tableSelection.start,end=composer.tableSelection.end;if(start&&end&&start==end&&((wysihtml5.dom.getAttribute(start,"colspan")&&parseInt(wysihtml5.dom.getAttribute(start,"colspan"),10)>1)||(wysihtml5.dom.getAttribute(start,"rowspan")&&parseInt(wysihtml5.dom.getAttribute(start,"rowspan"),10)>1))){return[start];}}
return false;}};;wysihtml5.commands.addTableCells={exec:function(composer,command,value){if(composer.tableSelection&&composer.tableSelection.start&&composer.tableSelection.end){var tableSelect=wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start,composer.tableSelection.end);if(value=="before"||value=="above"){wysihtml5.dom.table.addCells(tableSelect.start,value);}else if(value=="after"||value=="below"){wysihtml5.dom.table.addCells(tableSelect.end,value);}
setTimeout(function(){composer.tableSelection.select(tableSelect.start,tableSelect.end);},0);}},state:function(composer,command){return false;}};;wysihtml5.commands.deleteTableCells={exec:function(composer,command,value){if(composer.tableSelection&&composer.tableSelection.start&&composer.tableSelection.end){var tableSelect=wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start,composer.tableSelection.end),idx=wysihtml5.dom.table.indexOf(tableSelect.start),selCell,table=composer.tableSelection.table;wysihtml5.dom.table.removeCells(tableSelect.start,value);setTimeout(function(){selCell=wysihtml5.dom.table.findCell(table,idx);if(!selCell){if(value=="row"){selCell=wysihtml5.dom.table.findCell(table,{"row":idx.row-1,"col":idx.col});}
if(value=="column"){selCell=wysihtml5.dom.table.findCell(table,{"row":idx.row,"col":idx.col-1});}}
if(selCell){composer.tableSelection.select(selCell,selCell);}},0);}},state:function(composer,command){return false;}};;wysihtml5.commands.indentList={exec:function(composer,command,value){var listEls=composer.selection.getSelectionParentsByTag('LI');if(listEls){return this.tryToPushLiLevel(listEls,composer.selection);}
return false;},state:function(composer,command){return false;},tryToPushLiLevel:function(liNodes,selection){var listTag,list,prevLi,liNode,prevLiList,found=false;selection.executeAndRestoreRangy(function(){for(var i=liNodes.length;i--;){liNode=liNodes[i];listTag=(liNode.parentNode.nodeName==='OL')?'OL':'UL';list=liNode.ownerDocument.createElement(listTag);prevLi=wysihtml5.dom.domNode(liNode).prev({nodeTypes:[wysihtml5.ELEMENT_NODE]});prevLiList=(prevLi)?prevLi.querySelector('ul, ol'):null;if(prevLi){if(prevLiList){prevLiList.appendChild(liNode);}else{list.appendChild(liNode);prevLi.appendChild(list);}
found=true;}}});return found;}};;wysihtml5.commands.outdentList={exec:function(composer,command,value){var listEls=composer.selection.getSelectionParentsByTag('LI');if(listEls){return this.tryToPullLiLevel(listEls,composer);}
return false;},state:function(composer,command){return false;},tryToPullLiLevel:function(liNodes,composer){var listNode,outerListNode,outerLiNode,list,prevLi,liNode,afterList,found=false,that=this;composer.selection.executeAndRestoreRangy(function(){for(var i=liNodes.length;i--;){liNode=liNodes[i];if(liNode.parentNode){listNode=liNode.parentNode;if(listNode.tagName==='OL'||listNode.tagName==='UL'){found=true;outerListNode=wysihtml5.dom.getParentElement(listNode.parentNode,{nodeName:['OL','UL']},false,composer.element);outerLiNode=wysihtml5.dom.getParentElement(listNode.parentNode,{nodeName:['LI']},false,composer.element);if(outerListNode&&outerLiNode){if(liNode.nextSibling){afterList=that.getAfterList(listNode,liNode);liNode.appendChild(afterList);}
outerListNode.insertBefore(liNode,outerLiNode.nextSibling);}else{if(liNode.nextSibling){afterList=that.getAfterList(listNode,liNode);liNode.appendChild(afterList);}
for(var j=liNode.childNodes.length;j--;){listNode.parentNode.insertBefore(liNode.childNodes[j],listNode.nextSibling);}
listNode.parentNode.insertBefore(document.createElement('br'),listNode.nextSibling);liNode.parentNode.removeChild(liNode);}
if(listNode.childNodes.length===0){listNode.parentNode.removeChild(listNode);}}}}});return found;},getAfterList:function(listNode,liNode){var nodeName=listNode.nodeName,newList=document.createElement(nodeName);while(liNode.nextSibling){newList.appendChild(liNode.nextSibling);}
return newList;}};;(function(wysihtml5){var Z_KEY=90,Y_KEY=89,BACKSPACE_KEY=8,DELETE_KEY=46,MAX_HISTORY_ENTRIES=25,DATA_ATTR_NODE="data-wysihtml5-selection-node",DATA_ATTR_OFFSET="data-wysihtml5-selection-offset",UNDO_HTML='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+wysihtml5.INVISIBLE_SPACE+'</span>',REDO_HTML='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+wysihtml5.INVISIBLE_SPACE+'</span>',dom=wysihtml5.dom;function cleanTempElements(doc){var tempElement;while(tempElement=doc.querySelector("._wysihtml5-temp")){tempElement.parentNode.removeChild(tempElement);}}
wysihtml5.UndoManager=wysihtml5.lang.Dispatcher.extend({constructor:function(editor){this.editor=editor;this.composer=editor.composer;this.element=this.composer.element;this.position=0;this.historyStr=[];this.historyDom=[];this.transact();this._observe();},_observe:function(){var that=this,doc=this.composer.sandbox.getDocument(),lastKey;dom.observe(this.element,"keydown",function(event){if(event.altKey||(!event.ctrlKey&&!event.metaKey)){return;}
var keyCode=event.keyCode,isUndo=keyCode===Z_KEY&&!event.shiftKey,isRedo=(keyCode===Z_KEY&&event.shiftKey)||(keyCode===Y_KEY);if(isUndo){that.undo();event.preventDefault();}else if(isRedo){that.redo();event.preventDefault();}});dom.observe(this.element,"keydown",function(event){var keyCode=event.keyCode;if(keyCode===lastKey){return;}
lastKey=keyCode;if(keyCode===BACKSPACE_KEY||keyCode===DELETE_KEY){that.transact();}});this.editor.on("newword:composer",function(){that.transact();}).on("beforecommand:composer",function(){that.transact();});},transact:function(){var previousHtml=this.historyStr[this.position-1],currentHtml=this.composer.getValue();if(currentHtml===previousHtml){return;}
var length=this.historyStr.length=this.historyDom.length=this.position;if(length>MAX_HISTORY_ENTRIES){this.historyStr.shift();this.historyDom.shift();this.position--;}
this.position++;var range=this.composer.selection.getRange(),node=(range&&range.startContainer)?range.startContainer:this.element,offset=(range&&range.startOffset)?range.startOffset:0,element,position;if(node.nodeType===wysihtml5.ELEMENT_NODE){element=node;}else{element=node.parentNode;position=this.getChildNodeIndex(element,node);}
element.setAttribute(DATA_ATTR_OFFSET,offset);if(typeof(position)!=="undefined"){element.setAttribute(DATA_ATTR_NODE,position);}
var clone=this.element.cloneNode(!!currentHtml);this.historyDom.push(clone);this.historyStr.push(currentHtml);element.removeAttribute(DATA_ATTR_OFFSET);element.removeAttribute(DATA_ATTR_NODE);},undo:function(){this.transact();if(!this.undoPossible()){return;}
this.set(this.historyDom[--this.position-1]);this.editor.fire("undo:composer");},redo:function(){if(!this.redoPossible()){return;}
this.set(this.historyDom[++this.position-1]);this.editor.fire("redo:composer");},undoPossible:function(){return this.position>1;},redoPossible:function(){return this.position<this.historyStr.length;},set:function(historyEntry){this.element.innerHTML="";var i=0,childNodes=historyEntry.childNodes,length=historyEntry.childNodes.length;for(;i<length;i++){this.element.appendChild(childNodes[i].cloneNode(true));}
var offset,node,position;if(historyEntry.hasAttribute(DATA_ATTR_OFFSET)){offset=historyEntry.getAttribute(DATA_ATTR_OFFSET);position=historyEntry.getAttribute(DATA_ATTR_NODE);node=this.element;}else{node=this.element.querySelector("["+DATA_ATTR_OFFSET+"]")||this.element;offset=node.getAttribute(DATA_ATTR_OFFSET);position=node.getAttribute(DATA_ATTR_NODE);node.removeAttribute(DATA_ATTR_OFFSET);node.removeAttribute(DATA_ATTR_NODE);}
if(position!==null){node=this.getChildNodeByIndex(node,+position);}
this.composer.selection.set(node,offset);},getChildNodeIndex:function(parent,child){var i=0,childNodes=parent.childNodes,length=childNodes.length;for(;i<length;i++){if(childNodes[i]===child){return i;}}},getChildNodeByIndex:function(parent,index){return parent.childNodes[index];}});})(wysihtml5);;wysihtml5.views.View=Base.extend({constructor:function(parent,textareaElement,config){this.parent=parent;this.element=textareaElement;this.config=config;if(!this.config.noTextarea){this._observeViewChange();}},_observeViewChange:function(){var that=this;this.parent.on("beforeload",function(){that.parent.on("change_view",function(view){if(view===that.name){that.parent.currentView=that;that.show();setTimeout(function(){that.focus();},0);}else{that.hide();}});});},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element){return;}
try{this.element.focus();}catch(e){}},hide:function(){this.element.style.display="none";},show:function(){this.element.style.display="";},disable:function(){this.element.setAttribute("disabled","disabled");},enable:function(){this.element.removeAttribute("disabled");}});;(function(wysihtml5){var dom=wysihtml5.dom,browser=wysihtml5.browser;wysihtml5.views.Composer=wysihtml5.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(parent,editableElement,config){this.base(parent,editableElement,config);if(!this.config.noTextarea){this.textarea=this.parent.textarea;}else{this.editableArea=editableElement;}
if(this.config.contentEditableMode){this._initContentEditableArea();}else{this._initSandbox();}},clear:function(){this.element.innerHTML=browser.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK;},getValue:function(parse){var value=this.isEmpty()?"":wysihtml5.quirks.getCorrectInnerHTML(this.element);if(parse){value=this.parent.parse(value);}
return value;},setValue:function(html,parse){if(parse){html=this.parent.parse(html);}
try{this.element.innerHTML=html;}catch(e){this.element.innerText=html;}},cleanUp:function(){this.parent.parse(this.element);},show:function(){this.editableArea.style.display=this._displayStyle||"";if(!this.config.noTextarea&&!this.textarea.element.disabled){this.disable();this.enable();}},hide:function(){this._displayStyle=dom.getStyle("display").from(this.editableArea);if(this._displayStyle==="none"){this._displayStyle=null;}
this.editableArea.style.display="none";},disable:function(){this.parent.fire("disable:composer");this.element.removeAttribute("contentEditable");},enable:function(){this.parent.fire("enable:composer");this.element.setAttribute("contentEditable","true");},focus:function(setToEnd){if(wysihtml5.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear();}
this.base();var lastChild=this.element.lastChild;if(setToEnd&&lastChild&&this.selection){if(lastChild.nodeName==="BR"){this.selection.setBefore(this.element.lastChild);}else{this.selection.setAfter(this.element.lastChild);}}},getTextContent:function(){return dom.getTextContent(this.element);},hasPlaceholderSet:function(){return this.getTextContent()==((this.config.noTextarea)?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet;},isEmpty:function(){var innerHTML=this.element.innerHTML.toLowerCase();return innerHTML===""||innerHTML==="<br>"||innerHTML==="<p></p>"||innerHTML==="<p><br></p>"||this.hasPlaceholderSet();},_initContentEditableArea:function(){var that=this;if(this.config.noTextarea){this.sandbox=new dom.ContentEditableArea(function(){that._create();},{},this.editableArea);}else{this.sandbox=new dom.ContentEditableArea(function(){that._create();});this.editableArea=this.sandbox.getContentEditable();dom.insert(this.editableArea).after(this.textarea.element);this._createWysiwygFormField();}},_initSandbox:function(){var that=this;this.sandbox=new dom.Sandbox(function(){that._create();},{stylesheets:this.config.stylesheets});this.editableArea=this.sandbox.getIframe();var textareaElement=this.textarea.element;dom.insert(this.editableArea).after(textareaElement);this._createWysiwygFormField();},_createWysiwygFormField:function(){if(this.textarea.element.form){var hiddenField=document.createElement("input");hiddenField.type="hidden";hiddenField.name="_wysihtml5_mode";hiddenField.value=1;dom.insert(hiddenField).after(this.textarea.element);}},_create:function(){var that=this;this.doc=this.sandbox.getDocument();this.element=(this.config.contentEditableMode)?this.sandbox.getContentEditable():this.doc.body;if(!this.config.noTextarea){this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(true);}else{this.cleanUp();}
this.selection=new wysihtml5.Selection(this.parent,this.element,this.config.uneditableContainerClassname);this.commands=new wysihtml5.Commands(this.parent);if(!this.config.noTextarea){dom.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);}
dom.addClass(this.element,this.config.composerClassName);if(this.config.style&&!this.config.contentEditableMode){this.style();}
this.observe();var name=this.config.name;if(name){dom.addClass(this.element,name);if(!this.config.contentEditableMode){dom.addClass(this.editableArea,name);}}
this.enable();if(!this.config.noTextarea&&this.textarea.element.disabled){this.disable();}
var placeholderText=typeof(this.config.placeholder)==="string"?this.config.placeholder:((this.config.noTextarea)?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"));if(placeholderText){dom.simulatePlaceholder(this.parent,this,placeholderText);}
this.commands.exec("styleWithCSS",false);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();this._initLineBreaking();if(!this.config.noTextarea&&(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&!browser.isIos()){setTimeout(function(){that.focus(true);},100);}
if(!browser.clearsContentEditableCorrectly()){wysihtml5.quirks.ensureProperClearing(this);}
if(this.initSync&&this.config.sync){this.initSync();}
if(!this.config.noTextarea){this.textarea.hide();}
this.parent.fire("beforeload").fire("load");},_initAutoLinking:function(){var that=this,supportsDisablingOfAutoLinking=browser.canDisableAutoLinking(),supportsAutoLinking=browser.doesAutoLinkingInContentEditable();if(supportsDisablingOfAutoLinking){this.commands.exec("autoUrlDetect",false);}
if(!this.config.autoLink){return;}
if(!supportsAutoLinking||(supportsAutoLinking&&supportsDisablingOfAutoLinking)){this.parent.on("newword:composer",function(){if(dom.getTextContent(that.element).match(dom.autoLink.URL_REG_EXP)){that.selection.executeAndRestore(function(startContainer,endContainer){var uneditables=that.element.querySelectorAll("."+that.config.uneditableContainerClassname),isInUneditable=false;for(var i=uneditables.length;i--;){if(wysihtml5.dom.contains(uneditables[i],endContainer)){isInUneditable=true;}}
if(!isInUneditable)dom.autoLink(endContainer.parentNode,[that.config.uneditableContainerClassname]);});}});dom.observe(this.element,"blur",function(){dom.autoLink(that.element,[that.config.uneditableContainerClassname]);});}
var
links=this.sandbox.getDocument().getElementsByTagName("a"),urlRegExp=dom.autoLink.URL_REG_EXP,getTextContent=function(element){var textContent=wysihtml5.lang.string(dom.getTextContent(element)).trim();if(textContent.substr(0,4)==="www."){textContent="http://"+textContent;}
return textContent;};dom.observe(this.element,"keydown",function(event){if(!links.length){return;}
var selectedNode=that.selection.getSelectedNode(event.target.ownerDocument),link=dom.getParentElement(selectedNode,{nodeName:"A"},4),textContent;if(!link){return;}
textContent=getTextContent(link);setTimeout(function(){var newTextContent=getTextContent(link);if(newTextContent===textContent){return;}
if(newTextContent.match(urlRegExp)){link.setAttribute("href",newTextContent);}},0);});},_initObjectResizing:function(){this.commands.exec("enableObjectResizing",true);if(browser.supportsEvent("resizeend")){var properties=["width","height"],propertiesLength=properties.length,element=this.element;dom.observe(element,"resizeend",function(event){var target=event.target||event.srcElement,style=target.style,i=0,property;if(target.nodeName!=="IMG"){return;}
for(;i<propertiesLength;i++){property=properties[i];if(style[property]){target.setAttribute(property,parseInt(style[property],10));style[property]="";}}
wysihtml5.quirks.redraw(element);});}},_initUndoManager:function(){this.undoManager=new wysihtml5.UndoManager(this.parent);},_initLineBreaking:function(){var that=this,USE_NATIVE_LINE_BREAK_INSIDE_TAGS=["LI","P","H1","H2","H3","H4","H5","H6"],LIST_TAGS=["UL","OL","MENU"];function adjust(selectedNode){var parentElement=dom.getParentElement(selectedNode,{nodeName:["P","DIV"]},2);if(parentElement&&dom.contains(that.element,parentElement)){that.selection.executeAndRestore(function(){if(that.config.useLineBreaks){dom.replaceWithChildNodes(parentElement);}else if(parentElement.nodeName!=="P"){dom.renameElement(parentElement,"p");}});}}
if(!this.config.useLineBreaks){dom.observe(this.element,["focus","keydown"],function(){if(that.isEmpty()){var paragraph=that.doc.createElement("P");that.element.innerHTML="";that.element.appendChild(paragraph);if(!browser.displaysCaretInEmptyContentEditableCorrectly()){paragraph.innerHTML="<br>";that.selection.setBefore(paragraph.firstChild);}else{that.selection.selectNode(paragraph,true);}}});}
dom.observe(this.element,"keydown",function(event){var keyCode=event.keyCode;if(event.shiftKey){return;}
if(keyCode!==wysihtml5.ENTER_KEY&&keyCode!==wysihtml5.BACKSPACE_KEY){return;}
var blockElement=dom.getParentElement(that.selection.getSelectedNode(),{nodeName:USE_NATIVE_LINE_BREAK_INSIDE_TAGS},4);if(blockElement){setTimeout(function(){var selectedNode=that.selection.getSelectedNode(),list;if(blockElement.nodeName==="LI"){if(!selectedNode){return;}
list=dom.getParentElement(selectedNode,{nodeName:LIST_TAGS},2);if(!list){adjust(selectedNode);}}
if(keyCode===wysihtml5.ENTER_KEY&&blockElement.nodeName.match(/^H[1-6]$/)){adjust(selectedNode);}},0);return;}
if(that.config.useLineBreaks&&keyCode===wysihtml5.ENTER_KEY&&!wysihtml5.browser.insertsLineBreaksOnReturn()){event.preventDefault();that.commands.exec("insertLineBreak");}});}});})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,doc=document,win=window,HOST_TEMPLATE=doc.createElement("div"),TEXT_FORMATTING=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],BOX_FORMATTING=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],ADDITIONAL_CSS_RULES=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",wysihtml5.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];var focusWithoutScrolling=function(element){if(element.setActive){try{element.setActive();}catch(e){}}else{var elementStyle=element.style,originalScrollTop=doc.documentElement.scrollTop||doc.body.scrollTop,originalScrollLeft=doc.documentElement.scrollLeft||doc.body.scrollLeft,originalStyles={position:elementStyle.position,top:elementStyle.top,left:elementStyle.left,WebkitUserSelect:elementStyle.WebkitUserSelect};dom.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(element);element.focus();dom.setStyles(originalStyles).on(element);if(win.scrollTo){win.scrollTo(originalScrollLeft,originalScrollTop);}}};wysihtml5.views.Composer.prototype.style=function(){var that=this,originalActiveElement=doc.querySelector(":focus"),textareaElement=this.textarea.element,hasPlaceholder=textareaElement.hasAttribute("placeholder"),originalPlaceholder=hasPlaceholder&&textareaElement.getAttribute("placeholder"),originalDisplayValue=textareaElement.style.display,originalDisabled=textareaElement.disabled,displayValueForCopying;this.focusStylesHost=HOST_TEMPLATE.cloneNode(false);this.blurStylesHost=HOST_TEMPLATE.cloneNode(false);this.disabledStylesHost=HOST_TEMPLATE.cloneNode(false);if(hasPlaceholder){textareaElement.removeAttribute("placeholder");}
if(textareaElement===originalActiveElement){textareaElement.blur();}
textareaElement.disabled=false;textareaElement.style.display=displayValueForCopying="none";if((textareaElement.getAttribute("rows")&&dom.getStyle("height").from(textareaElement)==="auto")||(textareaElement.getAttribute("cols")&&dom.getStyle("width").from(textareaElement)==="auto")){textareaElement.style.display=displayValueForCopying=originalDisplayValue;}
dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.editableArea).andTo(this.blurStylesHost);dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.element).andTo(this.blurStylesHost);dom.insertCSS(ADDITIONAL_CSS_RULES).into(this.element.ownerDocument);textareaElement.disabled=true;dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.disabledStylesHost);dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.disabledStylesHost);textareaElement.disabled=originalDisabled;textareaElement.style.display=originalDisplayValue;focusWithoutScrolling(textareaElement);textareaElement.style.display=displayValueForCopying;dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.focusStylesHost);dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.focusStylesHost);textareaElement.style.display=originalDisplayValue;dom.copyStyles(["display"]).from(textareaElement).to(this.editableArea);var boxFormattingStyles=wysihtml5.lang.array(BOX_FORMATTING).without(["display"]);if(originalActiveElement){originalActiveElement.focus();}else{textareaElement.blur();}
if(hasPlaceholder){textareaElement.setAttribute("placeholder",originalPlaceholder);}
this.parent.on("focus:composer",function(){dom.copyStyles(boxFormattingStyles).from(that.focusStylesHost).to(that.editableArea);dom.copyStyles(TEXT_FORMATTING).from(that.focusStylesHost).to(that.element);});this.parent.on("blur:composer",function(){dom.copyStyles(boxFormattingStyles).from(that.blurStylesHost).to(that.editableArea);dom.copyStyles(TEXT_FORMATTING).from(that.blurStylesHost).to(that.element);});this.parent.observe("disable:composer",function(){dom.copyStyles(boxFormattingStyles).from(that.disabledStylesHost).to(that.editableArea);dom.copyStyles(TEXT_FORMATTING).from(that.disabledStylesHost).to(that.element);});this.parent.observe("enable:composer",function(){dom.copyStyles(boxFormattingStyles).from(that.blurStylesHost).to(that.editableArea);dom.copyStyles(TEXT_FORMATTING).from(that.blurStylesHost).to(that.element);});return this;};})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,browser=wysihtml5.browser,shortcuts={"66":"bold","73":"italic","85":"underline"};var deleteAroundEditable=function(selection,uneditable,element){var prevNode=selection.getPreviousNode(uneditable,true),curNode=selection.getSelectedNode();if(curNode.nodeType!==1&&curNode.parentNode!==element){curNode=curNode.parentNode;}
if(prevNode){if(curNode.nodeType==1){var first=curNode.firstChild;if(prevNode.nodeType==1){while(curNode.firstChild){prevNode.appendChild(curNode.firstChild);}}else{while(curNode.firstChild){uneditable.parentNode.insertBefore(curNode.firstChild,uneditable);}}
if(curNode.parentNode){curNode.parentNode.removeChild(curNode);}
selection.setBefore(first);}else{if(prevNode.nodeType==1){prevNode.appendChild(curNode);}else{uneditable.parentNode.insertBefore(curNode,uneditable);}
selection.setBefore(curNode);}}};var handleDeleteKeyPress=function(event,selection,element,composer){if(selection.isCollapsed()){if(selection.caretIsInTheBeginnig('LI')){event.preventDefault();composer.commands.exec('outdentList');}else if(selection.caretIsInTheBeginnig()){event.preventDefault();}else{var beforeUneditable=selection.caretIsBeforeUneditable();if(beforeUneditable){event.preventDefault();deleteAroundEditable(selection,beforeUneditable,element);}}}else if(selection.containsUneditable()){event.preventDefault();selection.deleteContents();}};var handleTabKeyDown=function(composer,element){if(!composer.selection.isCollapsed()){composer.selection.deleteContents();}else if(composer.selection.caretIsInTheBeginnig('LI')){if(composer.commands.exec('indentList'))return;}
composer.commands.exec("insertHTML","&emsp;");};wysihtml5.views.Composer.prototype.observe=function(){var that=this,state=this.getValue(),container=(this.sandbox.getIframe)?this.sandbox.getIframe():this.sandbox.getContentEditable(),element=this.element,focusBlurElement=(browser.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable)?element:this.sandbox.getWindow(),pasteEvents=["drop","paste"],interactionEvents=["drop","paste","mouseup","focus","keyup"];dom.observe(container,"DOMNodeRemoved",function(){clearInterval(domNodeRemovedInterval);that.parent.fire("destroy:composer");});if(!browser.supportsMutationEvents()){var domNodeRemovedInterval=setInterval(function(){if(!dom.contains(document.documentElement,container)){clearInterval(domNodeRemovedInterval);that.parent.fire("destroy:composer");}},250);}
dom.observe(focusBlurElement,interactionEvents,function(){setTimeout(function(){that.parent.fire("interaction").fire("interaction:composer");},0);});if(this.config.handleTables){if(this.doc.execCommand&&wysihtml5.browser.supportsCommand(this.doc,"enableObjectResizing")&&wysihtml5.browser.supportsCommand(this.doc,"enableInlineTableEditing")){setTimeout(function(){that.doc.execCommand("enableObjectResizing",false,"false");that.doc.execCommand("enableInlineTableEditing",false,"false");},0);}
this.tableSelection=wysihtml5.quirks.tableCellsSelection(element,that.parent);}
dom.observe(focusBlurElement,"focus",function(){that.parent.fire("focus").fire("focus:composer");setTimeout(function(){state=that.getValue();},0);});dom.observe(focusBlurElement,"blur",function(){if(state!==that.getValue()){that.parent.fire("change").fire("change:composer");}
that.parent.fire("blur").fire("blur:composer");});dom.observe(element,"dragenter",function(){that.parent.fire("unset_placeholder");});dom.observe(element,pasteEvents,function(){setTimeout(function(){that.parent.fire("paste").fire("paste:composer");},0);});dom.observe(element,"keyup",function(event){var keyCode=event.keyCode;if(keyCode===wysihtml5.SPACE_KEY||keyCode===wysihtml5.ENTER_KEY){that.parent.fire("newword:composer");}});this.parent.on("paste:composer",function(){setTimeout(function(){that.parent.fire("newword:composer");},0);});if(!browser.canSelectImagesInContentEditable()){dom.observe(element,"mousedown",function(event){var target=event.target;var allImages=element.querySelectorAll('img'),notMyImages=element.querySelectorAll('.'+that.config.uneditableContainerClassname+' img'),myImages=wysihtml5.lang.array(allImages).without(notMyImages);if(target.nodeName==="IMG"&&wysihtml5.lang.array(myImages).contains(target)){that.selection.selectNode(target);}});}
if(!browser.canSelectImagesInContentEditable()){dom.observe(element,"drop",function(event){setTimeout(function(){that.selection.getSelection().removeAllRanges();},0);});}
if(browser.hasHistoryIssue()&&browser.supportsSelectionModify()){dom.observe(element,"keydown",function(event){if(!event.metaKey&&!event.ctrlKey){return;}
var keyCode=event.keyCode,win=element.ownerDocument.defaultView,selection=win.getSelection();if(keyCode===37||keyCode===39){if(keyCode===37){selection.modify("extend","left","lineboundary");if(!event.shiftKey){selection.collapseToStart();}}
if(keyCode===39){selection.modify("extend","right","lineboundary");if(!event.shiftKey){selection.collapseToEnd();}}
event.preventDefault();}});}
dom.observe(element,"keydown",function(event){var keyCode=event.keyCode,command=shortcuts[keyCode];if((event.ctrlKey||event.metaKey)&&!event.altKey&&command){that.commands.exec(command);event.preventDefault();}
if(keyCode===8){handleDeleteKeyPress(event,that.selection,element,that);}else if(that.config.handleTabKey&&keyCode===9){event.preventDefault();handleTabKeyDown(that,element);}});dom.observe(element,"keydown",function(event){var target=that.selection.getSelectedNode(true),keyCode=event.keyCode,parent;if(target&&target.nodeName==="IMG"&&(keyCode===wysihtml5.BACKSPACE_KEY||keyCode===wysihtml5.DELETE_KEY)){parent=target.parentNode;parent.removeChild(target);if(parent.nodeName==="A"&&!parent.firstChild){parent.parentNode.removeChild(parent);}
setTimeout(function(){wysihtml5.quirks.redraw(element);},0);event.preventDefault();}});if(!this.config.contentEditableMode&&browser.hasIframeFocusIssue()){dom.observe(container,"focus",function(){setTimeout(function(){if(that.doc.querySelector(":focus")!==that.element){that.focus();}},0);});dom.observe(this.element,"blur",function(){setTimeout(function(){that.selection.getSelection().removeAllRanges();},0);});}
var titlePrefixes={IMG:"Image: ",A:"Link: "};dom.observe(element,"mouseover",function(event){var target=event.target,nodeName=target.nodeName,title;if(nodeName!=="A"&&nodeName!=="IMG"){return;}
var hasTitle=target.hasAttribute("title");if(!hasTitle){title=titlePrefixes[nodeName]+(target.getAttribute("href")||target.getAttribute("src"));target.setAttribute("title",title);}});};})(wysihtml5);;(function(wysihtml5){var INTERVAL=400;wysihtml5.views.Synchronizer=Base.extend({constructor:function(editor,textarea,composer){this.editor=editor;this.textarea=textarea;this.composer=composer;this._observe();},fromComposerToTextarea:function(shouldParseHtml){this.textarea.setValue(wysihtml5.lang.string(this.composer.getValue()).trim(),shouldParseHtml);},fromTextareaToComposer:function(shouldParseHtml){var textareaValue=this.textarea.getValue();if(textareaValue){this.composer.setValue(textareaValue,shouldParseHtml);}else{this.composer.clear();this.editor.fire("set_placeholder");}},sync:function(shouldParseHtml){if(this.editor.currentView.name==="textarea"){this.fromTextareaToComposer(shouldParseHtml);}else{this.fromComposerToTextarea(shouldParseHtml);}},_observe:function(){var interval,that=this,form=this.textarea.element.form,startInterval=function(){interval=setInterval(function(){that.fromComposerToTextarea();},INTERVAL);},stopInterval=function(){clearInterval(interval);interval=null;};startInterval();if(form){wysihtml5.dom.observe(form,"submit",function(){that.sync(true);});wysihtml5.dom.observe(form,"reset",function(){setTimeout(function(){that.fromTextareaToComposer();},0);});}
this.editor.on("change_view",function(view){if(view==="composer"&&!interval){that.fromTextareaToComposer(true);startInterval();}else if(view==="textarea"){that.fromComposerToTextarea(true);stopInterval();}});this.editor.on("destroy:composer",stopInterval);}});})(wysihtml5);;wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(parent,textareaElement,config){this.base(parent,textareaElement,config);this._observe();},clear:function(){this.element.value="";},getValue:function(parse){var value=this.isEmpty()?"":this.element.value;if(parse){value=this.parent.parse(value);}
return value;},setValue:function(html,parse){if(parse){html=this.parent.parse(html);}
this.element.value=html;},cleanUp:function(){var html=this.parent.parse(this.element.value);this.element.value=html;},hasPlaceholderSet:function(){var supportsPlaceholder=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),placeholderText=this.element.getAttribute("placeholder")||null,value=this.element.value,isEmpty=!value;return(supportsPlaceholder&&isEmpty)||(value===placeholderText);},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet();},_observe:function(){var element=this.element,parent=this.parent,eventMapping={focusin:"focus",focusout:"blur"},events=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];parent.on("beforeload",function(){wysihtml5.dom.observe(element,events,function(event){var eventName=eventMapping[event.type]||event.type;parent.fire(eventName).fire(eventName+":textarea");});wysihtml5.dom.observe(element,["paste","drop"],function(){setTimeout(function(){parent.fire("paste").fire("paste:textarea");},0);});});}});;(function(wysihtml5){var undef;var defaultConfig={name:undef,style:true,toolbar:undef,showToolbarAfterInit:true,autoLink:true,handleTables:true,handleTabKey:true,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:wysihtml5.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:true,stylesheets:[],placeholderText:undef,supportTouchDevices:true,cleanUp:true,contentEditableMode:false,uneditableContainerClassname:"wysihtml5-uneditable-container"};wysihtml5.Editor=wysihtml5.lang.Dispatcher.extend({constructor:function(editableElement,config){this.editableElement=typeof(editableElement)==="string"?document.getElementById(editableElement):editableElement;this.config=wysihtml5.lang.object({}).merge(defaultConfig).merge(config).get();this._isCompatible=wysihtml5.browser.supported();if(this.editableElement.nodeName.toLowerCase()!="textarea"){this.config.contentEditableMode=true;this.config.noTextarea=true;}
if(!this.config.noTextarea){this.textarea=new wysihtml5.views.Textarea(this,this.editableElement,this.config);this.currentView=this.textarea;}
if(!this._isCompatible||(!this.config.supportTouchDevices&&wysihtml5.browser.isTouchDevice())){var that=this;setTimeout(function(){that.fire("beforeload").fire("load");},0);return;}
wysihtml5.dom.addClass(document.body,this.config.bodyClassName);this.composer=new wysihtml5.views.Composer(this,this.editableElement,this.config);this.currentView=this.composer;if(typeof(this.config.parser)==="function"){this._initParser();}
this.on("beforeload",this.handleBeforeLoad);},handleBeforeLoad:function(){if(!this.config.noTextarea){this.synchronizer=new wysihtml5.views.Synchronizer(this,this.textarea,this.composer);}
if(this.config.toolbar){this.toolbar=new wysihtml5.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit);}},isCompatible:function(){return this._isCompatible;},clear:function(){this.currentView.clear();return this;},getValue:function(parse){return this.currentView.getValue(parse);},setValue:function(html,parse){this.fire("unset_placeholder");if(!html){return this.clear();}
this.currentView.setValue(html,parse);return this;},cleanUp:function(){this.currentView.cleanUp();},focus:function(setToEnd){this.currentView.focus(setToEnd);return this;},disable:function(){this.currentView.disable();return this;},enable:function(){this.currentView.enable();return this;},isEmpty:function(){return this.currentView.isEmpty();},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet();},parse:function(htmlOrElement){var parseContext=(this.config.contentEditableMode)?document:this.composer.sandbox.getDocument();var returnValue=this.config.parser(htmlOrElement,{"rules":this.config.parserRules,"cleanUp":this.config.cleanUp,"context":parseContext,"uneditableClass":this.config.uneditableContainerClassname});if(typeof(htmlOrElement)==="object"){wysihtml5.quirks.redraw(htmlOrElement);}
return returnValue;},_initParser:function(){this.on("paste:composer",function(){var keepScrollPosition=true,that=this;that.composer.selection.executeAndRestore(function(){wysihtml5.quirks.cleanPastedHTML(that.composer.element);that.parse(that.composer.element);},keepScrollPosition);});}});})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,CLASS_NAME_OPENED="wysihtml5-command-dialog-opened",SELECTOR_FORM_ELEMENTS="input, select, textarea",SELECTOR_FIELDS="[data-wysihtml5-dialog-field]",ATTRIBUTE_FIELDS="data-wysihtml5-dialog-field";wysihtml5.toolbar.Dialog=wysihtml5.lang.Dispatcher.extend({constructor:function(link,container){this.link=link;this.container=container;},_observe:function(){if(this._observed){return;}
var that=this,callbackWrapper=function(event){var attributes=that._serialize();if(attributes==that.elementToChange){that.fire("edit",attributes);}else{that.fire("save",attributes);}
that.hide();event.preventDefault();event.stopPropagation();};dom.observe(that.link,"click",function(){if(dom.hasClass(that.link,CLASS_NAME_OPENED)){setTimeout(function(){that.hide();},0);}});dom.observe(this.container,"keydown",function(event){var keyCode=event.keyCode;if(keyCode===wysihtml5.ENTER_KEY){callbackWrapper(event);}
if(keyCode===wysihtml5.ESCAPE_KEY){that.fire("cancel");that.hide();}});dom.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",callbackWrapper);dom.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(event){that.fire("cancel");that.hide();event.preventDefault();event.stopPropagation();});var formElements=this.container.querySelectorAll(SELECTOR_FORM_ELEMENTS),i=0,length=formElements.length,_clearInterval=function(){clearInterval(that.interval);};for(;i<length;i++){dom.observe(formElements[i],"change",_clearInterval);}
this._observed=true;},_serialize:function(){var data=this.elementToChange||{},fields=this.container.querySelectorAll(SELECTOR_FIELDS),length=fields.length,i=0;for(;i<length;i++){data[fields[i].getAttribute(ATTRIBUTE_FIELDS)]=fields[i].value;}
return data;},_interpolate:function(avoidHiddenFields){var field,fieldName,newValue,focusedElement=document.querySelector(":focus"),fields=this.container.querySelectorAll(SELECTOR_FIELDS),length=fields.length,i=0;for(;i<length;i++){field=fields[i];if(field===focusedElement){continue;}
if(avoidHiddenFields&&field.type==="hidden"){continue;}
fieldName=field.getAttribute(ATTRIBUTE_FIELDS);newValue=(this.elementToChange&&typeof(this.elementToChange)!=='boolean')?(this.elementToChange.getAttribute(fieldName)||""):field.defaultValue;field.value=newValue;}},show:function(elementToChange){if(dom.hasClass(this.link,CLASS_NAME_OPENED)){return;}
var that=this,firstField=this.container.querySelector(SELECTOR_FORM_ELEMENTS);this.elementToChange=elementToChange;this._observe();this._interpolate();if(elementToChange){this.interval=setInterval(function(){that._interpolate(true);},500);}
dom.addClass(this.link,CLASS_NAME_OPENED);this.container.style.display="";this.fire("show");if(firstField&&!elementToChange){try{firstField.focus();}catch(e){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;dom.removeClass(this.link,CLASS_NAME_OPENED);this.container.style.display="none";this.fire("hide");}});})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom;var linkStyles={position:"relative"};var wrapperStyles={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1};var inputStyles={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"};var inputAttributes={"x-webkit-speech":"","speech":""};wysihtml5.toolbar.Speech=function(parent,link){var input=document.createElement("input");if(!wysihtml5.browser.supportsSpeechApiOn(input)){link.style.display="none";return;}
var lang=parent.editor.textarea.element.getAttribute("lang");if(lang){inputAttributes.lang=lang;}
var wrapper=document.createElement("div");wysihtml5.lang.object(wrapperStyles).merge({width:link.offsetWidth+"px",height:link.offsetHeight+"px"});dom.insert(input).into(wrapper);dom.insert(wrapper).into(link);dom.setStyles(inputStyles).on(input);dom.setAttributes(inputAttributes).on(input);dom.setStyles(wrapperStyles).on(wrapper);dom.setStyles(linkStyles).on(link);var eventName="onwebkitspeechchange"in input?"webkitspeechchange":"speechchange";dom.observe(input,eventName,function(){parent.execCommand("insertText",input.value);input.value="";});dom.observe(input,"click",function(event){if(dom.hasClass(link,"wysihtml5-command-disabled")){event.preventDefault();}
event.stopPropagation();});};})(wysihtml5);;(function(wysihtml5){var CLASS_NAME_COMMAND_DISABLED="wysihtml5-command-disabled",CLASS_NAME_COMMANDS_DISABLED="wysihtml5-commands-disabled",CLASS_NAME_COMMAND_ACTIVE="wysihtml5-command-active",CLASS_NAME_ACTION_ACTIVE="wysihtml5-action-active",dom=wysihtml5.dom;wysihtml5.toolbar.Toolbar=Base.extend({constructor:function(editor,container,showOnInit){this.editor=editor;this.container=typeof(container)==="string"?document.getElementById(container):container;this.composer=editor.composer;this._getLinks("command");this._getLinks("action");this._observe();if(showOnInit){this.show();}
var speechInputLinks=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),length=speechInputLinks.length,i=0;for(;i<length;i++){new wysihtml5.toolbar.Speech(this,speechInputLinks[i]);}},_getLinks:function(type){var links=this[type+"Links"]=wysihtml5.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+type+"]")).get(),length=links.length,i=0,mapping=this[type+"Mapping"]={},link,group,name,value,dialog;for(;i<length;i++){link=links[i];name=link.getAttribute("data-wysihtml5-"+type);value=link.getAttribute("data-wysihtml5-"+type+"-value");group=this.container.querySelector("[data-wysihtml5-"+type+"-group='"+name+"']");dialog=this._getDialog(link,name);mapping[name+":"+value]={link:link,group:group,name:name,value:value,dialog:dialog,state:false};}},_getDialog:function(link,command){var that=this,dialogElement=this.container.querySelector("[data-wysihtml5-dialog='"+command+"']"),dialog,caretBookmark;if(dialogElement){if(wysihtml5.toolbar["Dialog_"+command]){dialog=new wysihtml5.toolbar["Dialog_"+command](link,dialogElement);}else{dialog=new wysihtml5.toolbar.Dialog(link,dialogElement);}
dialog.on("show",function(){caretBookmark=that.composer.selection.getBookmark();that.editor.fire("show:dialog",{command:command,dialogContainer:dialogElement,commandLink:link});});dialog.on("save",function(attributes){if(caretBookmark){that.composer.selection.setBookmark(caretBookmark);}
that._execCommand(command,attributes);that.editor.fire("save:dialog",{command:command,dialogContainer:dialogElement,commandLink:link});});dialog.on("cancel",function(){that.editor.focus(false);that.editor.fire("cancel:dialog",{command:command,dialogContainer:dialogElement,commandLink:link});});}
return dialog;},execCommand:function(command,commandValue){if(this.commandsDisabled){return;}
var commandObj=this.commandMapping[command+":"+commandValue];if(commandObj&&commandObj.dialog&&!commandObj.state){commandObj.dialog.show();}else{this._execCommand(command,commandValue);}},_execCommand:function(command,commandValue){this.editor.focus(false);this.composer.commands.exec(command,commandValue);this._updateLinkStates();},execAction:function(action){var editor=this.editor;if(action==="change_view"){if(editor.textarea){if(editor.currentView===editor.textarea){editor.fire("change_view","composer");}else{editor.fire("change_view","textarea");}}}
if(action=="showSource"){editor.fire("showSource");}},_observe:function(){var that=this,editor=this.editor,container=this.container,links=this.commandLinks.concat(this.actionLinks),length=links.length,i=0;for(;i<length;i++){if(links[i].nodeName==="A"){dom.setAttributes({href:"javascript:;",unselectable:"on"}).on(links[i]);}else{dom.setAttributes({unselectable:"on"}).on(links[i]);}}
dom.delegate(container,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(event){event.preventDefault();});dom.delegate(container,"[data-wysihtml5-command]","click",function(event){var link=this,command=link.getAttribute("data-wysihtml5-command"),commandValue=link.getAttribute("data-wysihtml5-command-value");that.execCommand(command,commandValue);event.preventDefault();});dom.delegate(container,"[data-wysihtml5-action]","click",function(event){var action=this.getAttribute("data-wysihtml5-action");that.execAction(action);event.preventDefault();});editor.on("interaction:composer",function(){that._updateLinkStates();});editor.on("focus:composer",function(){that.bookmark=null;});if(this.editor.config.handleTables){editor.on("tableselect:composer",function(){that.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="";});editor.on("tableunselect:composer",function(){that.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none";});}
editor.on("change_view",function(currentView){if(editor.textarea){setTimeout(function(){that.commandsDisabled=(currentView!=="composer");that._updateLinkStates();if(that.commandsDisabled){dom.addClass(container,CLASS_NAME_COMMANDS_DISABLED);}else{dom.removeClass(container,CLASS_NAME_COMMANDS_DISABLED);}},0);}});},_updateLinkStates:function(){var commandMapping=this.commandMapping,actionMapping=this.actionMapping,i,state,action,command;for(i in commandMapping){command=commandMapping[i];if(this.commandsDisabled){state=false;dom.removeClass(command.link,CLASS_NAME_COMMAND_ACTIVE);if(command.group){dom.removeClass(command.group,CLASS_NAME_COMMAND_ACTIVE);}
if(command.dialog){command.dialog.hide();}}else{state=this.composer.commands.state(command.name,command.value);dom.removeClass(command.link,CLASS_NAME_COMMAND_DISABLED);if(command.group){dom.removeClass(command.group,CLASS_NAME_COMMAND_DISABLED);}}
if(command.state===state){continue;}
command.state=state;if(state){dom.addClass(command.link,CLASS_NAME_COMMAND_ACTIVE);if(command.group){dom.addClass(command.group,CLASS_NAME_COMMAND_ACTIVE);}
if(command.dialog){if(typeof(state)==="object"||wysihtml5.lang.object(state).isArray()){if(!command.dialog.multiselect&&wysihtml5.lang.object(state).isArray()){state=state.length===1?state[0]:true;command.state=state;}
command.dialog.show(state);}else{command.dialog.hide();}}}else{dom.removeClass(command.link,CLASS_NAME_COMMAND_ACTIVE);if(command.group){dom.removeClass(command.group,CLASS_NAME_COMMAND_ACTIVE);}
if(command.dialog){command.dialog.hide();}}}
for(i in actionMapping){action=actionMapping[i];if(action.name==="change_view"){action.state=this.editor.currentView===this.editor.textarea;if(action.state){dom.addClass(action.link,CLASS_NAME_ACTION_ACTIVE);}else{dom.removeClass(action.link,CLASS_NAME_ACTION_ACTIVE);}}}},show:function(){this.container.style.display="";},hide:function(){this.container.style.display="none";}});})(wysihtml5);;(function(wysihtml5){wysihtml5.toolbar.Dialog_createTable=wysihtml5.toolbar.Dialog.extend({show:function(elementToChange){this.base(elementToChange);}});})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,SELECTOR_FIELDS="[data-wysihtml5-dialog-field]",ATTRIBUTE_FIELDS="data-wysihtml5-dialog-field";wysihtml5.toolbar.Dialog_foreColorStyle=wysihtml5.toolbar.Dialog.extend({multiselect:true,_serialize:function(){var data={},fields=this.container.querySelectorAll(SELECTOR_FIELDS),length=fields.length,i=0;for(;i<length;i++){data[fields[i].getAttribute(ATTRIBUTE_FIELDS)]=fields[i].value;}
return data;},_interpolate:function(avoidHiddenFields){var field,fieldName,newValue,focusedElement=document.querySelector(":focus"),fields=this.container.querySelectorAll(SELECTOR_FIELDS),length=fields.length,i=0,firstElement=(this.elementToChange)?((wysihtml5.lang.object(this.elementToChange).isArray())?this.elementToChange[0]:this.elementToChange):null,colorStr=(firstElement)?firstElement.getAttribute('style'):null,color=(colorStr)?wysihtml5.quirks.styleParser.parseColor(colorStr,"color"):null;for(;i<length;i++){field=fields[i];if(field===focusedElement){continue;}
if(avoidHiddenFields&&field.type==="hidden"){continue;}
if(field.getAttribute(ATTRIBUTE_FIELDS)==="color"){if(color){if(color[3]&&color[3]!=1){field.value="rgba("+color[0]+","+color[1]+","+color[2]+","+color[3]+");";}else{field.value="rgb("+color[0]+","+color[1]+","+color[2]+");";}}else{field.value="rgb(0,0,0);";}}}}});})(wysihtml5);;(function(wysihtml5){var dom=wysihtml5.dom,SELECTOR_FIELDS="[data-wysihtml5-dialog-field]",ATTRIBUTE_FIELDS="data-wysihtml5-dialog-field";wysihtml5.toolbar.Dialog_fontSizeStyle=wysihtml5.toolbar.Dialog.extend({multiselect:true,_serialize:function(){return{"size":this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value};},_interpolate:function(avoidHiddenFields){var focusedElement=document.querySelector(":focus"),field=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),firstElement=(this.elementToChange)?((wysihtml5.lang.object(this.elementToChange).isArray())?this.elementToChange[0]:this.elementToChange):null,styleStr=(firstElement)?firstElement.getAttribute('style'):null,size=(styleStr)?wysihtml5.quirks.styleParser.parseFontSize(styleStr):null;if(field&&field!==focusedElement&&size&&!(/^\s*$/).test(size)){field.value=size;}}});})(wysihtml5);
/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();this["wysihtml5"]=this["wysihtml5"]||{};this["wysihtml5"]["tpl"]=this["wysihtml5"]["tpl"]||{};this["wysihtml5"]["tpl"]["blockquote"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program3(depth0,data){return" \n      <span class=\"fa fa-quote-left\"></span>\n    ";}
function program5(depth0,data){return"\n      <span class=\"glyphicon glyphicon-quote\"></span>\n    ";}
buffer+="<li>\n  <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"blockquote\" data-wysihtml5-display-format-name=\"false\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(5,program5,data),fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n  </a>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["color"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
buffer+="<li class=\"dropdown\">\n  <a class=\"btn btn-default dropdown-toggle ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\" data-toggle=\"dropdown\" tabindex=\"-1\">\n    <span class=\"current-color\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.black)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</span>\n    <b class=\"caret\"></b>\n  </a>\n  <ul class=\"dropdown-menu\">\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"black\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"black\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.black)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"silver\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"silver\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.silver)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"gray\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"gray\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.gray)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"maroon\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"maroon\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.maroon)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"red\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"red\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.red)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"purple\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"purple\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.purple)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"green\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"green\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.green)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"olive\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"olive\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.olive)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"navy\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"navy\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.navy)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"blue\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"blue\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.blue)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><div class=\"wysihtml5-colors\" data-wysihtml5-command-value=\"orange\"></div><a class=\"wysihtml5-colors-title\" data-wysihtml5-command=\"foreColor\" data-wysihtml5-command-value=\"orange\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.colours)),stack1==null||stack1===false?stack1:stack1.orange)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n  </ul>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["emphasis"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program3(depth0,data){var buffer="",stack1,stack2;buffer+="\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"small\" title=\"CTRL+S\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.emphasis)),stack1==null||stack1===false?stack1:stack1.small)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n    ";return buffer;}
buffer+="<li>\n  <div class=\"btn-group\">\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"bold\" title=\"CTRL+B\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.emphasis)),stack1==null||stack1===false?stack1:stack1.bold)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"italic\" title=\"CTRL+I\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.emphasis)),stack1==null||stack1===false?stack1:stack1.italic)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"underline\" title=\"CTRL+U\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.emphasis)),stack1==null||stack1===false?stack1:stack1.underline)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.emphasis)),stack1==null||stack1===false?stack1:stack1.small),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n  </div>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["font-styles"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program3(depth0,data){return"\n      <span class=\"fa fa-font\"></span>\n    ";}
function program5(depth0,data){return"\n      <span class=\"glyphicon glyphicon-font\"></span>\n    ";}
buffer+="<li class=\"dropdown\">\n  <a class=\"btn btn-default dropdown-toggle ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\" data-toggle=\"dropdown\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(5,program5,data),fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    <span class=\"current-font\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.normal)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</span>\n    <b class=\"caret\"></b>\n  </a>\n  <ul class=\"dropdown-menu\">\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"p\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.normal)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h1\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h1)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h2\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h2)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h3\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h3)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h4\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h4)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h5\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h5)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n    <li><a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h6\" tabindex=\"-1\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.font_styles)),stack1==null||stack1===false?stack1:stack1.h6)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a></li>\n  </ul>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["html"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program3(depth0,data){return"\n        <span class=\"fa fa-pencil\"></span>\n      ";}
function program5(depth0,data){return"\n        <span class=\"glyphicon glyphicon-pencil\"></span>\n      ";}
buffer+="<li>\n  <div class=\"btn-group\">\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-action=\"change_view\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.html)),stack1==null||stack1===false?stack1:stack1.edit)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n      ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(5,program5,data),fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    </a>\n  </div>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["image"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){return"modal-sm";}
function program3(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program5(depth0,data){return"\n      <span class=\"fa fa-file-image-o\"></span>\n    ";}
function program7(depth0,data){return"\n      <span class=\"glyphicon glyphicon-picture\"></span>\n    ";}
buffer+="<li>\n  <div class=\"bootstrap-wysihtml5-insert-image-modal modal fade\">\n    <div class=\"modal-dialog ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.smallmodals),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <a class=\"close\" data-dismiss=\"modal\">&times;</a>\n          <h3>"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.image)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</h3>\n        </div>\n        <div class=\"modal-body\">\n          <input value=\"http://\" class=\"bootstrap-wysihtml5-insert-image-url form-control\">\n        </div>\n        <div class=\"modal-footer\">\n          <a class=\"btn btn-default\" data-dismiss=\"modal\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.image)),stack1==null||stack1===false?stack1:stack1.cancel)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n          <a class=\"btn btn-primary\" data-dismiss=\"modal\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.image)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"insertImage\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.image)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(7,program7,data),fn:self.program(5,program5,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n  </a>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["link"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){return"modal-sm";}
function program3(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program5(depth0,data){return"\n      <span class=\"fa fa-share-square-o\"></span>\n    ";}
function program7(depth0,data){return"\n      <span class=\"glyphicon glyphicon-share\"></span>\n    ";}
buffer+="<li>\n  <div class=\"bootstrap-wysihtml5-insert-link-modal modal fade\">\n    <div class=\"modal-dialog ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.smallmodals),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <a class=\"close\" data-dismiss=\"modal\">&times;</a>\n          <h3>"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.link)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</h3>\n        </div>\n        <div class=\"modal-body\">\n          <input value=\"http://\" class=\"bootstrap-wysihtml5-insert-link-url form-control\">\n          <label class=\"checkbox\"> <input type=\"checkbox\" class=\"bootstrap-wysihtml5-insert-link-target\" checked>"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.link)),stack1==null||stack1===false?stack1:stack1.target)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</label>\n        </div>\n        <div class=\"modal-footer\">\n          <a class=\"btn btn-default\" data-dismiss=\"modal\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.link)),stack1==null||stack1===false?stack1:stack1.cancel)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n          <a href=\"#\" class=\"btn btn-primary\" data-dismiss=\"modal\">"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.link)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"createLink\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.link)),stack1==null||stack1===false?stack1:stack1.insert)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(7,program7,data),fn:self.program(5,program5,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n  </a>\n</li>\n";return buffer;});this["wysihtml5"]["tpl"]["lists"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,'>= 1.0.0'];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="btn-"
+escapeExpression(((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size)),typeof stack1===functionType?stack1.apply(depth0):stack1));return buffer;}
function program3(depth0,data){return"\n      <span class=\"fa fa-list-ul\"></span>\n    ";}
function program5(depth0,data){return"\n      <span class=\"glyphicon glyphicon-list\"></span>\n    ";}
function program7(depth0,data){return"\n      <span class=\"fa fa-list-ol\"></span>\n    ";}
function program9(depth0,data){return"\n      <span class=\"glyphicon glyphicon-th-list\"></span>\n    ";}
function program11(depth0,data){return"\n      <span class=\"fa fa-outdent\"></span>\n    ";}
function program13(depth0,data){return"\n      <span class=\"glyphicon glyphicon-indent-right\"></span>\n    ";}
function program15(depth0,data){return"\n      <span class=\"fa fa-indent\"></span>\n    ";}
function program17(depth0,data){return"\n      <span class=\"glyphicon glyphicon-indent-left\"></span>\n    ";}
buffer+="<li>\n  <div class=\"btn-group\">\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"insertUnorderedList\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.lists)),stack1==null||stack1===false?stack1:stack1.unordered)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(5,program5,data),fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    </a>\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"insertOrderedList\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.lists)),stack1==null||stack1===false?stack1:stack1.ordered)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(9,program9,data),fn:self.program(7,program7,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    </a>\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"Outdent\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.lists)),stack1==null||stack1===false?stack1:stack1.outdent)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(13,program13,data),fn:self.program(11,program11,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    </a>\n    <a class=\"btn ";stack2=helpers['if'].call(depth0,((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.size),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+=" btn-default\" data-wysihtml5-command=\"Indent\" title=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.locale)),stack1==null||stack1===false?stack1:stack1.lists)),stack1==null||stack1===false?stack1:stack1.indent)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" tabindex=\"-1\">\n    ";stack2=helpers['if'].call(depth0,((stack1=((stack1=(depth0&&depth0.options)),stack1==null||stack1===false?stack1:stack1.toolbar)),stack1==null||stack1===false?stack1:stack1.fa),{hash:{},inverse:self.program(17,program17,data),fn:self.program(15,program15,data),data:data});if(stack2||stack2===0){buffer+=stack2;}
buffer+="\n    </a>\n  </div>\n</li>\n";return buffer;});(function(factory){if(typeof define==='function'&&define.amd){define('bootstrap.wysihtml5',['jquery','wysihtml5','bootstrap.wysihtml5.templates','bootstrap.wysihtml5.commands'],factory);}else{factory(jQuery,wysihtml5);}}(function($,wysihtml5){var bsWysihtml5=function($,wysihtml5){'use strict';var templates=function(key,locale,options){if(wysihtml5.tpl[key]){return wysihtml5.tpl[key]({locale:locale,options:options});}};var Wysihtml5=function(el,options){this.el=el;var toolbarOpts=$.extend(true,{},defaultOptions,options);for(var t in toolbarOpts.customTemplates){wysihtml5.tpl[t]=toolbarOpts.customTemplates[t];}
this.toolbar=this.createToolbar(el,toolbarOpts);this.editor=this.createEditor(toolbarOpts);window.editor=this.editor;$('iframe.wysihtml5-sandbox').each(function(i,el){$(el.contentWindow).off('focus.wysihtml5').on({'focus.wysihtml5':function(){$('li.dropdown').removeClass('open');}});});};Wysihtml5.prototype={constructor:Wysihtml5,createEditor:function(options){options=options||{};options=$.extend(true,{},options);options.toolbar=this.toolbar[0];var editor=new wysihtml5.Editor(this.el[0],options);if(editor.composer.editableArea.contentDocument){this.addMoreShortcuts(editor,editor.composer.editableArea.contentDocument.body||editor.composer.editableArea.contentDocument,options.shortcuts);}else{this.addMoreShortcuts(editor,editor.composer.editableArea,options.shortcuts);}
if(options&&options.events){for(var eventName in options.events){editor.on(eventName,options.events[eventName]);}}
return editor;},createToolbar:function(el,options){var self=this;var toolbar=$('<ul/>',{'class':'wysihtml5-toolbar','style':'display:none'});var culture=options.locale||defaultOptions.locale||'en';if(!locale.hasOwnProperty(culture)){console.debug('Locale \''+culture+'\' not found. Available locales are: '+Object.keys(locale)+'. Falling back to \'en\'.');culture='en';}
var localeObject=$.extend(true,{},locale.en,locale[culture]);for(var key in options.toolbar){if(options.toolbar[key]){toolbar.append(templates(key,localeObject,options));if(key==='html'){this.initHtml(toolbar);}
if(key==='link'){this.initInsertLink(toolbar);}
if(key==='image'){this.initInsertImage(toolbar);}}}
toolbar.find('a[data-wysihtml5-command="formatBlock"]').click(function(e){var target=e.delegateTarget||e.target||e.srcElement,el=$(target),showformat=el.data('wysihtml5-display-format-name'),formatname=el.data('wysihtml5-format-name')||el.html();if(showformat===undefined||showformat==='true'){self.toolbar.find('.current-font').text(formatname);}});toolbar.find('a[data-wysihtml5-command="foreColor"]').click(function(e){var target=e.target||e.srcElement;var el=$(target);self.toolbar.find('.current-color').text(el.html());});this.el.before(toolbar);return toolbar;},initHtml:function(toolbar){var changeViewSelector='a[data-wysihtml5-action="change_view"]';toolbar.find(changeViewSelector).click(function(e){toolbar.find('a.btn').not(changeViewSelector).toggleClass('disabled');});},initInsertImage:function(toolbar){var self=this;var insertImageModal=toolbar.find('.bootstrap-wysihtml5-insert-image-modal');var urlInput=insertImageModal.find('.bootstrap-wysihtml5-insert-image-url');var insertButton=insertImageModal.find('a.btn-primary');var initialValue=urlInput.val();var caretBookmark;var insertImage=function(){var url=urlInput.val();urlInput.val(initialValue);self.editor.currentView.element.focus();if(caretBookmark){self.editor.composer.selection.setBookmark(caretBookmark);caretBookmark=null;}
self.editor.composer.commands.exec('insertImage',url);};urlInput.keypress(function(e){if(e.which==13){insertImage();insertImageModal.modal('hide');}});insertButton.click(insertImage);insertImageModal.on('shown',function(){urlInput.focus();});insertImageModal.on('hide',function(){self.editor.currentView.element.focus();});toolbar.find('a[data-wysihtml5-command=insertImage]').click(function(){var activeButton=$(this).hasClass('wysihtml5-command-active');if(!activeButton){self.editor.currentView.element.focus(false);caretBookmark=self.editor.composer.selection.getBookmark();insertImageModal.appendTo('body').modal('show');insertImageModal.on('click.dismiss.modal','[data-dismiss="modal"]',function(e){e.stopPropagation();});return false;}
else{return true;}});},initInsertLink:function(toolbar){var self=this;var insertLinkModal=toolbar.find('.bootstrap-wysihtml5-insert-link-modal');var urlInput=insertLinkModal.find('.bootstrap-wysihtml5-insert-link-url');var targetInput=insertLinkModal.find('.bootstrap-wysihtml5-insert-link-target');var insertButton=insertLinkModal.find('a.btn-primary');var initialValue=urlInput.val();var caretBookmark;var insertLink=function(){var url=urlInput.val();urlInput.val(initialValue);self.editor.currentView.element.focus();if(caretBookmark){self.editor.composer.selection.setBookmark(caretBookmark);caretBookmark=null;}
var newWindow=targetInput.prop('checked');self.editor.composer.commands.exec('createLink',{'href':url,'target':(newWindow?'_blank':'_self'),'rel':(newWindow?'nofollow':'')});};var pressedEnter=false;urlInput.keypress(function(e){if(e.which==13){insertLink();insertLinkModal.modal('hide');}});insertButton.click(insertLink);insertLinkModal.on('shown',function(){urlInput.focus();});insertLinkModal.on('hide',function(){self.editor.currentView.element.focus();});toolbar.find('a[data-wysihtml5-command=createLink]').click(function(){var activeButton=$(this).hasClass('wysihtml5-command-active');if(!activeButton){self.editor.currentView.element.focus(false);caretBookmark=self.editor.composer.selection.getBookmark();insertLinkModal.appendTo('body').modal('show');insertLinkModal.on('click.dismiss.modal','[data-dismiss="modal"]',function(e){e.stopPropagation();});return false;}
else{return true;}});},addMoreShortcuts:function(editor,el,shortcuts){wysihtml5.dom.observe(el,'keydown',function(event){var keyCode=event.keyCode,command=shortcuts[keyCode];if((event.ctrlKey||event.metaKey||event.altKey)&&command&&wysihtml5.commands[command]){wysihtml5.commands[command].exec(editor.composer,command);event.preventDefault();}});}};var methods={resetDefaults:function(){$.fn.wysihtml5.defaultOptions=$.extend(true,{},$.fn.wysihtml5.defaultOptionsCache);},bypassDefaults:function(options){return this.each(function(){var $this=$(this);$this.data('wysihtml5',new Wysihtml5($this,options));});},shallowExtend:function(options){var settings=$.extend({},$.fn.wysihtml5.defaultOptions,options||{},$(this).data());var that=this;return methods.bypassDefaults.apply(that,[settings]);},deepExtend:function(options){var settings=$.extend(true,{},$.fn.wysihtml5.defaultOptions,options||{});var that=this;return methods.bypassDefaults.apply(that,[settings]);},init:function(options){var that=this;return methods.shallowExtend.apply(that,[options]);}};$.fn.wysihtml5=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.wysihtml5');}};$.fn.wysihtml5.Constructor=Wysihtml5;var defaultOptions=$.fn.wysihtml5.defaultOptions={toolbar:{'font-styles':true,'color':false,'emphasis':{'small':true},'blockquote':true,'lists':true,'html':false,'link':true,'image':true,'smallmodals':false},events:{},parserRules:{classes:{'wysiwyg-color-silver':1,'wysiwyg-color-gray':1,'wysiwyg-color-white':1,'wysiwyg-color-maroon':1,'wysiwyg-color-red':1,'wysiwyg-color-purple':1,'wysiwyg-color-fuchsia':1,'wysiwyg-color-green':1,'wysiwyg-color-lime':1,'wysiwyg-color-olive':1,'wysiwyg-color-yellow':1,'wysiwyg-color-navy':1,'wysiwyg-color-blue':1,'wysiwyg-color-teal':1,'wysiwyg-color-aqua':1,'wysiwyg-color-orange':1},tags:{'b':{},'i':{},'strong':{},'em':{},'p':{},'br':{},'ol':{},'ul':{},'li':{},'h1':{},'h2':{},'h3':{},'h4':{},'h5':{},'h6':{},'blockquote':{},'u':1,'img':{'check_attributes':{'width':'numbers','alt':'alt','src':'url','height':'numbers'}},'a':{check_attributes:{'href':'url'},'set_attributes':{'target':'_blank','rel':'nofollow'}},'span':1,'div':1,'small':1,'code':1,'pre':1}},locale:'en',shortcuts:{'83':'small'}};if(typeof $.fn.wysihtml5.defaultOptionsCache==='undefined'){$.fn.wysihtml5.defaultOptionsCache=$.extend(true,{},$.fn.wysihtml5.defaultOptions);}
var locale=$.fn.wysihtml5.locale={};};bsWysihtml5($,wysihtml5);}));(function(wysihtml5){wysihtml5.commands.small={exec:function(composer,command){return wysihtml5.commands.formatInline.exec(composer,command,"small");},state:function(composer,command){return wysihtml5.commands.formatInline.state(composer,command,"small");}};})(wysihtml5);(function(factory){if(typeof define==='function'&&define.amd){define('bootstrap.wysihtml5.en-US',['jquery','bootstrap.wysihtml5'],factory);}else{factory(jQuery);}}(function($){$.fn.wysihtml5.locale.en=$.fn.wysihtml5.locale['en-US']={font_styles:{normal:'Normal text',h1:'Heading 1',h2:'Heading 2',h3:'Heading 3',h4:'Heading 4',h5:'Heading 5',h6:'Heading 6'},emphasis:{bold:'Bold',italic:'Italic',underline:'Underline',small:'Small'},lists:{unordered:'Unordered list',ordered:'Ordered list',outdent:'Outdent',indent:'Indent'},link:{insert:'Insert link',cancel:'Cancel',target:'Open link in new window'},image:{insert:'Insert image',cancel:'Cancel'},html:{edit:'Edit HTML'},colours:{black:'Black',silver:'Silver',gray:'Grey',maroon:'Maroon',red:'Red',purple:'Purple',green:'Green',olive:'Olive',navy:'Navy',blue:'Blue',orange:'Orange'}};}));(function(root,factory){if(typeof define==='function'&&define.amd){define(["jquery"],function(a0){return(factory(a0));});}else if(typeof exports==='object'){module.exports=factory(require("jquery"));}else{factory(jQuery);}}(this,function($){var defaults={animation:'fade',animationDuration:350,content:null,contentAsHTML:false,contentCloning:false,debug:true,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:false,multiple:false,parent:null,plugins:['sideTip'],repositionOnScroll:false,restoration:'none',selfDestruction:true,theme:[],timer:0,trackerInterval:500,trackOrigin:false,trackTooltip:false,trigger:'hover',triggerClose:{click:false,mouseleave:false,originClick:false,scroll:false,tap:false,touchleave:false},triggerOpen:{click:false,mouseenter:false,tap:false,touchstart:false},updateAnimation:'rotate',zIndex:9999999},win=(typeof window!='undefined')?window:null,env={hasTouchCapability:!!(win&&('ontouchstart'in win||(win.DocumentTouch&&win.document instanceof win.DocumentTouch)||win.navigator.maxTouchPoints)),hasTransitions:transitionSupport(),IE:false,semVer:'4.2.5',window:win},core=function(){this.__$emitterPrivate=$({});this.__$emitterPublic=$({});this.__instancesLatestArr=[];this.__plugins={};this._env=env;};core.prototype={__bridge:function(constructor,obj,pluginName){if(!obj[pluginName]){var fn=function(){};fn.prototype=constructor;var pluginInstance=new fn();if(pluginInstance.__init){pluginInstance.__init(obj);}
$.each(constructor,function(methodName,fn){if(methodName.indexOf('__')!=0){if(!obj[methodName]){obj[methodName]=function(){return pluginInstance[methodName].apply(pluginInstance,Array.prototype.slice.apply(arguments));};obj[methodName].bridged=pluginInstance;}
else if(defaults.debug){console.log('The '+methodName+' method of the '+pluginName
+' plugin conflicts with another plugin or native methods');}}});obj[pluginName]=pluginInstance;}
return this;},__setWindow:function(window){env.window=window;return this;},_getRuler:function($tooltip){return new Ruler($tooltip);},_off:function(){this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_on:function(){this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_one:function(){this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_plugin:function(plugin){var self=this;if(typeof plugin=='string'){var pluginName=plugin,p=null;if(pluginName.indexOf('.')>0){p=self.__plugins[pluginName];}
else{$.each(self.__plugins,function(i,plugin){if(plugin.name.substring(plugin.name.length-pluginName.length-1)=='.'+pluginName){p=plugin;return false;}});}
return p;}
else{if(plugin.name.indexOf('.')<0){throw new Error('Plugins must be namespaced');}
self.__plugins[plugin.name]=plugin;if(plugin.core){self.__bridge(plugin.core,self,plugin.name);}
return this;}},_trigger:function(){var args=Array.prototype.slice.apply(arguments);if(typeof args[0]=='string'){args[0]={type:args[0]};}
this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,args);this.__$emitterPublic.trigger.apply(this.__$emitterPublic,args);return this;},instances:function(selector){var instances=[],sel=selector||'.tooltipstered';$(sel).each(function(){var $this=$(this),ns=$this.data('tooltipster-ns');if(ns){$.each(ns,function(i,namespace){instances.push($this.data(namespace));});}});return instances;},instancesLatest:function(){return this.__instancesLatestArr;},off:function(){this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},on:function(){this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},one:function(){this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},origins:function(selector){var sel=selector?selector+' ':'';return $(sel+'.tooltipstered').toArray();},setDefaults:function(d){$.extend(defaults,d);return this;},triggerHandler:function(){this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;}};$.tooltipster=new core();$.Tooltipster=function(element,options){this.__callbacks={close:[],open:[]};this.__closingTime;this.__Content;this.__contentBcr;this.__destroyed=false;this.__$emitterPrivate=$({});this.__$emitterPublic=$({});this.__enabled=true;this.__garbageCollector;this.__Geometry;this.__lastPosition;this.__namespace='tooltipster-'+Math.round(Math.random()*1000000);this.__options;this.__$originParents;this.__pointerIsOverOrigin=false;this.__previousThemes=[];this.__state='closed';this.__timeouts={close:[],open:null};this.__touchEvents=[];this.__tracker=null;this._$origin;this._$tooltip;this.__init(element,options);};$.Tooltipster.prototype={__init:function(origin,options){var self=this;self._$origin=$(origin);self.__options=$.extend(true,{},defaults,options);self.__optionsFormat();if(!env.IE||env.IE>=self.__options.IEmin){var initialTitle=null;if(self._$origin.data('tooltipster-initialTitle')===undefined){initialTitle=self._$origin.attr('title');if(initialTitle===undefined)initialTitle=null;self._$origin.data('tooltipster-initialTitle',initialTitle);}
if(self.__options.content!==null){self.__contentSet(self.__options.content);}
else{var selector=self._$origin.attr('data-tooltip-content'),$el;if(selector){$el=$(selector);}
if($el&&$el[0]){self.__contentSet($el.first());}
else{self.__contentSet(initialTitle);}}
self._$origin.removeAttr('title').addClass('tooltipstered');self.__prepareOrigin();self.__prepareGC();$.each(self.__options.plugins,function(i,pluginName){self._plug(pluginName);});if(env.hasTouchCapability){$(env.window.document.body).on('touchmove.'+self.__namespace+'-triggerOpen',function(event){self._touchRecordEvent(event);});}
self._on('created',function(){self.__prepareTooltip();})._on('repositioned',function(e){self.__lastPosition=e.position;});}
else{self.__options.disabled=true;}},__contentInsert:function(){var self=this,$el=self._$tooltip.find('.tooltipster-content'),formattedContent=self.__Content,format=function(content){formattedContent=content;};self._trigger({type:'format',content:self.__Content,format:format});if(self.__options.functionFormat){formattedContent=self.__options.functionFormat.call(self,self,{origin:self._$origin[0]},self.__Content);}
if(typeof formattedContent==='string'&&!self.__options.contentAsHTML){$el.text(formattedContent);}
else{$el.empty().append(formattedContent);}
return self;},__contentSet:function(content){if(content instanceof $&&this.__options.contentCloning){content=content.clone(true);}
this.__Content=content;this._trigger({type:'updated',content:content});return this;},__destroyError:function(){throw new Error('This tooltip has been destroyed and cannot execute your method call.');},__geometry:function(){var self=this,$target=self._$origin,originIsArea=self._$origin.is('area');if(originIsArea){var mapName=self._$origin.parent().attr('name');$target=$('img[usemap="#'+mapName+'"]');}
var bcr=$target[0].getBoundingClientRect(),$document=$(env.window.document),$window=$(env.window),$parent=$target,geo={available:{document:null,window:null},document:{size:{height:$document.height(),width:$document.width()}},window:{scroll:{left:env.window.scrollX||env.window.document.documentElement.scrollLeft,top:env.window.scrollY||env.window.document.documentElement.scrollTop},size:{height:$window.height(),width:$window.width()}},origin:{fixedLineage:false,offset:{},size:{height:bcr.bottom-bcr.top,width:bcr.right-bcr.left},usemapImage:originIsArea?$target[0]:null,windowOffset:{bottom:bcr.bottom,left:bcr.left,right:bcr.right,top:bcr.top}}},geoFixed=false;if(originIsArea){var shape=self._$origin.attr('shape'),coords=self._$origin.attr('coords');if(coords){coords=coords.split(',');$.map(coords,function(val,i){coords[i]=parseInt(val);});}
if(shape!='default'){switch(shape){case'circle':var circleCenterLeft=coords[0],circleCenterTop=coords[1],circleRadius=coords[2],areaTopOffset=circleCenterTop-circleRadius,areaLeftOffset=circleCenterLeft-circleRadius;geo.origin.size.height=circleRadius*2;geo.origin.size.width=geo.origin.size.height;geo.origin.windowOffset.left+=areaLeftOffset;geo.origin.windowOffset.top+=areaTopOffset;break;case'rect':var areaLeft=coords[0],areaTop=coords[1],areaRight=coords[2],areaBottom=coords[3];geo.origin.size.height=areaBottom-areaTop;geo.origin.size.width=areaRight-areaLeft;geo.origin.windowOffset.left+=areaLeft;geo.origin.windowOffset.top+=areaTop;break;case'poly':var areaSmallestX=0,areaSmallestY=0,areaGreatestX=0,areaGreatestY=0,arrayAlternate='even';for(var i=0;i<coords.length;i++){var areaNumber=coords[i];if(arrayAlternate=='even'){if(areaNumber>areaGreatestX){areaGreatestX=areaNumber;if(i===0){areaSmallestX=areaGreatestX;}}
if(areaNumber<areaSmallestX){areaSmallestX=areaNumber;}
arrayAlternate='odd';}
else{if(areaNumber>areaGreatestY){areaGreatestY=areaNumber;if(i==1){areaSmallestY=areaGreatestY;}}
if(areaNumber<areaSmallestY){areaSmallestY=areaNumber;}
arrayAlternate='even';}}
geo.origin.size.height=areaGreatestY-areaSmallestY;geo.origin.size.width=areaGreatestX-areaSmallestX;geo.origin.windowOffset.left+=areaSmallestX;geo.origin.windowOffset.top+=areaSmallestY;break;}}}
var edit=function(r){geo.origin.size.height=r.height,geo.origin.windowOffset.left=r.left,geo.origin.windowOffset.top=r.top,geo.origin.size.width=r.width};self._trigger({type:'geometry',edit:edit,geometry:{height:geo.origin.size.height,left:geo.origin.windowOffset.left,top:geo.origin.windowOffset.top,width:geo.origin.size.width}});geo.origin.windowOffset.right=geo.origin.windowOffset.left+geo.origin.size.width;geo.origin.windowOffset.bottom=geo.origin.windowOffset.top+geo.origin.size.height;geo.origin.offset.left=geo.origin.windowOffset.left+geo.window.scroll.left;geo.origin.offset.top=geo.origin.windowOffset.top+geo.window.scroll.top;geo.origin.offset.bottom=geo.origin.offset.top+geo.origin.size.height;geo.origin.offset.right=geo.origin.offset.left+geo.origin.size.width;geo.available.document={bottom:{height:geo.document.size.height-geo.origin.offset.bottom,width:geo.document.size.width},left:{height:geo.document.size.height,width:geo.origin.offset.left},right:{height:geo.document.size.height,width:geo.document.size.width-geo.origin.offset.right},top:{height:geo.origin.offset.top,width:geo.document.size.width}};geo.available.window={bottom:{height:Math.max(geo.window.size.height-Math.max(geo.origin.windowOffset.bottom,0),0),width:geo.window.size.width},left:{height:geo.window.size.height,width:Math.max(geo.origin.windowOffset.left,0)},right:{height:geo.window.size.height,width:Math.max(geo.window.size.width-Math.max(geo.origin.windowOffset.right,0),0)},top:{height:Math.max(geo.origin.windowOffset.top,0),width:geo.window.size.width}};while($parent[0].tagName.toLowerCase()!='html'){if($parent.css('position')=='fixed'){geo.origin.fixedLineage=true;break;}
$parent=$parent.parent();}
return geo;},__optionsFormat:function(){if(typeof this.__options.animationDuration=='number'){this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration];}
if(typeof this.__options.delay=='number'){this.__options.delay=[this.__options.delay,this.__options.delay];}
if(typeof this.__options.delayTouch=='number'){this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch];}
if(typeof this.__options.theme=='string'){this.__options.theme=[this.__options.theme];}
if(this.__options.parent===null){this.__options.parent=$(env.window.document.body);}
else if(typeof this.__options.parent=='string'){this.__options.parent=$(this.__options.parent);}
if(this.__options.trigger=='hover'){this.__options.triggerOpen={mouseenter:true,touchstart:true};this.__options.triggerClose={mouseleave:true,originClick:true,touchleave:true};}
else if(this.__options.trigger=='click'){this.__options.triggerOpen={click:true,tap:true};this.__options.triggerClose={click:true,tap:true};}
this._trigger('options');return this;},__prepareGC:function(){var self=this;if(self.__options.selfDestruction){self.__garbageCollector=setInterval(function(){var now=new Date().getTime();self.__touchEvents=$.grep(self.__touchEvents,function(event,i){return now-event.time>60000;});if(!bodyContains(self._$origin)){self.close(function(){self.destroy();});}},20000);}
else{clearInterval(self.__garbageCollector);}
return self;},__prepareOrigin:function(){var self=this;self._$origin.off('.'+self.__namespace+'-triggerOpen');if(env.hasTouchCapability){self._$origin.on('touchstart.'+self.__namespace+'-triggerOpen '+'touchend.'+self.__namespace+'-triggerOpen '+'touchcancel.'+self.__namespace+'-triggerOpen',function(event){self._touchRecordEvent(event);});}
if(self.__options.triggerOpen.click||(self.__options.triggerOpen.tap&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerOpen.click){eventNames+='click.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerOpen.tap&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self._open(event);}});}
if(self.__options.triggerOpen.mouseenter||(self.__options.triggerOpen.touchstart&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerOpen.mouseenter){eventNames+='mouseenter.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerOpen.touchstart&&env.hasTouchCapability){eventNames+='touchstart.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){self.__pointerIsOverOrigin=true;self._openShortly(event);}});}
if(self.__options.triggerClose.mouseleave||(self.__options.triggerClose.touchleave&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerClose.mouseleave){eventNames+='mouseleave.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerClose.touchleave&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerOpen touchcancel.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self.__pointerIsOverOrigin=false;}});}
return self;},__prepareTooltip:function(){var self=this,p=self.__options.interactive?'auto':'';self._$tooltip.attr('id',self.__namespace).css({'pointer-events':p,zIndex:self.__options.zIndex});$.each(self.__previousThemes,function(i,theme){self._$tooltip.removeClass(theme);});$.each(self.__options.theme,function(i,theme){self._$tooltip.addClass(theme);});self.__previousThemes=$.merge([],self.__options.theme);return self;},__scrollHandler:function(event){var self=this;if(self.__options.triggerClose.scroll){self._close(event);}
else{if(bodyContains(self._$origin)&&bodyContains(self._$tooltip)){var geo=null;if(event.target===env.window.document){if(!self.__Geometry.origin.fixedLineage){if(self.__options.repositionOnScroll){self.reposition(event);}}}
else{geo=self.__geometry();var overflows=false;if(self._$origin.css('position')!='fixed'){self.__$originParents.each(function(i,el){var $el=$(el),overflowX=$el.css('overflow-x'),overflowY=$el.css('overflow-y');if(overflowX!='visible'||overflowY!='visible'){var bcr=el.getBoundingClientRect();if(overflowX!='visible'){if(geo.origin.windowOffset.left<bcr.left||geo.origin.windowOffset.right>bcr.right){overflows=true;return false;}}
if(overflowY!='visible'){if(geo.origin.windowOffset.top<bcr.top||geo.origin.windowOffset.bottom>bcr.bottom){overflows=true;return false;}}}
if($el.css('position')=='fixed'){return false;}});}
if(overflows){self._$tooltip.css('visibility','hidden');}
else{self._$tooltip.css('visibility','visible');if(self.__options.repositionOnScroll){self.reposition(event);}
else{var offsetLeft=geo.origin.offset.left-self.__Geometry.origin.offset.left,offsetTop=geo.origin.offset.top-self.__Geometry.origin.offset.top;self._$tooltip.css({left:self.__lastPosition.coord.left+offsetLeft,top:self.__lastPosition.coord.top+offsetTop});}}}
self._trigger({type:'scroll',event:event,geo:geo});}}
return self;},__stateSet:function(state){this.__state=state;this._trigger({type:'state',state:state});return this;},__timeoutsClear:function(){clearTimeout(this.__timeouts.open);this.__timeouts.open=null;$.each(this.__timeouts.close,function(i,timeout){clearTimeout(timeout);});this.__timeouts.close=[];return this;},__trackerStart:function(){var self=this,$content=self._$tooltip.find('.tooltipster-content');if(self.__options.trackTooltip){self.__contentBcr=$content[0].getBoundingClientRect();}
self.__tracker=setInterval(function(){if(!bodyContains(self._$origin)||!bodyContains(self._$tooltip)){self._close();}
else{if(self.__options.trackOrigin){var g=self.__geometry(),identical=false;if(areEqual(g.origin.size,self.__Geometry.origin.size)){if(self.__Geometry.origin.fixedLineage){if(areEqual(g.origin.windowOffset,self.__Geometry.origin.windowOffset)){identical=true;}}
else{if(areEqual(g.origin.offset,self.__Geometry.origin.offset)){identical=true;}}}
if(!identical){if(self.__options.triggerClose.mouseleave){self._close();}
else{self.reposition();}}}
if(self.__options.trackTooltip){var currentBcr=$content[0].getBoundingClientRect();if(currentBcr.height!==self.__contentBcr.height||currentBcr.width!==self.__contentBcr.width){self.reposition();self.__contentBcr=currentBcr;}}}},self.__options.trackerInterval);return self;},_close:function(event,callback,force){var self=this,ok=true;self._trigger({type:'close',event:event,stop:function(){ok=false;}});if(ok||force){if(callback)self.__callbacks.close.push(callback);self.__callbacks.open=[];self.__timeoutsClear();var finishCallbacks=function(){$.each(self.__callbacks.close,function(i,c){c.call(self,self,{event:event,origin:self._$origin[0]});});self.__callbacks.close=[];};if(self.__state!='closed'){var necessary=true,d=new Date(),now=d.getTime(),newClosingTime=now+self.__options.animationDuration[1];if(self.__state=='disappearing'){if(newClosingTime>self.__closingTime&&self.__options.animationDuration[1]>0){necessary=false;}}
if(necessary){self.__closingTime=newClosingTime;if(self.__state!='disappearing'){self.__stateSet('disappearing');}
var finish=function(){clearInterval(self.__tracker);self._trigger({type:'closing',event:event});self._$tooltip.off('.'+self.__namespace+'-triggerClose').removeClass('tooltipster-dying');$(env.window).off('.'+self.__namespace+'-triggerClose');self.__$originParents.each(function(i,el){$(el).off('scroll.'+self.__namespace+'-triggerClose');});self.__$originParents=null;$(env.window.document.body).off('.'+self.__namespace+'-triggerClose');self._$origin.off('.'+self.__namespace+'-triggerClose');self._off('dismissable');self.__stateSet('closed');self._trigger({type:'after',event:event});if(self.__options.functionAfter){self.__options.functionAfter.call(self,self,{event:event,origin:self._$origin[0]});}
finishCallbacks();};if(env.hasTransitions){self._$tooltip.css({'-moz-animation-duration':self.__options.animationDuration[1]+'ms','-ms-animation-duration':self.__options.animationDuration[1]+'ms','-o-animation-duration':self.__options.animationDuration[1]+'ms','-webkit-animation-duration':self.__options.animationDuration[1]+'ms','animation-duration':self.__options.animationDuration[1]+'ms','transition-duration':self.__options.animationDuration[1]+'ms'});self._$tooltip.clearQueue().removeClass('tooltipster-show').addClass('tooltipster-dying');if(self.__options.animationDuration[1]>0){self._$tooltip.delay(self.__options.animationDuration[1]);}
self._$tooltip.queue(finish);}
else{self._$tooltip.stop().fadeOut(self.__options.animationDuration[1],finish);}}}
else{finishCallbacks();}}
return self;},_off:function(){this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_on:function(){this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_one:function(){this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_open:function(event,callback){var self=this;if(!self.__destroying){if(bodyContains(self._$origin)&&self.__enabled){var ok=true;if(self.__state=='closed'){self._trigger({type:'before',event:event,stop:function(){ok=false;}});if(ok&&self.__options.functionBefore){ok=self.__options.functionBefore.call(self,self,{event:event,origin:self._$origin[0]});}}
if(ok!==false){if(self.__Content!==null){if(callback){self.__callbacks.open.push(callback);}
self.__callbacks.close=[];self.__timeoutsClear();var extraTime,finish=function(){if(self.__state!='stable'){self.__stateSet('stable');}
$.each(self.__callbacks.open,function(i,c){c.call(self,self,{origin:self._$origin[0],tooltip:self._$tooltip[0]});});self.__callbacks.open=[];};if(self.__state!=='closed'){extraTime=0;if(self.__state==='disappearing'){self.__stateSet('appearing');if(env.hasTransitions){self._$tooltip.clearQueue().removeClass('tooltipster-dying').addClass('tooltipster-show');if(self.__options.animationDuration[0]>0){self._$tooltip.delay(self.__options.animationDuration[0]);}
self._$tooltip.queue(finish);}
else{self._$tooltip.stop().fadeIn(finish);}}
else if(self.__state=='stable'){finish();}}
else{self.__stateSet('appearing');extraTime=self.__options.animationDuration[0];self.__contentInsert();self.reposition(event,true);if(env.hasTransitions){self._$tooltip.addClass('tooltipster-'+self.__options.animation).addClass('tooltipster-initial').css({'-moz-animation-duration':self.__options.animationDuration[0]+'ms','-ms-animation-duration':self.__options.animationDuration[0]+'ms','-o-animation-duration':self.__options.animationDuration[0]+'ms','-webkit-animation-duration':self.__options.animationDuration[0]+'ms','animation-duration':self.__options.animationDuration[0]+'ms','transition-duration':self.__options.animationDuration[0]+'ms'});setTimeout(function(){if(self.__state!='closed'){self._$tooltip.addClass('tooltipster-show').removeClass('tooltipster-initial');if(self.__options.animationDuration[0]>0){self._$tooltip.delay(self.__options.animationDuration[0]);}
self._$tooltip.queue(finish);}},0);}
else{self._$tooltip.css('display','none').fadeIn(self.__options.animationDuration[0],finish);}
self.__trackerStart();$(env.window).on('resize.'+self.__namespace+'-triggerClose',function(e){var $ae=$(document.activeElement);if((!$ae.is('input')&&!$ae.is('textarea'))||!$.contains(self._$tooltip[0],$ae[0])){self.reposition(e);}}).on('scroll.'+self.__namespace+'-triggerClose',function(e){self.__scrollHandler(e);});self.__$originParents=self._$origin.parents();self.__$originParents.each(function(i,parent){$(parent).on('scroll.'+self.__namespace+'-triggerClose',function(e){self.__scrollHandler(e);});});if(self.__options.triggerClose.mouseleave||(self.__options.triggerClose.touchleave&&env.hasTouchCapability)){self._on('dismissable',function(event){if(event.dismissable){if(event.delay){timeout=setTimeout(function(){self._close(event.event);},event.delay);self.__timeouts.close.push(timeout);}
else{self._close(event);}}
else{clearTimeout(timeout);}});var $elements=self._$origin,eventNamesIn='',eventNamesOut='',timeout=null;if(self.__options.interactive){$elements=$elements.add(self._$tooltip);}
if(self.__options.triggerClose.mouseleave){eventNamesIn+='mouseenter.'+self.__namespace+'-triggerClose ';eventNamesOut+='mouseleave.'+self.__namespace+'-triggerClose ';}
if(self.__options.triggerClose.touchleave&&env.hasTouchCapability){eventNamesIn+='touchstart.'+self.__namespace+'-triggerClose';eventNamesOut+='touchend.'+self.__namespace+'-triggerClose touchcancel.'+self.__namespace+'-triggerClose';}
$elements.on(eventNamesOut,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){var delay=(event.type=='mouseleave')?self.__options.delay:self.__options.delayTouch;self._trigger({delay:delay[1],dismissable:true,event:event,type:'dismissable'});}}).on(eventNamesIn,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){self._trigger({dismissable:false,event:event,type:'dismissable'});}});}
if(self.__options.triggerClose.originClick){self._$origin.on('click.'+self.__namespace+'-triggerClose',function(event){if(!self._touchIsTouchEvent(event)&&!self._touchIsEmulatedEvent(event)){self._close(event);}});}
if(self.__options.triggerClose.click||(self.__options.triggerClose.tap&&env.hasTouchCapability)){setTimeout(function(){if(self.__state!='closed'){var eventNames='',$body=$(env.window.document.body);if(self.__options.triggerClose.click){eventNames+='click.'+self.__namespace+'-triggerClose ';}
if(self.__options.triggerClose.tap&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerClose';}
$body.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self._touchRecordEvent(event);if(!self.__options.interactive||!$.contains(self._$tooltip[0],event.target)){self._close(event);}}});if(self.__options.triggerClose.tap&&env.hasTouchCapability){$body.on('touchstart.'+self.__namespace+'-triggerClose',function(event){self._touchRecordEvent(event);});}}},0);}
self._trigger('ready');if(self.__options.functionReady){self.__options.functionReady.call(self,self,{origin:self._$origin[0],tooltip:self._$tooltip[0]});}}
if(self.__options.timer>0){var timeout=setTimeout(function(){self._close();},self.__options.timer+extraTime);self.__timeouts.close.push(timeout);}}}}}
return self;},_openShortly:function(event){var self=this,ok=true;if(self.__state!='stable'&&self.__state!='appearing'){if(!self.__timeouts.open){self._trigger({type:'start',event:event,stop:function(){ok=false;}});if(ok){var delay=(event.type.indexOf('touch')==0)?self.__options.delayTouch:self.__options.delay;if(delay[0]){self.__timeouts.open=setTimeout(function(){self.__timeouts.open=null;if(self.__pointerIsOverOrigin&&self._touchIsMeaningfulEvent(event)){self._trigger('startend');self._open(event);}
else{self._trigger('startcancel');}},delay[0]);}
else{self._trigger('startend');self._open(event);}}}}
return self;},_optionsExtract:function(pluginName,defaultOptions){var self=this,options=$.extend(true,{},defaultOptions);var pluginOptions=self.__options[pluginName];if(!pluginOptions){pluginOptions={};$.each(defaultOptions,function(optionName,value){var o=self.__options[optionName];if(o!==undefined){pluginOptions[optionName]=o;}});}
$.each(options,function(optionName,value){if(pluginOptions[optionName]!==undefined){if((typeof value=='object'&&!(value instanceof Array)&&value!=null)&&(typeof pluginOptions[optionName]=='object'&&!(pluginOptions[optionName]instanceof Array)&&pluginOptions[optionName]!=null)){$.extend(options[optionName],pluginOptions[optionName]);}
else{options[optionName]=pluginOptions[optionName];}}});return options;},_plug:function(pluginName){var plugin=$.tooltipster._plugin(pluginName);if(plugin){if(plugin.instance){$.tooltipster.__bridge(plugin.instance,this,plugin.name);}}
else{throw new Error('The "'+pluginName+'" plugin is not defined');}
return this;},_touchIsEmulatedEvent:function(event){var isEmulated=false,now=new Date().getTime();for(var i=this.__touchEvents.length-1;i>=0;i--){var e=this.__touchEvents[i];if(now-e.time<500){if(e.target===event.target){isEmulated=true;}}
else{break;}}
return isEmulated;},_touchIsMeaningfulEvent:function(event){return((this._touchIsTouchEvent(event)&&!this._touchSwiped(event.target))||(!this._touchIsTouchEvent(event)&&!this._touchIsEmulatedEvent(event)));},_touchIsTouchEvent:function(event){return event.type.indexOf('touch')==0;},_touchRecordEvent:function(event){if(this._touchIsTouchEvent(event)){event.time=new Date().getTime();this.__touchEvents.push(event);}
return this;},_touchSwiped:function(target){var swiped=false;for(var i=this.__touchEvents.length-1;i>=0;i--){var e=this.__touchEvents[i];if(e.type=='touchmove'){swiped=true;break;}
else if(e.type=='touchstart'&&target===e.target){break;}}
return swiped;},_trigger:function(){var args=Array.prototype.slice.apply(arguments);if(typeof args[0]=='string'){args[0]={type:args[0]};}
args[0].instance=this;args[0].origin=this._$origin?this._$origin[0]:null;args[0].tooltip=this._$tooltip?this._$tooltip[0]:null;this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,args);$.tooltipster._trigger.apply($.tooltipster,args);this.__$emitterPublic.trigger.apply(this.__$emitterPublic,args);return this;},_unplug:function(pluginName){var self=this;if(self[pluginName]){var plugin=$.tooltipster._plugin(pluginName);if(plugin.instance){$.each(plugin.instance,function(methodName,fn){if(self[methodName]&&self[methodName].bridged===self[pluginName]){delete self[methodName];}});}
if(self[pluginName].__destroy){self[pluginName].__destroy();}
delete self[pluginName];}
return self;},close:function(callback){if(!this.__destroyed){this._close(null,callback);}
else{this.__destroyError();}
return this;},content:function(content){var self=this;if(content===undefined){return self.__Content;}
else{if(!self.__destroyed){self.__contentSet(content);if(self.__Content!==null){if(self.__state!=='closed'){self.__contentInsert();self.reposition();if(self.__options.updateAnimation){if(env.hasTransitions){var animation=self.__options.updateAnimation;self._$tooltip.addClass('tooltipster-update-'+animation);setTimeout(function(){if(self.__state!='closed'){self._$tooltip.removeClass('tooltipster-update-'+animation);}},1000);}
else{self._$tooltip.fadeTo(200,0.5,function(){if(self.__state!='closed'){self._$tooltip.fadeTo(200,1);}});}}}}
else{self._close();}}
else{self.__destroyError();}
return self;}},destroy:function(){var self=this;if(!self.__destroyed){if(self.__state!='closed'){self.option('animationDuration',0)._close(null,null,true);}
else{self.__timeoutsClear();}
self._trigger('destroy');self.__destroyed=true;self._$origin.removeData(self.__namespace).off('.'+self.__namespace+'-triggerOpen');$(env.window.document.body).off('.'+self.__namespace+'-triggerOpen');var ns=self._$origin.data('tooltipster-ns');if(ns){if(ns.length===1){var title=null;if(self.__options.restoration=='previous'){title=self._$origin.data('tooltipster-initialTitle');}
else if(self.__options.restoration=='current'){title=(typeof self.__Content=='string')?self.__Content:$('<div></div>').append(self.__Content).html();}
if(title){self._$origin.attr('title',title);}
self._$origin.removeClass('tooltipstered');self._$origin.removeData('tooltipster-ns').removeData('tooltipster-initialTitle');}
else{ns=$.grep(ns,function(el,i){return el!==self.__namespace;});self._$origin.data('tooltipster-ns',ns);}}
self._trigger('destroyed');self._off();self.off();self.__Content=null;self.__$emitterPrivate=null;self.__$emitterPublic=null;self.__options.parent=null;self._$origin=null;self._$tooltip=null;$.tooltipster.__instancesLatestArr=$.grep($.tooltipster.__instancesLatestArr,function(el,i){return self!==el;});clearInterval(self.__garbageCollector);}
else{self.__destroyError();}
return self;},disable:function(){if(!this.__destroyed){this._close();this.__enabled=false;return this;}
else{this.__destroyError();}
return this;},elementOrigin:function(){if(!this.__destroyed){return this._$origin[0];}
else{this.__destroyError();}},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null;},enable:function(){this.__enabled=true;return this;},hide:function(callback){return this.close(callback);},instance:function(){return this;},off:function(){if(!this.__destroyed){this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
return this;},on:function(){if(!this.__destroyed){this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;},one:function(){if(!this.__destroyed){this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;},open:function(callback){if(!this.__destroyed){this._open(null,callback);}
else{this.__destroyError();}
return this;},option:function(o,val){if(val===undefined){return this.__options[o];}
else{if(!this.__destroyed){this.__options[o]=val;this.__optionsFormat();if($.inArray(o,['trigger','triggerClose','triggerOpen'])>=0){this.__prepareOrigin();}
if(o==='selfDestruction'){this.__prepareGC();}}
else{this.__destroyError();}
return this;}},reposition:function(event,tooltipIsDetached){var self=this;if(!self.__destroyed){if(self.__state!='closed'&&bodyContains(self._$origin)){if(tooltipIsDetached||bodyContains(self._$tooltip)){if(!tooltipIsDetached){self._$tooltip.detach();}
self.__Geometry=self.__geometry();self._trigger({type:'reposition',event:event,helper:{geo:self.__Geometry}});}}}
else{self.__destroyError();}
return self;},show:function(callback){return this.open(callback);},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:this.__state!=='closed',state:this.__state};},triggerHandler:function(){if(!this.__destroyed){this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;}};$.fn.tooltipster=function(){var args=Array.prototype.slice.apply(arguments),contentCloningWarning='You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';if(this.length===0){return this;}
else{if(typeof args[0]==='string'){var v='#*$~&';this.each(function(){var ns=$(this).data('tooltipster-ns'),self=ns?$(this).data(ns[0]):null;if(self){if(typeof self[args[0]]==='function'){if(this.length>1&&args[0]=='content'&&(args[1]instanceof $||(typeof args[1]=='object'&&args[1]!=null&&args[1].tagName))&&!self.__options.contentCloning&&self.__options.debug){console.log(contentCloningWarning);}
var resp=self[args[0]](args[1],args[2]);}
else{throw new Error('Unknown method "'+args[0]+'"');}
if(resp!==self||args[0]==='instance'){v=resp;return false;}}
else{throw new Error('You called Tooltipster\'s "'+args[0]+'" method on an uninitialized element');}});return(v!=='#*$~&')?v:this;}
else{$.tooltipster.__instancesLatestArr=[];var multipleIsSet=args[0]&&args[0].multiple!==undefined,multiple=(multipleIsSet&&args[0].multiple)||(!multipleIsSet&&defaults.multiple),contentIsSet=args[0]&&args[0].content!==undefined,content=(contentIsSet&&args[0].content)||(!contentIsSet&&defaults.content),contentCloningIsSet=args[0]&&args[0].contentCloning!==undefined,contentCloning=(contentCloningIsSet&&args[0].contentCloning)||(!contentCloningIsSet&&defaults.contentCloning),debugIsSet=args[0]&&args[0].debug!==undefined,debug=(debugIsSet&&args[0].debug)||(!debugIsSet&&defaults.debug);if(this.length>1&&(content instanceof $||(typeof content=='object'&&content!=null&&content.tagName))&&!contentCloning&&debug){console.log(contentCloningWarning);}
this.each(function(){var go=false,$this=$(this),ns=$this.data('tooltipster-ns'),obj=null;if(!ns){go=true;}
else if(multiple){go=true;}
else if(debug){console.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');console.log(this);}
if(go){obj=new $.Tooltipster(this,args[0]);if(!ns)ns=[];ns.push(obj.__namespace);$this.data('tooltipster-ns',ns);$this.data(obj.__namespace,obj);if(obj.__options.functionInit){obj.__options.functionInit.call(obj,obj,{origin:this});}
obj._trigger('init');}
$.tooltipster.__instancesLatestArr.push(obj);});return this;}}};function Ruler($tooltip){this.$container;this.constraints=null;this.__$tooltip;this.__init($tooltip);}
Ruler.prototype={__init:function($tooltip){this.__$tooltip=$tooltip;this.__$tooltip.css({left:0,overflow:'hidden',position:'absolute',top:0}).find('.tooltipster-content').css('overflow','auto');this.$container=$('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(env.window.document.body);},__forceRedraw:function(){var $p=this.__$tooltip.parent();this.__$tooltip.detach();this.__$tooltip.appendTo($p);},constrain:function(width,height){this.constraints={width:width,height:height};this.__$tooltip.css({display:'block',height:'',overflow:'auto',width:width});return this;},destroy:function(){this.__$tooltip.detach().find('.tooltipster-content').css({display:'',overflow:''});this.$container.remove();},free:function(){this.constraints=null;this.__$tooltip.css({display:'',height:'',overflow:'visible',width:''});return this;},measure:function(){this.__forceRedraw();var tooltipBcr=this.__$tooltip[0].getBoundingClientRect(),result={size:{height:tooltipBcr.height||(tooltipBcr.bottom-tooltipBcr.top),width:tooltipBcr.width||(tooltipBcr.right-tooltipBcr.left)}};if(this.constraints){var $content=this.__$tooltip.find('.tooltipster-content'),height=this.__$tooltip.outerHeight(),contentBcr=$content[0].getBoundingClientRect(),fits={height:height<=this.constraints.height,width:(tooltipBcr.width<=this.constraints.width&&contentBcr.width>=$content[0].scrollWidth-1)};result.fits=fits.height&&fits.width;}
if(env.IE&&env.IE<=11&&result.size.width!==env.window.document.documentElement.clientWidth){result.size.width=Math.ceil(result.size.width)+1;}
return result;}};function areEqual(a,b){var same=true;$.each(a,function(i,_){if(b[i]===undefined||a[i]!==b[i]){same=false;return false;}});return same;}
function bodyContains($obj){var id=$obj.attr('id'),el=id?env.window.document.getElementById(id):null;return el?el===$obj[0]:$.contains(env.window.document.body,$obj[0]);}
var uA=navigator.userAgent.toLowerCase();if(uA.indexOf('msie')!=-1)env.IE=parseInt(uA.split('msie')[1]);else if(uA.toLowerCase().indexOf('trident')!==-1&&uA.indexOf(' rv:11')!==-1)env.IE=11;else if(uA.toLowerCase().indexOf('edge/')!=-1)env.IE=parseInt(uA.toLowerCase().split('edge/')[1]);function transitionSupport(){if(!win)return false;var b=win.document.body||win.document.documentElement,s=b.style,p='transition',v=['Moz','Webkit','Khtml','O','ms'];if(typeof s[p]=='string'){return true;}
p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++){if(typeof s[v[i]+p]=='string'){return true;}}
return false;}
var pluginName='tooltipster.sideTip';$.tooltipster._plugin({name:pluginName,instance:{__defaults:function(){return{arrow:true,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:'top',viewportAware:true};},__init:function(instance){var self=this;self.__instance=instance;self.__namespace='tooltipster-sideTip-'+Math.round(Math.random()*1000000);self.__previousState='closed';self.__options;self.__optionsFormat();self.__instance._on('state.'+self.__namespace,function(event){if(event.state=='closed'){self.__close();}
else if(event.state=='appearing'&&self.__previousState=='closed'){self.__create();}
self.__previousState=event.state;});self.__instance._on('options.'+self.__namespace,function(){self.__optionsFormat();});self.__instance._on('reposition.'+self.__namespace,function(e){self.__reposition(e.event,e.helper);});},__close:function(){if(this.__instance.content()instanceof $){this.__instance.content().detach();}
this.__instance._$tooltip.remove();this.__instance._$tooltip=null;},__create:function(){var $html=$('<div class="tooltipster-base tooltipster-sidetip">'+'<div class="tooltipster-box">'+'<div class="tooltipster-content"></div>'+'</div>'+'<div class="tooltipster-arrow">'+'<div class="tooltipster-arrow-uncropped">'+'<div class="tooltipster-arrow-border"></div>'+'<div class="tooltipster-arrow-background"></div>'+'</div>'+'</div>'+'</div>');if(!this.__options.arrow){$html.find('.tooltipster-box').css('margin',0).end().find('.tooltipster-arrow').hide();}
if(this.__options.minWidth){$html.css('min-width',this.__options.minWidth+'px');}
if(this.__options.maxWidth){$html.css('max-width',this.__options.maxWidth+'px');}
this.__instance._$tooltip=$html;this.__instance._trigger('created');},__destroy:function(){this.__instance._off('.'+self.__namespace);},__optionsFormat:function(){var self=this;self.__options=self.__instance._optionsExtract(pluginName,self.__defaults());if(self.__options.position){self.__options.side=self.__options.position;}
if(typeof self.__options.distance!='object'){self.__options.distance=[self.__options.distance];}
if(self.__options.distance.length<4){if(self.__options.distance[1]===undefined)self.__options.distance[1]=self.__options.distance[0];if(self.__options.distance[2]===undefined)self.__options.distance[2]=self.__options.distance[0];if(self.__options.distance[3]===undefined)self.__options.distance[3]=self.__options.distance[1];self.__options.distance={top:self.__options.distance[0],right:self.__options.distance[1],bottom:self.__options.distance[2],left:self.__options.distance[3]};}
if(typeof self.__options.side=='string'){var opposites={'top':'bottom','right':'left','bottom':'top','left':'right'};self.__options.side=[self.__options.side,opposites[self.__options.side]];if(self.__options.side[0]=='left'||self.__options.side[0]=='right'){self.__options.side.push('top','bottom');}
else{self.__options.side.push('right','left');}}
if($.tooltipster._env.IE===6&&self.__options.arrow!==true){self.__options.arrow=false;}},__reposition:function(event,helper){var self=this,finalResult,targets=self.__targetFind(helper),testResults=[];self.__instance._$tooltip.detach();var $clone=self.__instance._$tooltip.clone(),ruler=$.tooltipster._getRuler($clone),satisfied=false,animation=self.__instance.option('animation');if(animation){$clone.removeClass('tooltipster-'+animation);}
$.each(['window','document'],function(i,container){var takeTest=null;self.__instance._trigger({container:container,helper:helper,satisfied:satisfied,takeTest:function(bool){takeTest=bool;},results:testResults,type:'positionTest'});if(takeTest==true||(takeTest!=false&&satisfied==false&&(container!='window'||self.__options.viewportAware))){for(var i=0;i<self.__options.side.length;i++){var distance={horizontal:0,vertical:0},side=self.__options.side[i];if(side=='top'||side=='bottom'){distance.vertical=self.__options.distance[side];}
else{distance.horizontal=self.__options.distance[side];}
self.__sideChange($clone,side);$.each(['natural','constrained'],function(i,mode){takeTest=null;self.__instance._trigger({container:container,event:event,helper:helper,mode:mode,results:testResults,satisfied:satisfied,side:side,takeTest:function(bool){takeTest=bool;},type:'positionTest'});if(takeTest==true||(takeTest!=false&&satisfied==false)){var testResult={container:container,distance:distance,fits:null,mode:mode,outerSize:null,side:side,size:null,target:targets[side],whole:null};var rulerConfigured=(mode=='natural')?ruler.free():ruler.constrain(helper.geo.available[container][side].width-distance.horizontal,helper.geo.available[container][side].height-distance.vertical),rulerResults=rulerConfigured.measure();testResult.size=rulerResults.size;testResult.outerSize={height:rulerResults.size.height+distance.vertical,width:rulerResults.size.width+distance.horizontal};if(mode=='natural'){if(helper.geo.available[container][side].width>=testResult.outerSize.width&&helper.geo.available[container][side].height>=testResult.outerSize.height){testResult.fits=true;}
else{testResult.fits=false;}}
else{testResult.fits=rulerResults.fits;}
if(container=='window'){if(!testResult.fits){testResult.whole=false;}
else{if(side=='top'||side=='bottom'){testResult.whole=(helper.geo.origin.windowOffset.right>=self.__options.minIntersection&&helper.geo.window.size.width-helper.geo.origin.windowOffset.left>=self.__options.minIntersection);}
else{testResult.whole=(helper.geo.origin.windowOffset.bottom>=self.__options.minIntersection&&helper.geo.window.size.height-helper.geo.origin.windowOffset.top>=self.__options.minIntersection);}}}
testResults.push(testResult);if(testResult.whole){satisfied=true;}
else{if(testResult.mode=='natural'&&(testResult.fits||testResult.size.width<=helper.geo.available[container][side].width)){return false;}}}});}}});self.__instance._trigger({edit:function(r){testResults=r;},event:event,helper:helper,results:testResults,type:'positionTested'});testResults.sort(function(a,b){if(a.whole&&!b.whole){return-1;}
else if(!a.whole&&b.whole){return 1;}
else if(a.whole&&b.whole){var ai=self.__options.side.indexOf(a.side),bi=self.__options.side.indexOf(b.side);if(ai<bi){return-1;}
else if(ai>bi){return 1;}
else{return a.mode=='natural'?-1:1;}}
else{if(a.fits&&!b.fits){return-1;}
else if(!a.fits&&b.fits){return 1;}
else if(a.fits&&b.fits){var ai=self.__options.side.indexOf(a.side),bi=self.__options.side.indexOf(b.side);if(ai<bi){return-1;}
else if(ai>bi){return 1;}
else{return a.mode=='natural'?-1:1;}}
else{if(a.container=='document'&&a.side=='bottom'&&a.mode=='natural'){return-1;}
else{return 1;}}}});finalResult=testResults[0];finalResult.coord={};switch(finalResult.side){case'left':case'right':finalResult.coord.top=Math.floor(finalResult.target-finalResult.size.height/2);break;case'bottom':case'top':finalResult.coord.left=Math.floor(finalResult.target-finalResult.size.width/2);break;}
switch(finalResult.side){case'left':finalResult.coord.left=helper.geo.origin.windowOffset.left-finalResult.outerSize.width;break;case'right':finalResult.coord.left=helper.geo.origin.windowOffset.right+finalResult.distance.horizontal;break;case'top':finalResult.coord.top=helper.geo.origin.windowOffset.top-finalResult.outerSize.height;break;case'bottom':finalResult.coord.top=helper.geo.origin.windowOffset.bottom+finalResult.distance.vertical;break;}
if(finalResult.container=='window'){if(finalResult.side=='top'||finalResult.side=='bottom'){if(finalResult.coord.left<0){if(helper.geo.origin.windowOffset.right-this.__options.minIntersection>=0){finalResult.coord.left=0;}
else{finalResult.coord.left=helper.geo.origin.windowOffset.right-this.__options.minIntersection-1;}}
else if(finalResult.coord.left>helper.geo.window.size.width-finalResult.size.width){if(helper.geo.origin.windowOffset.left+this.__options.minIntersection<=helper.geo.window.size.width){finalResult.coord.left=helper.geo.window.size.width-finalResult.size.width;}
else{finalResult.coord.left=helper.geo.origin.windowOffset.left+this.__options.minIntersection+1-finalResult.size.width;}}}
else{if(finalResult.coord.top<0){if(helper.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0){finalResult.coord.top=0;}
else{finalResult.coord.top=helper.geo.origin.windowOffset.bottom-this.__options.minIntersection-1;}}
else if(finalResult.coord.top>helper.geo.window.size.height-finalResult.size.height){if(helper.geo.origin.windowOffset.top+this.__options.minIntersection<=helper.geo.window.size.height){finalResult.coord.top=helper.geo.window.size.height-finalResult.size.height;}
else{finalResult.coord.top=helper.geo.origin.windowOffset.top+this.__options.minIntersection+1-finalResult.size.height;}}}}
else{if(finalResult.coord.left>helper.geo.window.size.width-finalResult.size.width){finalResult.coord.left=helper.geo.window.size.width-finalResult.size.width;}
if(finalResult.coord.left<0){finalResult.coord.left=0;}}
self.__sideChange($clone,finalResult.side);helper.tooltipClone=$clone[0];helper.tooltipParent=self.__instance.option('parent').parent[0];helper.mode=finalResult.mode;helper.whole=finalResult.whole;helper.origin=self.__instance._$origin[0];helper.tooltip=self.__instance._$tooltip[0];delete finalResult.container;delete finalResult.fits;delete finalResult.mode;delete finalResult.outerSize;delete finalResult.whole;finalResult.distance=finalResult.distance.horizontal||finalResult.distance.vertical;var finalResultClone=$.extend(true,{},finalResult);self.__instance._trigger({edit:function(result){finalResult=result;},event:event,helper:helper,position:finalResultClone,type:'position'});if(self.__options.functionPosition){var result=self.__options.functionPosition.call(self,self.__instance,helper,finalResultClone);if(result)finalResult=result;}
ruler.destroy();var arrowCoord,maxVal;if(finalResult.side=='top'||finalResult.side=='bottom'){arrowCoord={prop:'left',val:finalResult.target-finalResult.coord.left};maxVal=finalResult.size.width-this.__options.minIntersection;}
else{arrowCoord={prop:'top',val:finalResult.target-finalResult.coord.top};maxVal=finalResult.size.height-this.__options.minIntersection;}
if(arrowCoord.val<this.__options.minIntersection){arrowCoord.val=this.__options.minIntersection;}
else if(arrowCoord.val>maxVal){arrowCoord.val=maxVal;}
var originParentOffset;if(helper.geo.origin.fixedLineage){originParentOffset=helper.geo.origin.windowOffset;}
else{originParentOffset={left:helper.geo.origin.windowOffset.left+helper.geo.window.scroll.left,top:helper.geo.origin.windowOffset.top+helper.geo.window.scroll.top};}
finalResult.coord={left:originParentOffset.left+(finalResult.coord.left-helper.geo.origin.windowOffset.left),top:originParentOffset.top+(finalResult.coord.top-helper.geo.origin.windowOffset.top)};self.__sideChange(self.__instance._$tooltip,finalResult.side);if(helper.geo.origin.fixedLineage){self.__instance._$tooltip.css('position','fixed');}
else{self.__instance._$tooltip.css('position','');}
self.__instance._$tooltip.css({left:finalResult.coord.left,top:finalResult.coord.top,height:finalResult.size.height,width:finalResult.size.width}).find('.tooltipster-arrow').css({'left':'','top':''}).css(arrowCoord.prop,arrowCoord.val);self.__instance._$tooltip.appendTo(self.__instance.option('parent'));self.__instance._trigger({type:'repositioned',event:event,position:finalResult});},__sideChange:function($obj,side){$obj.removeClass('tooltipster-bottom').removeClass('tooltipster-left').removeClass('tooltipster-right').removeClass('tooltipster-top').addClass('tooltipster-'+side);},__targetFind:function(helper){var target={},rects=this.__instance._$origin[0].getClientRects();if(rects.length>1){var opacity=this.__instance._$origin.css('opacity');if(opacity==1){this.__instance._$origin.css('opacity',0.99);rects=this.__instance._$origin[0].getClientRects();this.__instance._$origin.css('opacity',1);}}
if(rects.length<2){target.top=Math.floor(helper.geo.origin.windowOffset.left+(helper.geo.origin.size.width/2));target.bottom=target.top;target.left=Math.floor(helper.geo.origin.windowOffset.top+(helper.geo.origin.size.height/2));target.right=target.left;}
else{var targetRect=rects[0];target.top=Math.floor(targetRect.left+(targetRect.right-targetRect.left)/2);if(rects.length>2){targetRect=rects[Math.ceil(rects.length/2)-1];}
else{targetRect=rects[0];}
target.right=Math.floor(targetRect.top+(targetRect.bottom-targetRect.top)/2);targetRect=rects[rects.length-1];target.bottom=Math.floor(targetRect.left+(targetRect.right-targetRect.left)/2);if(rects.length>2){targetRect=rects[Math.ceil((rects.length+1)/2)-1];}
else{targetRect=rects[rects.length-1];}
target.left=Math.floor(targetRect.top+(targetRect.bottom-targetRect.top)/2);}
return target;}}});return $;}));/*!
 * jQuery HiGoogleFonts Library v0.1.0
 * http://asadiqbal.com/
 *
 * Uses select2 jquery library for creating Picker
 *
 * Copyright Hiwaas and other contributors
 * Released under the Apache license 2.0
 * https://github.com/saadqbal/HiGoogleFonts/blob/master/LICENSE
 *
 * Date: 2016-Feb-20
 */
(function($){$.fn.higooglefonts=function(options){var settings=$.extend({selectedCallback:function(params){},loadedCallback:function(params){}},options);var fontMap=fontMap||[];fonts.forEach(function(font,index){fontMap.push({id:font,text:font,itemId:index});});var y=0;this.select2({placeholder:"Select Font Family",data:fontMap,theme:"classic",triggerChange:true,allowClear:true,minimumResultsForSearch:Infinity,templateResult:function(result){var state=$('<div style="background-position:-10px -'+y+'px !important;" class="li_'+result.itemId+'">'+result.text+'</div>');y+=29;return state;}});this.on("select2:open",function(e){y=0;});this.on("select2:close",function(e){y=0;});this.on("select2:select",function(e){var font_family=e.params.data.text;if(typeof settings.selectedCallback=='function'){settings.selectedCallback.call(this,e.params.data.text);}
WebFont.load({google:{families:[font_family]},fontactive:function(familyName,fvd){if(typeof settings.loadedCallback=='function'){settings.loadedCallback.call(this,familyName);}}});});};var fonts=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kanit","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"];}(jQuery));/*! jquery.livequery - v1.3.6 - 2016-12-09
 * Copyright (c)
 *  (c) 2010, Brandon Aaron (http://brandonaaron.net)
 *  (c) 2012 - 2016, Alexander Zaytsev (https://alexzaytsev.me)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($,undefined){function _match(me,query,fn,fn2){return me.selector==query.selector&&me.context==query.context&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid);}
$.extend($.fn,{livequery:function(fn,fn2){var me=this,q;$.each($jQlq.queries,function(i,query){if(_match(me,query,fn,fn2))
return(q=query)&&false;});q=q||new $jQlq(me.selector,me.context,fn,fn2);q.stopped=false;q.run();return me;},expire:function(fn,fn2){var me=this;$.each($jQlq.queries,function(i,query){if(_match(me,query,fn,fn2)&&!me.stopped)
$jQlq.stop(query.id);});return me;}});var $jQlq=$.livequery=function(selector,context,fn,fn2){var me=this;me.selector=selector;me.context=context;me.fn=fn;me.fn2=fn2;me.elements=$([]);me.stopped=false;me.id=$jQlq.queries.push(me)-1;fn.$lqguid=fn.$lqguid||$jQlq.guid++;if(fn2)fn2.$lqguid=fn2.$lqguid||$jQlq.guid++;return me;};$jQlq.prototype={stop:function(){var me=this;if(me.stopped)return;if(me.fn2)
me.elements.each(me.fn2);me.elements=$([]);me.stopped=true;},run:function(){var me=this;if(me.stopped)return;var oEls=me.elements,els=$(me.selector,me.context),newEls=els.not(oEls),delEls=oEls.not(els);me.elements=els;newEls.each(me.fn);if(me.fn2)
delEls.each(me.fn2);}};$.extend($jQlq,{guid:0,queries:[],queue:[],running:false,timeout:null,registered:[],checkQueue:function(){if($jQlq.running&&$jQlq.queue.length){var length=$jQlq.queue.length;while(length--)
$jQlq.queries[$jQlq.queue.shift()].run();}},pause:function(){$jQlq.running=false;},play:function(){$jQlq.running=true;$jQlq.run();},registerPlugin:function(){$.each(arguments,function(i,n){if(!$.fn[n]||$.inArray(n,$jQlq.registered)>0)return;var old=$.fn[n];$.fn[n]=function(){var r=old.apply(this,arguments);$jQlq.run();return r;};$jQlq.registered.push(n);});},run:function(id){if(id!==undefined){if($.inArray(id,$jQlq.queue)<0)
$jQlq.queue.push(id);}
else
$.each($jQlq.queries,function(id){if($.inArray(id,$jQlq.queue)<0)
$jQlq.queue.push(id);});if($jQlq.timeout)clearTimeout($jQlq.timeout);$jQlq.timeout=setTimeout($jQlq.checkQueue,20);},stop:function(id){if(id!==undefined)
$jQlq.queries[id].stop();else
$.each($jQlq.queries,$jQlq.prototype.stop);}});$jQlq.registerPlugin('append','prepend','after','before','wrap','attr','removeAttr','addClass','removeClass','toggleClass','empty','remove','html','prop','removeProp');$(function(){$jQlq.play();});}));